<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Visibility</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Visibility</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:oliver'+'&#'+'64;'+'fpdf.org?subject=Visibility">');</SCRIPT>Olivier<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This script allows to restrict the rendering of some elements to screen or printout. This can be useful, for instance,
to put a background image or color that will show on screen but won't print.<BR>
<BR>
<TT>SetVisibility(<B>string</B> v)</TT><BR>
<BR>
<TT>v</TT> can take one of the following values:
<UL>
<LI><TT>all</TT>: always visible
<LI><TT>print</TT>: visible only when printed
<LI><TT>screen</TT>: visible only when displayed on screen
</UL>
<B>Note:</B> this feature requires at least Acrobat Reader 6.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br>class </font>PDF_Visibility <font class="kw">extends </font>FPDF<br><font class="kw">{<br>var </font>$visibility<font class="kw">=</font><font class="str">'all'</font><font class="kw">;<br>var </font>$n_ocg_print<font class="kw">;<br>var </font>$n_ocg_view<font class="kw">;<br><br>function </font>SetVisibility<font class="kw">(</font>$v<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$<font class="kw">this-&gt;</font>visibility<font class="kw">!=</font><font class="str">'all'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'EMC'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$v<font class="kw">==</font><font class="str">'print'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/OC /OC1 BDC'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$v<font class="kw">==</font><font class="str">'screen'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/OC /OC2 BDC'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$v<font class="kw">!=</font><font class="str">'all'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Error<font class="kw">(</font><font class="str">'Incorrect visibility: '</font><font class="kw">.</font>$v<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>visibility<font class="kw">=</font>$v<font class="kw">;<br>}<br><br>function </font>_endpage<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetVisibility<font class="kw">(</font><font class="str">'all'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_endpage<font class="kw">();<br>}<br><br>function </font>_enddoc<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$<font class="kw">this-&gt;</font>PDFVersion<font class="kw">&lt;</font><font class="str">'1.5'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>PDFVersion<font class="kw">=</font><font class="str">'1.5'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_enddoc<font class="kw">();<br>}<br><br>function </font>_putocg<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_newobj<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>n_ocg_print<font class="kw">=</font>$<font class="kw">this-&gt;</font>n<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&lt;&lt;/Type /OCG /Name '</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>_textstring<font class="kw">(</font><font class="str">'print'</font><font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Usage &lt;&lt;/Print &lt;&lt;/PrintState /ON&gt;&gt; /View &lt;&lt;/ViewState /OFF&gt;&gt;&gt;&gt;&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'endobj'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_newobj<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>n_ocg_view<font class="kw">=</font>$<font class="kw">this-&gt;</font>n<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&lt;&lt;/Type /OCG /Name '</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>_textstring<font class="kw">(</font><font class="str">'view'</font><font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Usage &lt;&lt;/Print &lt;&lt;/PrintState /OFF&gt;&gt; /View &lt;&lt;/ViewState /ON&gt;&gt;&gt;&gt;&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'endobj'</font><font class="kw">);<br>}<br><br>function </font>_putresources<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_putocg<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putresources<font class="kw">();<br>}<br><br>function </font>_putresourcedict<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putresourcedict<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Properties &lt;&lt;/OC1 '</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>n_ocg_print<font class="kw">.</font><font class="str">' 0 R /OC2 '</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>n_ocg_view<font class="kw">.</font><font class="str">' 0 R&gt;&gt;'</font><font class="kw">);<br>}<br><br>function </font>_putcatalog<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putcatalog<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$p<font class="kw">=</font>$<font class="kw">this-&gt;</font>n_ocg_print<font class="kw">.</font><font class="str">' 0 R'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$v<font class="kw">=</font>$<font class="kw">this-&gt;</font>n_ocg_view<font class="kw">.</font><font class="str">' 0 R'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$as<font class="kw">=</font><font class="str">"&lt;&lt;/Event /Print /OCGs </font><font class="kw">[</font><font class="str">$p $v</font><font class="kw">]</font><font class="str"> /Category </font><font class="kw">[</font><font class="str">/Print</font><font class="kw">]</font><font class="str">&gt;&gt; &lt;&lt;/Event /View /OCGs </font><font class="kw">[</font><font class="str">$p $v</font><font class="kw">]</font><font class="str"> /Category </font><font class="kw">[</font><font class="str">/View</font><font class="kw">]</font><font class="str">&gt;&gt;"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">"/OCProperties &lt;&lt;/OCGs </font><font class="kw">[</font><font class="str">$p $v</font><font class="kw">]</font><font class="str"> /D &lt;&lt;/ON </font><font class="kw">[</font><font class="str">$p</font><font class="kw">]</font><font class="str"> /OFF </font><font class="kw">[</font><font class="str">$v</font><font class="kw">]</font><font class="str"> /AS </font><font class="kw">[</font><font class="str">$as</font><font class="kw">]</font><font class="str">&gt;&gt;&gt;&gt;"</font><font class="kw">);<br>}<br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'visibility.php'</font><font class="kw">);<br><br></font>$pdf<font class="kw">=new </font>PDF_Visibility<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>14<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetVisibility<font class="kw">(</font><font class="str">'screen'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>6<font class="kw">,</font><font class="str">"This line is for display.\n"</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetVisibility<font class="kw">(</font><font class="str">'print'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>6<font class="kw">,</font><font class="str">"This line is for printout.\n"</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetVisibility<font class="kw">(</font><font class="str">'all'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex75.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script75.zip">ZIP</A> | <A HREF="script75.tgz">TGZ</A>
</BODY>
</HTML>

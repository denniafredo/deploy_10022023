<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Page groups</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Page groups</H2>
<H4 CLASS="st">Informations</H4>Author: Larry Stanbery<BR>License: Freeware
<H4 CLASS="st">Description</H4>This script allows to do page numbering inside groups, such as: 1/2, 2/2, then back to 1/4, 2/4...
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br></font><font class="cmt">// Written by Larry Stanbery - 20 May 2004<br>// "freeware" -- same license as FPDF<br>// creates "page groups" -- groups of pages with page numbering<br>// total page numbers are represented by aliases of the form {nbX}<br><br></font><font class="kw">class </font>PDF_PageGroup <font class="kw">extends </font>FPDF<br><font class="kw">{<br>&nbsp;&nbsp;&nbsp;&nbsp;var </font>$NewPageGroup<font class="kw">;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// variable indicating whether a new group was requested<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">var </font>$PageGroups<font class="kw">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// variable containing the number of pages of the groups<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">var </font>$CurrPageGroup<font class="kw">;&nbsp;&nbsp;</font><font class="cmt">// variable containing the alias of the current page group<br><br>&nbsp;&nbsp;&nbsp;&nbsp;// create a new page group; call this before calling AddPage()<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>StartPageGroup<font class="kw">()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>NewPageGroup<font class="kw">=</font>true<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// current page in the group<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>GroupPageNo<font class="kw">()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font>$<font class="kw">this-&gt;</font>PageGroups<font class="kw">[</font>$<font class="kw">this-&gt;</font>CurrPageGroup<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// alias of the current page group -- will be replaced by the total number of pages in this group<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>PageGroupAlias<font class="kw">()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font>$<font class="kw">this-&gt;</font>CurrPageGroup<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>_beginpage<font class="kw">(</font>$orientation<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_beginpage<font class="kw">(</font>$orientation<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$<font class="kw">this-&gt;</font>NewPageGroup<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// start a new group<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$n <font class="kw">= </font>sizeof<font class="kw">(</font>$<font class="kw">this-&gt;</font>PageGroups<font class="kw">)+</font>1<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$alias <font class="kw">= </font><font class="str">"</font><font class="kw">{</font><font class="str">nb$n</font><font class="kw">}</font><font class="str">"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>PageGroups<font class="kw">[</font>$alias<font class="kw">] = </font>1<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CurrPageGroup <font class="kw">= </font>$alias<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>NewPageGroup<font class="kw">=</font>false<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$<font class="kw">this-&gt;</font>CurrPageGroup<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>PageGroups<font class="kw">[</font>$<font class="kw">this-&gt;</font>CurrPageGroup<font class="kw">]++;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>_putpages<font class="kw">()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$nb <font class="kw">= </font>$<font class="kw">this-&gt;</font>page<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!empty(</font>$<font class="kw">this-&gt;</font>PageGroups<font class="kw">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// do page number replacement<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">foreach (</font>$<font class="kw">this-&gt;</font>PageGroups <font class="kw">as </font>$k <font class="kw">=&gt; </font>$v<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font>$n <font class="kw">= </font>1<font class="kw">; </font>$n <font class="kw">&lt;= </font>$nb<font class="kw">; </font>$n<font class="kw">++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>pages<font class="kw">[</font>$n<font class="kw">]=</font>str_replace<font class="kw">(</font>$k<font class="kw">, </font>$v<font class="kw">, </font>$<font class="kw">this-&gt;</font>pages<font class="kw">[</font>$n<font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putpages<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'pagegroup.php'</font><font class="kw">);<br><br>class </font>PDF <font class="kw">extends </font>PDF_PageGroup<br><font class="kw">{<br>function </font>Footer<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetY<font class="kw">(-</font>20<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">, </font>6<font class="kw">, </font><font class="str">'Page '</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>GroupPageNo<font class="kw">().</font><font class="str">'/'</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>PageGroupAlias<font class="kw">(), </font>0<font class="kw">, </font>0<font class="kw">, </font><font class="str">'C'</font><font class="kw">);<br>}<br>}<br><br></font>$pdf <font class="kw">= new </font>PDF<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">, </font><font class="str">''</font><font class="kw">, </font>12<font class="kw">);<br><br></font>$pdf<font class="kw">-&gt;</font>StartPageGroup<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>5<font class="kw">, </font><font class="str">'Start of group 1'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>StartPageGroup<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>5<font class="kw">, </font><font class="str">'Start of group 2'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex57.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script57.zip">ZIP</A> | <A HREF="script57.tgz">TGZ</A>
</BODY>
</HTML>

<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>i25 barcodes</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>i25 barcodes</H2>
<H4 CLASS="st">Informations</H4>Author: Matthias Lau<BR>License: Freeware
<H4 CLASS="st">Description</H4>This script implements Interleaved 2 of 5 barcodes. An Interleaved 2 of 5 barcode contains
digits (0 to 9) and encodes the data in the width of both bars and spaces. It is used primarily
in the distribution and warehouse industry.<BR>
<BR>
<TT>i25(<B>float</B> xpos, <B>float</B> ypos, <B>string</B> code [, <B>float</B> basewidth [, <B>float</B> height]])</TT><BR>
<BR>
<TT><U>xpos</U></TT>: abscissa of barcode<BR>
<TT><U>ypos</U></TT>: ordinate of barcode<BR>
<TT><U>code</U></TT>: value of barcode<BR>
<TT><U>basewidth</U></TT>: corresponds to the width of a wide bar (defaults to 1)<BR>
<TT><U>height</U></TT>: bar height (defaults to 10)<BR>
<BR>
Note: if the length of the code is not even, a 0 is preprended.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br></font><font class="cmt">// based on the Code 39 script from The-eh<br></font><font class="kw">class </font>PDF_i25 <font class="kw">extends </font>FPDF<br><font class="kw">{<br>function </font>i25<font class="kw">(</font>$xpos<font class="kw">, </font>$ypos<font class="kw">, </font>$code<font class="kw">, </font>$basewidth<font class="kw">=</font>1<font class="kw">, </font>$height<font class="kw">=</font>10<font class="kw">){<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$wide <font class="kw">= </font>$basewidth<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$narrow <font class="kw">= </font>$basewidth <font class="kw">/ </font>3 <font class="kw">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// wide/narrow codes for the digits<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'0'</font><font class="kw">] = </font><font class="str">'nnwwn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'1'</font><font class="kw">] = </font><font class="str">'wnnnw'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'2'</font><font class="kw">] = </font><font class="str">'nwnnw'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'3'</font><font class="kw">] = </font><font class="str">'wwnnn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'4'</font><font class="kw">] = </font><font class="str">'nnwnw'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'5'</font><font class="kw">] = </font><font class="str">'wnwnn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'6'</font><font class="kw">] = </font><font class="str">'nwwnn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'7'</font><font class="kw">] = </font><font class="str">'nnnww'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'8'</font><font class="kw">] = </font><font class="str">'wnnwn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'9'</font><font class="kw">] = </font><font class="str">'nwnwn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'A'</font><font class="kw">] = </font><font class="str">'nn'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$barChar<font class="kw">[</font><font class="str">'Z'</font><font class="kw">] = </font><font class="str">'wn'</font><font class="kw">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// add leading zero if code-length is odd<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>strlen<font class="kw">(</font>$code<font class="kw">) % </font>2 <font class="kw">!= </font>0<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$code <font class="kw">= </font><font class="str">'0' </font><font class="kw">. </font>$code<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>10<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Text<font class="kw">(</font>$xpos<font class="kw">, </font>$ypos <font class="kw">+ </font>$height <font class="kw">+ </font>4<font class="kw">, </font>$code<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFillColor<font class="kw">(</font>0<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// add start and stop codes<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$code <font class="kw">= </font><font class="str">'AA'</font><font class="kw">.</font>strtolower<font class="kw">(</font>$code<font class="kw">).</font><font class="str">'ZA'</font><font class="kw">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$i<font class="kw">=</font>0<font class="kw">; </font>$i<font class="kw">&lt;</font>strlen<font class="kw">(</font>$code<font class="kw">); </font>$i<font class="kw">=</font>$i<font class="kw">+</font>2<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// choose next pair of digits<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$charBar <font class="kw">= </font>$code<font class="kw">{</font>$i<font class="kw">};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$charSpace <font class="kw">= </font>$code<font class="kw">{</font>$i<font class="kw">+</font>1<font class="kw">};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// check whether it is a valid digit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(!isset(</font>$barChar<font class="kw">[</font>$charBar<font class="kw">])){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Error<font class="kw">(</font><font class="str">'Invalid character in barcode: '</font><font class="kw">.</font>$charBar<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$barChar<font class="kw">[</font>$charSpace<font class="kw">])){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Error<font class="kw">(</font><font class="str">'Invalid character in barcode: '</font><font class="kw">.</font>$charSpace<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// create a wide/narrow-sequence (first digit=bars, second digit=spaces)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$seq <font class="kw">= </font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$s<font class="kw">=</font>0<font class="kw">; </font>$s<font class="kw">&lt;</font>strlen<font class="kw">(</font>$barChar<font class="kw">[</font>$charBar<font class="kw">]); </font>$s<font class="kw">++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$seq <font class="kw">.= </font>$barChar<font class="kw">[</font>$charBar<font class="kw">]{</font>$s<font class="kw">} . </font>$barChar<font class="kw">[</font>$charSpace<font class="kw">]{</font>$s<font class="kw">};<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$bar<font class="kw">=</font>0<font class="kw">; </font>$bar<font class="kw">&lt;</font>strlen<font class="kw">(</font>$seq<font class="kw">); </font>$bar<font class="kw">++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// set lineWidth depending on value<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$seq<font class="kw">{</font>$bar<font class="kw">} == </font><font class="str">'n'</font><font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$lineWidth <font class="kw">= </font>$narrow<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$lineWidth <font class="kw">= </font>$wide<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">// draw every second value, because the second digit of the pair is represented by the spaces<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$bar <font class="kw">% </font>2 <font class="kw">== </font>0<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rect<font class="kw">(</font>$xpos<font class="kw">, </font>$ypos<font class="kw">, </font>$lineWidth<font class="kw">, </font>$height<font class="kw">, </font><font class="str">'F'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$xpos <font class="kw">+= </font>$lineWidth<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br>}<br><br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'i25.php'</font><font class="kw">);<br><br></font>$pdf<font class="kw">=new </font>PDF_i25<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>i25<font class="kw">(</font>90<font class="kw">,</font>40<font class="kw">,</font><font class="str">'12345678'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex67.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script67.zip">ZIP</A> | <A HREF="script67.tgz">TGZ</A>
</BODY>
</HTML>

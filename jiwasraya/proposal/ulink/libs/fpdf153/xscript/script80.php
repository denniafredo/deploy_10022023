<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Clock</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Clock</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:kawa-01'+'&#'+'64;'+'muh.biglobe.ne.jp?subject=Clock">');</SCRIPT>Toshio Onishi<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This script shows how to use the scripts Rotation and Ellipse to draw an analog clock.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'rotation.php'</font><font class="kw">);<br><br>class </font>PDF_Clock <font class="kw">extends </font>PDF_Rotate<br><font class="kw">{<br><br>function </font>hour_scale<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>0.5<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>0<font class="kw">,</font>0<font class="kw">,</font>139<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$i<font class="kw">=</font>0<font class="kw">;</font>$i<font class="kw">&lt;</font>12<font class="kw">;</font>$i<font class="kw">++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>30<font class="kw">*</font>$i<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">+</font>$r<font class="kw">-</font>.5<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">-</font>5<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>min_scale<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>0.3<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>0<font class="kw">,</font>0<font class="kw">,</font>139<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$i<font class="kw">=</font>0<font class="kw">;</font>$i<font class="kw">&lt;</font>60<font class="kw">;</font>$i<font class="kw">++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>6<font class="kw">*</font>$i<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">+</font>$r<font class="kw">-</font>3.6<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">-</font>1.8<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>hour_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$hour<font class="kw">=</font>date<font class="kw">(</font><font class="str">'h'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$min<font class="kw">=</font>date<font class="kw">(</font><font class="str">'i'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$angle<font class="kw">=</font>90<font class="kw">-</font>30<font class="kw">*(</font>$hour<font class="kw">+</font>$min<font class="kw">/</font>60<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>$angle<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>65<font class="kw">,</font>105<font class="kw">,</font>225<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>min_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$min<font class="kw">=</font>date<font class="kw">(</font><font class="str">'i'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$sec<font class="kw">=</font>date<font class="kw">(</font><font class="str">'s'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$angle<font class="kw">=</font>90<font class="kw">-</font>6<font class="kw">*(</font>$min<font class="kw">+</font>$sec<font class="kw">/</font>60<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>$angle<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>0<font class="kw">,</font>255<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>sec_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$sec<font class="kw">=</font>date<font class="kw">(</font><font class="str">'s'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$angle<font class="kw">=</font>90<font class="kw">-</font>6<font class="kw">*</font>$sec<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>$angle<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>255<font class="kw">,</font>0<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>sec_hand2<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$sec<font class="kw">=</font>date<font class="kw">(</font><font class="str">'s'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$angle<font class="kw">=-</font>90<font class="kw">-</font>6<font class="kw">*</font>$sec<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>$angle<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetDrawColor<font class="kw">(</font>255<font class="kw">,</font>0<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Line<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$x<font class="kw">+</font>$r<font class="kw">,</font>$y<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Rotate<font class="kw">(</font>0<font class="kw">);<br>}<br><br>function </font>Clock<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>0.50<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFillColor<font class="kw">(</font>255<font class="kw">,</font>255<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Circle<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">,</font><font class="str">'DF'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>hour_scale<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>min_scale<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$r<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>1.50<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>hour_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>0.6<font class="kw">*</font>$r<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>1.10<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>min_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>0.85<font class="kw">*</font>$r<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>0.30<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>sec_hand<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>0.88<font class="kw">*</font>$r<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetLineWidth<font class="kw">(</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>sec_hand2<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>0.2<font class="kw">*</font>$r<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFillColor<font class="kw">(</font>255<font class="kw">,</font>0<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Circle<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>1.5<font class="kw">,</font><font class="str">'F'</font><font class="kw">);<br>}<br>}<br><br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'clock.php'</font><font class="kw">);<br><br></font>$pdf<font class="kw">=new </font>PDF_Clock<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Clock<font class="kw">(</font>105<font class="kw">,</font>65<font class="kw">,</font>50<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex80.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script80.zip">ZIP</A> | <A HREF="script80.tgz">TGZ</A>
</BODY>
</HTML>

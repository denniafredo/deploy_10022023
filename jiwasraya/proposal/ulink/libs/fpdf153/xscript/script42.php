<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Write HTML</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Write HTML</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:ac.lavoillotte'+'&#'+'64;'+'noos.fr?subject=Write%20HTML">');</SCRIPT>Clément Lavoillotte<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This is an enhancement of the WriteHTML() method from tutorial 6. Supported tags are:<BR>
<BR>
&lt;b> &lt;i> &lt;u> (as well as &lt;strong> and &lt;em>)<BR>
&lt;a href="..."><BR>
&lt;p> &lt;br> (&lt;tr> and &lt;blockquote> treated as &lt;br>)<BR>
&lt;img src="..." width="..." [height="..."]><BR>
&lt;font face="..." color="...">
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="cmt">//HTML2PDF by Clément Lavoillotte<br>//ac.lavoillotte@noos.fr<br>//webmaster@streetpc.tk<br>//http://www.streetpc.tk<br><br></font>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br></font><font class="cmt">//function hex2dec<br>//returns an associative array (keys: R,G,B) from<br>//a hex html code (e.g. #3FE5AA)<br></font><font class="kw">function </font>hex2dec<font class="kw">(</font>$couleur <font class="kw">= </font><font class="str">"#000000"</font><font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$R <font class="kw">= </font>substr<font class="kw">(</font>$couleur<font class="kw">, </font>1<font class="kw">, </font>2<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$rouge <font class="kw">= </font>hexdec<font class="kw">(</font>$R<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$V <font class="kw">= </font>substr<font class="kw">(</font>$couleur<font class="kw">, </font>3<font class="kw">, </font>2<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$vert <font class="kw">= </font>hexdec<font class="kw">(</font>$V<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$B <font class="kw">= </font>substr<font class="kw">(</font>$couleur<font class="kw">, </font>5<font class="kw">, </font>2<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$bleu <font class="kw">= </font>hexdec<font class="kw">(</font>$B<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$tbl_couleur <font class="kw">= array();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$tbl_couleur<font class="kw">[</font><font class="str">'R'</font><font class="kw">]=</font>$rouge<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$tbl_couleur<font class="kw">[</font><font class="str">'G'</font><font class="kw">]=</font>$vert<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$tbl_couleur<font class="kw">[</font><font class="str">'B'</font><font class="kw">]=</font>$bleu<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font>$tbl_couleur<font class="kw">;<br>}<br><br></font><font class="cmt">//conversion pixel -&gt; millimeter in 72 dpi<br></font><font class="kw">function </font>px2mm<font class="kw">(</font>$px<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font>$px<font class="kw">*</font>25.4<font class="kw">/</font>72<font class="kw">;<br>}<br><br>function </font>txtentities<font class="kw">(</font>$html<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$trans <font class="kw">= </font>get_html_translation_table<font class="kw">(</font>HTML_ENTITIES<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$trans <font class="kw">= </font>array_flip<font class="kw">(</font>$trans<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font>strtr<font class="kw">(</font>$html<font class="kw">, </font>$trans<font class="kw">);<br>}<br></font><font class="cmt">////////////////////////////////////<br><br></font><font class="kw">class </font>PDF <font class="kw">extends </font>FPDF<br><font class="kw">{<br></font><font class="cmt">//variables of html parser<br></font><font class="kw">var </font>$B<font class="kw">;<br>var </font>$I<font class="kw">;<br>var </font>$U<font class="kw">;<br>var </font>$HREF<font class="kw">;<br>var </font>$fontList<font class="kw">;<br>var </font>$issetfont<font class="kw">;<br>var </font>$issetcolor<font class="kw">;<br><br>function </font>PDF<font class="kw">(</font>$orientation<font class="kw">=</font><font class="str">'P'</font><font class="kw">,</font>$unit<font class="kw">=</font><font class="str">'mm'</font><font class="kw">,</font>$format<font class="kw">=</font><font class="str">'A4'</font><font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Call parent constructor<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>FPDF<font class="kw">(</font>$orientation<font class="kw">,</font>$unit<font class="kw">,</font>$format<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Initialization<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>B<font class="kw">=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>I<font class="kw">=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>U<font class="kw">=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>HREF<font class="kw">=</font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>fontlist<font class="kw">=array(</font><font class="str">"arial"</font><font class="kw">,</font><font class="str">"times"</font><font class="kw">,</font><font class="str">"courier"</font><font class="kw">,</font><font class="str">"helvetica"</font><font class="kw">,</font><font class="str">"symbol"</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>issetfont<font class="kw">=</font>false<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>issetcolor<font class="kw">=</font>false<font class="kw">;<br>}<br><br></font><font class="cmt">//////////////////////////////////////<br>//html parser<br><br></font><font class="kw">function </font>WriteHTML<font class="kw">(</font>$html<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$html<font class="kw">=</font>strip_tags<font class="kw">(</font>$html<font class="kw">,</font><font class="str">"&lt;b&gt;&lt;u&gt;&lt;i&gt;&lt;a&gt;&lt;img&gt;&lt;p&gt;&lt;br&gt;&lt;strong&gt;&lt;em&gt;&lt;font&gt;&lt;tr&gt;&lt;blockquote&gt;"</font><font class="kw">); </font><font class="cmt">//remove all unsupported tags<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$html<font class="kw">=</font>str_replace<font class="kw">(</font><font class="str">"\n"</font><font class="kw">,</font><font class="str">' '</font><font class="kw">,</font>$html<font class="kw">); </font><font class="cmt">//replace carriage returns by spaces<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$a<font class="kw">=</font>preg_split<font class="kw">(</font><font class="str">'/&lt;(.*)&gt;/U'</font><font class="kw">,</font>$html<font class="kw">,-</font>1<font class="kw">,</font>PREG_SPLIT_DELIM_CAPTURE<font class="kw">); </font><font class="cmt">//explodes the string<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">foreach(</font>$a <font class="kw">as </font>$i<font class="kw">=&gt;</font>$e<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$i<font class="kw">%</font>2<font class="kw">==</font>0<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Text<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$<font class="kw">this-&gt;</font>HREF<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>PutLink<font class="kw">(</font>$<font class="kw">this-&gt;</font>HREF<font class="kw">,</font>$e<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Write<font class="kw">(</font>5<font class="kw">,</font>stripslashes<font class="kw">(</font>txtentities<font class="kw">(</font>$e<font class="kw">)));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Tag<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$e<font class="kw">{</font>0<font class="kw">}==</font><font class="str">'/'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CloseTag<font class="kw">(</font>strtoupper<font class="kw">(</font>substr<font class="kw">(</font>$e<font class="kw">,</font>1<font class="kw">)));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Extract attributes<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$a2<font class="kw">=</font>explode<font class="kw">(</font><font class="str">' '</font><font class="kw">,</font>$e<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$tag<font class="kw">=</font>strtoupper<font class="kw">(</font>array_shift<font class="kw">(</font>$a2<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$attr<font class="kw">=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$a2 <font class="kw">as </font>$v<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>ereg<font class="kw">(</font><font class="str">'^([^=]*)=["\']?([^"\']*)["\']?$'</font><font class="kw">,</font>$v<font class="kw">,</font>$a3<font class="kw">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$attr<font class="kw">[</font>strtoupper<font class="kw">(</font>$a3<font class="kw">[</font>1<font class="kw">])]=</font>$a3<font class="kw">[</font>2<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>OpenTag<font class="kw">(</font>$tag<font class="kw">,</font>$attr<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>function </font>OpenTag<font class="kw">(</font>$tag<font class="kw">,</font>$attr<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Opening tag<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">switch(</font>$tag<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'STRONG'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font><font class="str">'B'</font><font class="kw">,</font>true<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'EM'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font><font class="str">'I'</font><font class="kw">,</font>true<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'B'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'I'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'U'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font>$tag<font class="kw">,</font>true<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'A'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>HREF<font class="kw">=</font>$attr<font class="kw">[</font><font class="str">'HREF'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'IMG'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$attr<font class="kw">[</font><font class="str">'SRC'</font><font class="kw">]) and (isset(</font>$attr<font class="kw">[</font><font class="str">'WIDTH'</font><font class="kw">]) or isset(</font>$attr<font class="kw">[</font><font class="str">'HEIGHT'</font><font class="kw">]))) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$attr<font class="kw">[</font><font class="str">'WIDTH'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$attr<font class="kw">[</font><font class="str">'WIDTH'</font><font class="kw">] = </font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$attr<font class="kw">[</font><font class="str">'HEIGHT'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$attr<font class="kw">[</font><font class="str">'HEIGHT'</font><font class="kw">] = </font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Image<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'SRC'</font><font class="kw">], </font>$<font class="kw">this-&gt;</font>GetX<font class="kw">(), </font>$<font class="kw">this-&gt;</font>GetY<font class="kw">(), </font>px2mm<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'WIDTH'</font><font class="kw">]), </font>px2mm<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'HEIGHT'</font><font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'TR'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'BLOCKQUOTE'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'BR'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Ln<font class="kw">(</font>5<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'P'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Ln<font class="kw">(</font>10<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font class="str">'FONT'</font><font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (isset(</font>$attr<font class="kw">[</font><font class="str">'COLOR'</font><font class="kw">]) and </font>$attr<font class="kw">[</font><font class="str">'COLOR'</font><font class="kw">]!=</font><font class="str">''</font><font class="kw">) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$coul<font class="kw">=</font>hex2dec<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'COLOR'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetTextColor<font class="kw">(</font>$coul<font class="kw">[</font><font class="str">'R'</font><font class="kw">],</font>$coul<font class="kw">[</font><font class="str">'G'</font><font class="kw">],</font>$coul<font class="kw">[</font><font class="str">'B'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>issetcolor<font class="kw">=</font>true<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (isset(</font>$attr<font class="kw">[</font><font class="str">'FACE'</font><font class="kw">]) and </font>in_array<font class="kw">(</font>strtolower<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'FACE'</font><font class="kw">]), </font>$<font class="kw">this-&gt;</font>fontlist<font class="kw">)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font>strtolower<font class="kw">(</font>$attr<font class="kw">[</font><font class="str">'FACE'</font><font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>issetfont<font class="kw">=</font>true<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>function </font>CloseTag<font class="kw">(</font>$tag<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Closing tag<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$tag<font class="kw">==</font><font class="str">'STRONG'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$tag<font class="kw">=</font><font class="str">'B'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$tag<font class="kw">==</font><font class="str">'EM'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$tag<font class="kw">=</font><font class="str">'I'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$tag<font class="kw">==</font><font class="str">'B' </font><font class="kw">or </font>$tag<font class="kw">==</font><font class="str">'I' </font><font class="kw">or </font>$tag<font class="kw">==</font><font class="str">'U'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font>$tag<font class="kw">,</font>false<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$tag<font class="kw">==</font><font class="str">'A'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>HREF<font class="kw">=</font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$tag<font class="kw">==</font><font class="str">'FONT'</font><font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font>$<font class="kw">this-&gt;</font>issetcolor<font class="kw">==</font>true<font class="kw">) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetTextColor<font class="kw">(</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font>$<font class="kw">this-&gt;</font>issetfont<font class="kw">) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">'arial'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>issetfont<font class="kw">=</font>false<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>function </font>SetStyle<font class="kw">(</font>$tag<font class="kw">,</font>$enable<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Modify style and select corresponding font<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>$tag<font class="kw">+=(</font>$enable <font class="kw">? </font>1 <font class="kw">: -</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$style<font class="kw">=</font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(array(</font><font class="str">'B'</font><font class="kw">,</font><font class="str">'I'</font><font class="kw">,</font><font class="str">'U'</font><font class="kw">) as </font>$s<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$<font class="kw">this-&gt;</font>$s<font class="kw">&gt;</font>0<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$style<font class="kw">.=</font>$s<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font>$style<font class="kw">);<br>}<br><br>function </font>PutLink<font class="kw">(</font>$URL<font class="kw">,</font>$txt<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Put a hyperlink<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetTextColor<font class="kw">(</font>0<font class="kw">,</font>0<font class="kw">,</font>255<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font><font class="str">'U'</font><font class="kw">,</font>true<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Write<font class="kw">(</font>5<font class="kw">,</font>$txt<font class="kw">,</font>$URL<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetStyle<font class="kw">(</font><font class="str">'U'</font><font class="kw">,</font>false<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetTextColor<font class="kw">(</font>0<font class="kw">);<br>}<br><br>}</font><font class="cmt">//end of class<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4>This example allows to enter some HTML code in a form and generate the corresponding PDF:<BR>
<BR>
<TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="cmt">//HTML2PDF by Clément Lavoillotte<br><br></font><font class="kw">include_once(</font><font class="str">'html2pdf.php'</font><font class="kw">);<br><br>if(isset(</font>$html<font class="kw">))<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">=new </font>PDF<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Open<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetCreator<font class="kw">(</font><font class="str">"HTML2PDF"</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetTitle<font class="kw">(</font>$title<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetSubject<font class="kw">(</font>$subject<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetAuthor<font class="kw">(</font>$author<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>12<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>ini_get<font class="kw">(</font><font class="str">'magic_quotes_gpc'</font><font class="kw">)==</font><font class="str">'1'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$html<font class="kw">=</font>stripslashes<font class="kw">(</font>$html<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>WriteHTML<font class="kw">(</font>$html<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//save and redirect<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">(</font><font class="str">'test.pdf'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>header<font class="kw">(</font><font class="str">'Location: test.pdf'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;exit;<br>}<br></font>?&gt;<br>&lt;html&gt;&lt;head&gt;&lt;title&gt;HTML2PDF&lt;/title&gt;<br>&lt;style&gt;<br>INPUT,TEXTAREA,SELECT {<br>&nbsp;&nbsp;&nbsp;&nbsp;font-family: lucida console;<br>&nbsp;&nbsp;&nbsp;&nbsp;font-size: 8pt;<br>&nbsp;&nbsp;&nbsp;&nbsp;border: 1px solid #E0E0E0;<br>&nbsp;&nbsp;&nbsp;&nbsp;background-color: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-FACE-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-HIGHLIGHT-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-SHADOW-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-3DLIGHT-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-DARKSHADOW-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-ARROW-COLOR: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-TRACK-COLOR: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-BASE-COLOR: #F0F0F0;<br>}<br>BODY {<br>&nbsp;&nbsp;&nbsp;&nbsp;font-family: lucida console;<br>&nbsp;&nbsp;&nbsp;&nbsp;font-size: 8pt;<br>&nbsp;&nbsp;&nbsp;&nbsp;background-color: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-FACE-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-HIGHLIGHT-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-SHADOW-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-3DLIGHT-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-DARKSHADOW-COLOR: #b9b9b9;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-ARROW-COLOR: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-TRACK-COLOR: #F0F0F0;<br>&nbsp;&nbsp;&nbsp;&nbsp;SCROLLBAR-BASE-COLOR: #F0F0F0;<br>}<br>&lt;/style&gt;<br>&lt;/head&gt;&lt;body&gt;<br>&lt;h1&gt;HTML2PDF&lt;/h1&gt;<br>&lt;div style="border: 1px solid black;"&gt;<br>Supported tags are the following:<br>&lt;ul type="square"&gt;<br>&lt;li&gt;&amp;lt;br&amp;gt; and &amp;lt;p&amp;gt;&lt;/li&gt;<br>&lt;li&gt;&amp;lt;b&amp;gt;, &amp;lt;i&amp;gt; and &amp;lt;u&amp;gt;&lt;/li&gt;<br>&lt;li&gt;&amp;lt;img&amp;gt; (src and width (or height) are mandatory)&lt;/li&gt;<br>&lt;li&gt;&amp;lt;a&amp;gt; (href is mandatory)&lt;/li&gt;<br>&lt;li&gt;&amp;lt;font&amp;gt;: possible attributes are<br>&lt;ul&gt;&lt;li&gt;color: hex color code&lt;/li&gt;<br>&lt;li&gt;face: available fonts are: arial, times, courier, helvetica, symbol&lt;/li&gt;&lt;/ul&gt;<br>&lt;/li&gt;&lt;/ul&gt;<br>To display these tags without interpreting them, use &amp;amp;lt; and &amp;amp;gt;&lt;/div&gt;<br>&lt;form name="pdfgen" method="post" action="&lt;?php <font class="kw">echo </font>$PHP_SELF<font class="kw">; </font>?&gt;" target="_blank"&gt;<br>Title :&lt;input type="text" maxlength="30" name="title"&gt;&lt;br&gt;<br>Subject :&lt;input type="text" maxlength="30" name="subject"&gt;&lt;br&gt;<br>Author :&lt;input type="text" maxlength="30" name="author"&gt;&lt;br&gt;<br>Content:&lt;br&gt;<br>&lt;textarea name="html" cols="50" rows="15"&gt;&lt;/textarea&gt;&lt;br&gt;<br>&lt;input type="submit" value="Generate PDF"&gt;<br>&lt;/form&gt;<br>&lt;/body&gt;&lt;/html&gt;</font>
</code></NOBR></TD></TR></TABLE>
<BR>
With this code:<BR>
<BR>
<TT>
&lt;font face="times">The &lt;/font>&lt;b>&lt;font color="#7070D0">FPDF&lt;/font>&lt;/b>&lt;font face="times"> logo:&lt;/font><BR>
&lt;br>&lt;br><BR>
&lt;img src="logo.png" width="104">
</TT>
<BR>
<BR>
you get this <A HREF="ex42.pdf" TARGET="_blank">result</A>.
<H4 CLASS="st">Download</H4><A HREF="script42.zip">ZIP</A> | <A HREF="script42.tgz">TGZ</A>
</BODY>
</HTML>

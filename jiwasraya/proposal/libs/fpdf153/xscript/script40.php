<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Dynamic form with JavaScript</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Dynamic form with JavaScript</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:denisvannuffelen'+'&#'+'64;'+'hotmail.com?subject=Dynamic%20form%20with%20JavaScript">');</SCRIPT>Denis Van Nuffelen<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This script allows to generate forms dynamically when the document opens by the means of some
JavaScript code (it requires the <A HREF="http://www.fpdf.org/?go=script&id=36" TARGET="_blank">JavaScript support</A> extension).<BR>
<BR>
<B>Caution</B>: the generated PDF works only with Acrobat Reader 5.1.<BR>
<BR>
It is possible to create text fields, combo boxes, check boxes and buttons. Fields are
created at the current position and are given a name. This name allows to manipulate them
via JavaScript in order to perform some validation for instance.<BR>
Upon field creation, an associative array can be passed to set a number of properties, among
which:<BR>
<BR>
<TT>TextColor</TT> (black by default)<BR>
<TT>FillColor</TT> (transparent by default)<BR>
<TT>BorderColor</TT> (transparent by default)<BR>
<TT>BorderStyle</TT> (<TT>solid</TT>, <TT>dashed</TT>, <TT>beveled</TT>, <TT>inset</TT> or <TT>underline</TT>; <TT>solid</TT> by default)<BR>
<BR>
Colors can be chosen in the following list (case sensitive):<BR>
<BR>
<TT>black</TT> <TT>white</TT> <TT>red</TT> <TT>green</TT> <TT>blue</TT> <TT>cyan</TT> <TT>magenta</TT> <TT>yellow</TT> <TT>dkGray</TT> <TT>gray</TT> <TT>ltGray</TT><BR>
<BR>
or be in the form <TT>#RRGGBB</TT>.<BR>
<BR>
Methods to create fields are the following:<BR>
<BR>
<TT>TextField(<B>string</B> name, <B>float</B> w, <B>float</B> h [, <B>array</B> prop])</TT><BR>
<BR>
<TT><U>name</U></TT>: field name.<BR>
<TT><U>w</U></TT>: width.<BR>
<TT><U>h</U></TT>: height.<BR>
<TT><U>prop</U></TT>: properties. The <TT>value</TT> property allows to set the initial value.
The <TT>multiline</TT> property allows to define the field as multiline.<BR>
<BR>
<TT>ComboBox(<B>string</B> name, <B>float</B> w, <B>float</B> h, <B>array</B> values [, <B>array</B> prop])</TT><BR>
<BR>
<TT><U>name</U></TT>: combobox name.<BR>
<TT><U>w</U></TT>: width.<BR>
<TT><U>h</U></TT>: height.<BR>
<TT><U>values</U></TT>: array containing the list of values.<BR>
<TT><U>prop</U></TT>: properties.<BR>
<BR>
<TT>CheckBox(<B>string</B> name, <B>float</B> w [, <B>boolean</B> checked [, <B>array</B> prop]])</TT><BR>
<BR>
<TT><U>name</U></TT>: checkbox name.<BR>
<TT><U>w</U></TT>: width.<BR>
<TT><U>checked</U></TT>: boolean defining the initial state (<TT>false</TT> by default).<BR>
<TT><U>prop</U></TT>: properties.<BR>
<BR>
<TT>Button(<B>string</B> name, <B>float</B> w, <B>float</B> h, <B>string</B> caption, <B>string</B> action [, <B>array</B> prop])</TT><BR>
<BR>
<TT><U>name</U></TT>: button name.<BR>
<TT><U>w</U></TT>: width.<BR>
<TT><U>h</U></TT>: height.<BR>
<TT><U>caption</U></TT>: caption.<BR>
<TT><U>action</U></TT>: action triggered by the button (JavaScript code).<BR>
<TT><U>prop</U></TT>: properties.<BR>
<BR>
The JavaScript is being generated and added to the <TT>script</TT> property of the objet each
time you call one of these methods.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf_js.php'</font><font class="kw">);<br><br>class </font>JS_Form <font class="kw">extends </font>PDF_Javascript<br><font class="kw">{<br>var </font>$script<font class="kw">=</font><font class="str">''</font><font class="kw">;<br><br>function </font>_JScolor<font class="kw">(</font>$color<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;static </font>$aColors<font class="kw">=array(</font><font class="str">'transparent'</font><font class="kw">,</font><font class="str">'black'</font><font class="kw">,</font><font class="str">'white'</font><font class="kw">,</font><font class="str">'red'</font><font class="kw">,</font><font class="str">'green'</font><font class="kw">,</font><font class="str">'blue'</font><font class="kw">,</font><font class="str">'cyan'</font><font class="kw">,</font><font class="str">'magenta'</font><font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="str">'yellow'</font><font class="kw">,</font><font class="str">'dkGray'</font><font class="kw">,</font><font class="str">'gray'</font><font class="kw">,</font><font class="str">'ltGray'</font><font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>substr<font class="kw">(</font>$color<font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">)==</font><font class="str">'#'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font>sprintf<font class="kw">(</font><font class="str">"['RGB',%.3f,%.3f,%.3f]"</font><font class="kw">, </font>hexdec<font class="kw">(</font>substr<font class="kw">(</font>$color<font class="kw">,</font>1<font class="kw">,</font>2<font class="kw">))/</font>255<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>hexdec<font class="kw">(</font>substr<font class="kw">(</font>$color<font class="kw">,</font>3<font class="kw">,</font>2<font class="kw">))/</font>255<font class="kw">, </font>hexdec<font class="kw">(</font>substr<font class="kw">(</font>$color<font class="kw">,</font>5<font class="kw">,</font>2<font class="kw">))/</font>255<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!</font>in_array<font class="kw">(</font>$color<font class="kw">,</font>$aColors<font class="kw">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Error<font class="kw">(</font><font class="str">'Invalid color: '</font><font class="kw">.</font>$color<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font><font class="str">'color.'</font><font class="kw">.</font>$color<font class="kw">;<br>}<br><br>function </font>_addfield<font class="kw">(</font>$type<font class="kw">,</font>$name<font class="kw">,</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$prop<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$k<font class="kw">=</font>$<font class="kw">this-&gt;</font>k<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font>sprintf<font class="kw">(</font><font class="str">"f=addField('%s','%s',%d,[%.2f,%.2f,%.2f,%.2f]);"</font><font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$name<font class="kw">,</font>$type<font class="kw">,</font>$<font class="kw">this-&gt;</font>PageNo<font class="kw">()-</font>1<font class="kw">,</font>$x<font class="kw">*</font>$k<font class="kw">,(</font>$<font class="kw">this-&gt;</font>h<font class="kw">-</font>$y<font class="kw">)*</font>$k<font class="kw">+</font>1<font class="kw">,(</font>$x<font class="kw">+</font>$w<font class="kw">)*</font>$k<font class="kw">,(</font>$<font class="kw">this-&gt;</font>h<font class="kw">-</font>$y<font class="kw">-</font>$h<font class="kw">)*</font>$k<font class="kw">+</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.textSize='</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>FontSizePt<font class="kw">.</font><font class="str">';'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'value'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">"f.value='"</font><font class="kw">.</font>addslashes<font class="kw">(</font>$prop<font class="kw">[</font><font class="str">'value'</font><font class="kw">]).</font><font class="str">"';"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'TextColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.textColor='</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>_JScolor<font class="kw">(</font>$prop<font class="kw">[</font><font class="str">'TextColor'</font><font class="kw">]).</font><font class="str">';'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'FillColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.fillColor='</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>_JScolor<font class="kw">(</font>$prop<font class="kw">[</font><font class="str">'FillColor'</font><font class="kw">]).</font><font class="str">';'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.strokeColor='</font><font class="kw">.</font>$<font class="kw">this-&gt;</font>_JScolor<font class="kw">(</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]).</font><font class="str">';'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'BorderStyle'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">"f.borderStyle='"</font><font class="kw">.</font>$prop<font class="kw">[</font><font class="str">'BorderStyle'</font><font class="kw">].</font><font class="str">"';"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>x<font class="kw">+=</font>$w<font class="kw">;<br>}<br><br>function </font>TextField<font class="kw">(</font>$name<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$prop<font class="kw">=array())<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_addfield<font class="kw">(</font><font class="str">'text'</font><font class="kw">,</font>$name<font class="kw">,</font>$<font class="kw">this-&gt;</font>x<font class="kw">,</font>$<font class="kw">this-&gt;</font>y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$prop<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(isset(</font>$prop<font class="kw">[</font><font class="str">'multiline'</font><font class="kw">]) and </font>$prop<font class="kw">[</font><font class="str">'multiline'</font><font class="kw">])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.multiline=true;'</font><font class="kw">;<br>}<br><br>function </font>ComboBox<font class="kw">(</font>$name<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$values<font class="kw">,</font>$prop<font class="kw">=array())<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_addfield<font class="kw">(</font><font class="str">'combobox'</font><font class="kw">,</font>$name<font class="kw">,</font>$<font class="kw">this-&gt;</font>x<font class="kw">,</font>$<font class="kw">this-&gt;</font>y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$prop<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$s<font class="kw">=</font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$values <font class="kw">as </font>$value<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$s<font class="kw">.=</font><font class="str">"'"</font><font class="kw">.</font>addslashes<font class="kw">(</font>$value<font class="kw">).</font><font class="str">"',"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.setItems(['</font><font class="kw">.</font>substr<font class="kw">(</font>$s<font class="kw">,</font>0<font class="kw">,-</font>1<font class="kw">).</font><font class="str">']);'</font><font class="kw">;<br>}<br><br>function </font>CheckBox<font class="kw">(</font>$name<font class="kw">,</font>$w<font class="kw">,</font>$checked<font class="kw">=</font>false<font class="kw">,</font>$prop<font class="kw">=array())<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'value'</font><font class="kw">]=(</font>$checked <font class="kw">? </font><font class="str">'Yes' </font><font class="kw">: </font><font class="str">'Off'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]=</font><font class="str">'black'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_addfield<font class="kw">(</font><font class="str">'checkbox'</font><font class="kw">,</font>$name<font class="kw">,</font>$<font class="kw">this-&gt;</font>x<font class="kw">,</font>$<font class="kw">this-&gt;</font>y<font class="kw">,</font>$w<font class="kw">,</font>$w<font class="kw">,</font>$prop<font class="kw">);<br>}<br><br>function </font>Button<font class="kw">(</font>$name<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$caption<font class="kw">,</font>$action<font class="kw">,</font>$prop<font class="kw">=array())<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'BorderColor'</font><font class="kw">]=</font><font class="str">'black'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'BorderStyle'</font><font class="kw">]=</font><font class="str">'beveled'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_addfield<font class="kw">(</font><font class="str">'button'</font><font class="kw">,</font>$name<font class="kw">,</font>$<font class="kw">this-&gt;</font>x<font class="kw">,</font>$<font class="kw">this-&gt;</font>y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$prop<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">"f.buttonSetCaption('"</font><font class="kw">.</font>addslashes<font class="kw">(</font>$caption<font class="kw">).</font><font class="str">"');"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">"f.setAction('MouseUp','"</font><font class="kw">.</font>addslashes<font class="kw">(</font>$action<font class="kw">).</font><font class="str">"');"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">"f.highlight='push';"</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>script<font class="kw">.=</font><font class="str">'f.print=false;'</font><font class="kw">;<br>}<br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4>Here is an example which creates a form with the different possible field types. When one
clicks on the button, the mandatory fields are checked, and, if validation passes, the page
is printed.<BR>
<BR>
<TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'js_form.php'</font><font class="kw">);<br><br></font>$pdf<font class="kw">=new </font>JS_Form<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Open<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br><br></font><font class="cmt">//Title<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">'U'</font><font class="kw">,</font>16<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Subscription form'</font><font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font><font class="str">'C'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>10<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>12<font class="kw">);<br></font><font class="cmt">//First name<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'First name:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>TextField<font class="kw">(</font><font class="str">'firstname'</font><font class="kw">,</font>50<font class="kw">,</font>5<font class="kw">,array(</font><font class="str">'BorderColor'</font><font class="kw">=&gt;</font><font class="str">'ltGray'</font><font class="kw">));<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>6<font class="kw">);<br></font><font class="cmt">//Last name<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Last name:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>TextField<font class="kw">(</font><font class="str">'lastname'</font><font class="kw">,</font>50<font class="kw">,</font>5<font class="kw">,array(</font><font class="str">'BorderColor'</font><font class="kw">=&gt;</font><font class="str">'ltGray'</font><font class="kw">));<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>6<font class="kw">);<br></font><font class="cmt">//Gender<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Gender:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>ComboBox<font class="kw">(</font><font class="str">'gender'</font><font class="kw">,</font>10<font class="kw">,</font>5<font class="kw">,array(</font><font class="str">''</font><font class="kw">,</font><font class="str">'M'</font><font class="kw">,</font><font class="str">'F'</font><font class="kw">),array(</font><font class="str">'BorderColor'</font><font class="kw">=&gt;</font><font class="str">'ltGray'</font><font class="kw">));<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>6<font class="kw">);<br></font><font class="cmt">//Adress<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Address:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>TextField<font class="kw">(</font><font class="str">'address'</font><font class="kw">,</font>60<font class="kw">,</font>18<font class="kw">,array(</font><font class="str">'multiline'</font><font class="kw">=&gt;</font>true<font class="kw">,</font><font class="str">'BorderColor'</font><font class="kw">=&gt;</font><font class="str">'ltGray'</font><font class="kw">));<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>19<font class="kw">);<br></font><font class="cmt">//E-mail<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'E-mail:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>TextField<font class="kw">(</font><font class="str">'email'</font><font class="kw">,</font>50<font class="kw">,</font>5<font class="kw">,array(</font><font class="str">'BorderColor'</font><font class="kw">=&gt;</font><font class="str">'ltGray'</font><font class="kw">));<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>6<font class="kw">);<br></font><font class="cmt">//Newsletter<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Receive our'</font><font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>35<font class="kw">,</font>5<font class="kw">,</font><font class="str">'newsletter:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>CheckBox<font class="kw">(</font><font class="str">'newsletter'</font><font class="kw">,</font>5<font class="kw">,</font>true<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>10<font class="kw">);<br></font><font class="cmt">//Date of the day (determined and formatted by JS)<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>5<font class="kw">,</font><font class="str">'Date: '</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>TextField<font class="kw">(</font><font class="str">'date'</font><font class="kw">,</font>30<font class="kw">,</font>5<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>script<font class="kw">.=</font><font class="str">"getField('date').value=util.printd('dd/mm/yyyy',new Date());"</font><font class="kw">;<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>5<font class="kw">,</font><font class="str">'Signature:'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">(</font>3<font class="kw">);<br></font><font class="cmt">//Button to validate and print<br></font>$pdf<font class="kw">-&gt;</font>SetX<font class="kw">(</font>95<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Button<font class="kw">(</font><font class="str">'print'</font><font class="kw">,</font>20<font class="kw">,</font>8<font class="kw">,</font><font class="str">'Print'</font><font class="kw">,</font><font class="str">'Print()'</font><font class="kw">,array(</font><font class="str">'TextColor'</font><font class="kw">=&gt;</font><font class="str">'yellow'</font><font class="kw">,</font><font class="str">'FillColor'</font><font class="kw">=&gt;</font><font class="str">'#FF5050'</font><font class="kw">));<br><br></font><font class="cmt">//Form validation functions<br></font>$pdf<font class="kw">-&gt;</font>script<font class="kw">.=</font><font class="str">"<br>function CheckField(name,message)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;f=getField(name);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(f.value=='')<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.alert(message);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.setFocus();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>}<br><br>function Print()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;//Validation<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!CheckField('firstname','First name is mandatory'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!CheckField('lastname','Last name is mandatory'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!CheckField('gender','Gender is mandatory'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!CheckField('address','Address is mandatory'))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;//Print<br>&nbsp;&nbsp;&nbsp;&nbsp;print();<br>}<br>"</font><font class="kw">;<br><br></font><font class="cmt">//We include all the generated JavaScript code into the PDF<br></font>$pdf<font class="kw">-&gt;</font>IncludeJS<font class="kw">(</font>$pdf<font class="kw">-&gt;</font>script<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex40.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script40.zip">ZIP</A> | <A HREF="script40.tgz">TGZ</A>
</BODY>
</HTML>

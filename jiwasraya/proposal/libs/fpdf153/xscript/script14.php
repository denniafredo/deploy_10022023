<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Table with MySQL</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Table with MySQL</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:oliver'+'&#'+'64;'+'fpdf.org?subject=Table%20with%20MySQL">');</SCRIPT>Olivier<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This class allows to output a table whose content comes from a MySQL query. The table header is
automatically printed on top of each page. The method to add a column is:<BR>
<BR>
<TT>function AddCol([<B>mixed</B> field [, <B>mixed</B> width [, <B>string</B> caption [, <B>string</B> align]]]])</TT><BR>
<BR>
<TT><U>field</U></TT>: field of the SQL query (either name or index). If -1, the column will represent
the field in the same position in the query (default value).<BR>
<BR>
<TT><U>width</U></TT>: width of the column. It can be a number giving the absolute value, or a string
of the form x% to request a percentage of the table width. If -1, the width equals the table
width divided by the number of columns (default value).<BR>
<BR>
<TT><U>caption</U></TT>: caption of the column. If empty, the capitalized name of the field will
be used (default value).<BR>
<BR>
<TT><U>align</U></TT>: alignment of the column content. Possible values are <TT>L</TT>, <TT>C</TT> and
<TT>R</TT> (default is <TT>L</TT>).<BR>
<BR>
To output the table:<BR>
<BR>
<TT>function Table(<B>string</B> query [, <B>array</B> prop])</TT><BR>
<BR>
<TT><U>query</U></TT>: the SQL query.<BR>
<BR>
<TT><U>prop</U></TT>: associative array containing the table properties. Possible keys are:<BR>
<BR>
<DIV STYLE="margin-left:15px">
<TT>width</TT>: width of the table. Useful if you specify column widths by percentage. The
default value is the page width without the margins.<BR>
<TT>align</TT>: alignment of the table in the page. Possible values are <TT>L</TT>, <TT>C</TT>
and <TT>R</TT> (default is <TT>C</TT>).<BR>
<TT>padding</TT>: left and right margins used inside cells. Default value is 1mm.<BR>
<TT>HeaderColor</TT>: background color for the table header (array of the three RGB components).<BR>
<TT>color1</TT>: background color for odd rows.<BR>
<TT>color2</TT>: background color for even rows.<BR>
</DIV>
<BR>
If no column has been defined when <TT>Table()</TT> is called, columns corresponding to all the
fields of the query are added automatically.<BR>
After the output of the table, all column definitions are cleared.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br>class </font>PDF_MySQL_Table <font class="kw">extends </font>FPDF<br><font class="kw">{<br>var </font>$ProcessingTable<font class="kw">=</font>false<font class="kw">;<br>var </font>$aCols<font class="kw">=array();<br>var </font>$TableX<font class="kw">;<br>var </font>$HeaderColor<font class="kw">;<br>var </font>$RowColors<font class="kw">;<br>var </font>$ColorIndex<font class="kw">;<br><br>function </font>Header<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Print the table header if necessary<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$<font class="kw">this-&gt;</font>ProcessingTable<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>TableHeader<font class="kw">();<br>}<br><br>function </font>TableHeader<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">,</font>12<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetX<font class="kw">(</font>$<font class="kw">this-&gt;</font>TableX<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$fill<font class="kw">=!empty(</font>$<font class="kw">this-&gt;</font>HeaderColor<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$fill<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFillColor<font class="kw">(</font>$<font class="kw">this-&gt;</font>HeaderColor<font class="kw">[</font>0<font class="kw">],</font>$<font class="kw">this-&gt;</font>HeaderColor<font class="kw">[</font>1<font class="kw">],</font>$<font class="kw">this-&gt;</font>HeaderColor<font class="kw">[</font>2<font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$<font class="kw">this-&gt;</font>aCols <font class="kw">as </font>$col<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Cell<font class="kw">(</font>$col<font class="kw">[</font><font class="str">'w'</font><font class="kw">],</font>6<font class="kw">,</font>$col<font class="kw">[</font><font class="str">'c'</font><font class="kw">],</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'C'</font><font class="kw">,</font>$fill<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Ln<font class="kw">();<br>}<br><br>function </font>Row<font class="kw">(</font>$data<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetX<font class="kw">(</font>$<font class="kw">this-&gt;</font>TableX<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$ci<font class="kw">=</font>$<font class="kw">this-&gt;</font>ColorIndex<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$fill<font class="kw">=!empty(</font>$<font class="kw">this-&gt;</font>RowColors<font class="kw">[</font>$ci<font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$fill<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFillColor<font class="kw">(</font>$<font class="kw">this-&gt;</font>RowColors<font class="kw">[</font>$ci<font class="kw">][</font>0<font class="kw">],</font>$<font class="kw">this-&gt;</font>RowColors<font class="kw">[</font>$ci<font class="kw">][</font>1<font class="kw">],</font>$<font class="kw">this-&gt;</font>RowColors<font class="kw">[</font>$ci<font class="kw">][</font>2<font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$<font class="kw">this-&gt;</font>aCols <font class="kw">as </font>$col<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Cell<font class="kw">(</font>$col<font class="kw">[</font><font class="str">'w'</font><font class="kw">],</font>5<font class="kw">,</font>$data<font class="kw">[</font>$col<font class="kw">[</font><font class="str">'f'</font><font class="kw">]],</font>1<font class="kw">,</font>0<font class="kw">,</font>$col<font class="kw">[</font><font class="str">'a'</font><font class="kw">],</font>$fill<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Ln<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>ColorIndex<font class="kw">=</font>1<font class="kw">-</font>$ci<font class="kw">;<br>}<br><br>function </font>CalcWidths<font class="kw">(</font>$width<font class="kw">,</font>$align<font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Compute the widths of the columns<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$TableWidth<font class="kw">=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$<font class="kw">this-&gt;</font>aCols <font class="kw">as </font>$i<font class="kw">=&gt;</font>$col<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$w<font class="kw">=</font>$col<font class="kw">[</font><font class="str">'w'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$w<font class="kw">==-</font>1<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$w<font class="kw">=</font>$width<font class="kw">/</font>count<font class="kw">(</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>substr<font class="kw">(</font>$w<font class="kw">,-</font>1<font class="kw">)==</font><font class="str">'%'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$w<font class="kw">=</font>$w<font class="kw">/</font>100<font class="kw">*</font>$width<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'w'</font><font class="kw">]=</font>$w<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$TableWidth<font class="kw">+=</font>$w<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Compute the abscissa of the table<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$align<font class="kw">==</font><font class="str">'C'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>TableX<font class="kw">=</font>max<font class="kw">((</font>$<font class="kw">this-&gt;</font>w<font class="kw">-</font>$TableWidth<font class="kw">)/</font>2<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$align<font class="kw">==</font><font class="str">'R'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>TableX<font class="kw">=</font>max<font class="kw">(</font>$<font class="kw">this-&gt;</font>w<font class="kw">-</font>$<font class="kw">this-&gt;</font>rMargin<font class="kw">-</font>$TableWidth<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>TableX<font class="kw">=</font>$<font class="kw">this-&gt;</font>lMargin<font class="kw">;<br>}<br><br>function </font>AddCol<font class="kw">(</font>$field<font class="kw">=-</font>1<font class="kw">,</font>$width<font class="kw">=-</font>1<font class="kw">,</font>$caption<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$align<font class="kw">=</font><font class="str">'L'</font><font class="kw">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Add a column to the table<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$field<font class="kw">==-</font>1<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$field<font class="kw">=</font>count<font class="kw">(</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">[]=array(</font><font class="str">'f'</font><font class="kw">=&gt;</font>$field<font class="kw">,</font><font class="str">'c'</font><font class="kw">=&gt;</font>$caption<font class="kw">,</font><font class="str">'w'</font><font class="kw">=&gt;</font>$width<font class="kw">,</font><font class="str">'a'</font><font class="kw">=&gt;</font>$align<font class="kw">);<br>}<br><br>function </font>Table<font class="kw">(</font>$query<font class="kw">,</font>$prop<font class="kw">=array())<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Issue query<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$res<font class="kw">=</font>mysql_query<font class="kw">(</font>$query<font class="kw">) or die(</font><font class="str">'Error: '</font><font class="kw">.</font>mysql_error<font class="kw">().</font><font class="str">"&lt;BR&gt;Query: $query"</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Add all columns if none was specified<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>count<font class="kw">(</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">)==</font>0<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$nb<font class="kw">=</font>mysql_num_fields<font class="kw">(</font>$res<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$i<font class="kw">=</font>0<font class="kw">;</font>$i<font class="kw">&lt;</font>$nb<font class="kw">;</font>$i<font class="kw">++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>AddCol<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Retrieve column names when not specified<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">foreach(</font>$<font class="kw">this-&gt;</font>aCols <font class="kw">as </font>$i<font class="kw">=&gt;</font>$col<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$col<font class="kw">[</font><font class="str">'c'</font><font class="kw">]==</font><font class="str">''</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>is_string<font class="kw">(</font>$col<font class="kw">[</font><font class="str">'f'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'c'</font><font class="kw">]=</font>ucfirst<font class="kw">(</font>$col<font class="kw">[</font><font class="str">'f'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'c'</font><font class="kw">]=</font>ucfirst<font class="kw">(</font>mysql_field_name<font class="kw">(</font>$res<font class="kw">,</font>$col<font class="kw">[</font><font class="str">'f'</font><font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Handle properties<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(!isset(</font>$prop<font class="kw">[</font><font class="str">'width'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'width'</font><font class="kw">]=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$prop<font class="kw">[</font><font class="str">'width'</font><font class="kw">]==</font>0<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'width'</font><font class="kw">]=</font>$<font class="kw">this-&gt;</font>w<font class="kw">-</font>$<font class="kw">this-&gt;</font>lMargin<font class="kw">-</font>$<font class="kw">this-&gt;</font>rMargin<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'align'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'align'</font><font class="kw">]=</font><font class="str">'C'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'padding'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'padding'</font><font class="kw">]=</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$cMargin<font class="kw">=</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">=</font>$prop<font class="kw">[</font><font class="str">'padding'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'HeaderColor'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'HeaderColor'</font><font class="kw">]=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>HeaderColor<font class="kw">=</font>$prop<font class="kw">[</font><font class="str">'HeaderColor'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'color1'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'color1'</font><font class="kw">]=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$prop<font class="kw">[</font><font class="str">'color2'</font><font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$prop<font class="kw">[</font><font class="str">'color2'</font><font class="kw">]=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>RowColors<font class="kw">=array(</font>$prop<font class="kw">[</font><font class="str">'color1'</font><font class="kw">],</font>$prop<font class="kw">[</font><font class="str">'color2'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Compute column widths<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CalcWidths<font class="kw">(</font>$prop<font class="kw">[</font><font class="str">'width'</font><font class="kw">],</font>$prop<font class="kw">[</font><font class="str">'align'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Print header<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>TableHeader<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Print rows<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>11<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>ColorIndex<font class="kw">=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>ProcessingTable<font class="kw">=</font>true<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;while(</font>$row<font class="kw">=</font>mysql_fetch_array<font class="kw">(</font>$res<font class="kw">))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Row<font class="kw">(</font>$row<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>ProcessingTable<font class="kw">=</font>false<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">=</font>$cMargin<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>aCols<font class="kw">=array();<br>}<br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4>This example creates two tables. The first one is automatically built from all the fields of
the SQL query. The second one defines 3 columns with specific attributes (caption, alignment,
width) and sets some table properties (colors and padding).<BR>
<BR>
<TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'mysql_table.php'</font><font class="kw">);<br><br>class </font>PDF <font class="kw">extends </font>PDF_MySQL_Table<br><font class="kw">{<br>function </font>Header<font class="kw">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Title<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>18<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>6<font class="kw">,</font><font class="str">'World populations'</font><font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font><font class="str">'C'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Ln<font class="kw">(</font>10<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Ensure table header is output<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>Header<font class="kw">();<br>}<br>}<br><br></font><font class="cmt">//Connect to database<br></font>mysql_connect<font class="kw">(</font><font class="str">'server'</font><font class="kw">,</font><font class="str">'login'</font><font class="kw">,</font><font class="str">'password'</font><font class="kw">);<br></font>mysql_select_db<font class="kw">(</font><font class="str">'db'</font><font class="kw">);<br><br></font>$pdf<font class="kw">=new </font>PDF<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Open<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font><font class="cmt">//First table: put all columns automatically<br></font>$pdf<font class="kw">-&gt;</font>Table<font class="kw">(</font><font class="str">'select * from country order by name'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font><font class="cmt">//Second table: specify 3 columns<br></font>$pdf<font class="kw">-&gt;</font>AddCol<font class="kw">(</font><font class="str">'rank'</font><font class="kw">,</font>20<font class="kw">,</font><font class="str">''</font><font class="kw">,</font><font class="str">'C'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>AddCol<font class="kw">(</font><font class="str">'name'</font><font class="kw">,</font>40<font class="kw">,</font><font class="str">'Country'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>AddCol<font class="kw">(</font><font class="str">'pop'</font><font class="kw">,</font>40<font class="kw">,</font><font class="str">'Pop (2001)'</font><font class="kw">,</font><font class="str">'R'</font><font class="kw">);<br></font>$prop<font class="kw">=array(</font><font class="str">'HeaderColor'</font><font class="kw">=&gt;array(</font>255<font class="kw">,</font>150<font class="kw">,</font>100<font class="kw">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="str">'color1'</font><font class="kw">=&gt;array(</font>210<font class="kw">,</font>245<font class="kw">,</font>255<font class="kw">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="str">'color2'</font><font class="kw">=&gt;array(</font>255<font class="kw">,</font>255<font class="kw">,</font>210<font class="kw">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="str">'padding'</font><font class="kw">=&gt;</font>2<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Table<font class="kw">(</font><font class="str">'select name,format(pop,0) as pop,rank from country order by rank limit 0,10'</font><font class="kw">,</font>$prop<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex14.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script14.zip">ZIP</A> | <A HREF="script14.tgz">TGZ</A>
</BODY>
</HTML>

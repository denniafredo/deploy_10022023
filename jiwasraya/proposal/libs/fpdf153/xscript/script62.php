<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Fit text to cell</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Fit text to cell</H2>
<H4 CLASS="st">Informations</H4>Author: Patrick Benny<BR>License: Freeware
<H4 CLASS="st">Description</H4>This method is an extension of Cell() allowing to output text with either character spacing
or horizontal scaling.<BR>
<BR>
<TT>CellFit(<B>float</B> w [, <B>float</B> h [, <B>string</B> txt [, <B>mixed</B> border [, <B>int</B> ln [, <B>string</B> align [, <B>int</B> fill [, <B>mixed</B> link [, <B>int</B> scale [, <B>int</B> force]]]]]]]]])</TT><BR>
<BR>
The first 8 parameters are the same as Cell(). The additional parameters are:<BR>
<BR>
<TT><U>scale</U></TT><BR>
<BR>
0 = character spacing<BR>
1 = horizontal scaling<BR>
<BR>
<TT><U>force</U></TT><BR>
<BR>
0 = only space/scale if necessary (not when text is short enough to fit)<BR>
1 = always space/scale<BR>
<BR>
The following four methods are also provided for convenience, allowing all combinations of
scale/force, and using only the 8 parameters of Cell():<BR>
<BR>
<TT>CellFitScale()</TT><BR>
<TT>CellFitScaleForce()</TT><BR>
<TT>CellFitSpace()</TT><BR>
<TT>CellFitSpaceForce()</TT>
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br>class </font>FPDF_CellFit <font class="kw">extends </font>FPDF <font class="kw">{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Cell with horizontal scaling if text is too wide<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>CellFit<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">=</font>0<font class="kw">,</font>$txt<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$border<font class="kw">=</font>0<font class="kw">,</font>$ln<font class="kw">=</font>0<font class="kw">,</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$fill<font class="kw">=</font>0<font class="kw">,</font>$link<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$scale<font class="kw">=</font>0<font class="kw">,</font>$force<font class="kw">=</font>1<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Get string width<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$str_width<font class="kw">=</font>$<font class="kw">this-&gt;</font>GetStringWidth<font class="kw">(</font>$txt<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Calculate ratio to fit cell<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(</font>$w<font class="kw">==</font>0<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$w<font class="kw">=</font>$<font class="kw">this-&gt;</font>w<font class="kw">-</font>$<font class="kw">this-&gt;</font>rMargin<font class="kw">-</font>$<font class="kw">this-&gt;</font>x<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$ratio<font class="kw">=(</font>$w<font class="kw">-</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">*</font>2<font class="kw">)/</font>$str_width<font class="kw">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$fit<font class="kw">=(</font>$ratio <font class="kw">&lt; </font>1 <font class="kw">|| (</font>$ratio <font class="kw">&gt; </font>1 <font class="kw">&amp;&amp; </font>$force <font class="kw">== </font>1<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font>$fit<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch (</font>$scale<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Character spacing<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">case </font>0<font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Calculate character spacing in points<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$char_space<font class="kw">=(</font>$w<font class="kw">-</font>$<font class="kw">this-&gt;</font>cMargin<font class="kw">*</font>2<font class="kw">-</font>$str_width<font class="kw">)/</font>max<font class="kw">(</font>$<font class="kw">this-&gt;</font>MBGetStringLength<font class="kw">(</font>$txt<font class="kw">)-</font>1<font class="kw">,</font>1<font class="kw">)*</font>$<font class="kw">this-&gt;</font>k<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Set character spacing<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font>sprintf<font class="kw">(</font><font class="str">'BT %.2f Tc ET'</font><font class="kw">,</font>$char_space<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Horizontal scaling<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">case </font>1<font class="kw">:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Calculate horizontal scaling<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$horiz_scale<font class="kw">=</font>$ratio<font class="kw">*</font>100.0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Set horizontal scaling<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font>sprintf<font class="kw">(</font><font class="str">'BT %.2f Tz ET'</font><font class="kw">,</font>$horiz_scale<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Override user alignment (since text will fill up cell)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Pass on to Cell method<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Cell<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$txt<font class="kw">,</font>$border<font class="kw">,</font>$ln<font class="kw">,</font>$align<font class="kw">,</font>$fill<font class="kw">,</font>$link<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Reset character spacing/horizontal scaling<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if (</font>$fit<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'BT '</font><font class="kw">.(</font>$scale<font class="kw">==</font>0 <font class="kw">? </font><font class="str">'0 Tc' </font><font class="kw">: </font><font class="str">'100 Tz'</font><font class="kw">).</font><font class="str">' ET'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Cell with horizontal scaling only if necessary<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>CellFitScale<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">=</font>0<font class="kw">,</font>$txt<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$border<font class="kw">=</font>0<font class="kw">,</font>$ln<font class="kw">=</font>0<font class="kw">,</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$fill<font class="kw">=</font>0<font class="kw">,</font>$link<font class="kw">=</font><font class="str">''</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CellFit<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$txt<font class="kw">,</font>$border<font class="kw">,</font>$ln<font class="kw">,</font>$align<font class="kw">,</font>$fill<font class="kw">,</font>$link<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Cell with horizontal scaling always<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>CellFitScaleForce<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">=</font>0<font class="kw">,</font>$txt<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$border<font class="kw">=</font>0<font class="kw">,</font>$ln<font class="kw">=</font>0<font class="kw">,</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$fill<font class="kw">=</font>0<font class="kw">,</font>$link<font class="kw">=</font><font class="str">''</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CellFit<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$txt<font class="kw">,</font>$border<font class="kw">,</font>$ln<font class="kw">,</font>$align<font class="kw">,</font>$fill<font class="kw">,</font>$link<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Cell with character spacing only if necessary<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>CellFitSpace<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">=</font>0<font class="kw">,</font>$txt<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$border<font class="kw">=</font>0<font class="kw">,</font>$ln<font class="kw">=</font>0<font class="kw">,</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$fill<font class="kw">=</font>0<font class="kw">,</font>$link<font class="kw">=</font><font class="str">''</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CellFit<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$txt<font class="kw">,</font>$border<font class="kw">,</font>$ln<font class="kw">,</font>$align<font class="kw">,</font>$fill<font class="kw">,</font>$link<font class="kw">,</font>0<font class="kw">,</font>0<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Cell with character spacing always<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>CellFitSpaceForce<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">=</font>0<font class="kw">,</font>$txt<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$border<font class="kw">=</font>0<font class="kw">,</font>$ln<font class="kw">=</font>0<font class="kw">,</font>$align<font class="kw">=</font><font class="str">''</font><font class="kw">,</font>$fill<font class="kw">=</font>0<font class="kw">,</font>$link<font class="kw">=</font><font class="str">''</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Same as calling CellFit directly<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>CellFit<font class="kw">(</font>$w<font class="kw">,</font>$h<font class="kw">,</font>$txt<font class="kw">,</font>$border<font class="kw">,</font>$ln<font class="kw">,</font>$align<font class="kw">,</font>$fill<font class="kw">,</font>$link<font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Patch to also work with CJK double-byte text<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">function </font>MBGetStringLength<font class="kw">(</font>$s<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$<font class="kw">this-&gt;</font>CurrentFont<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font><font class="str">'Type0'</font><font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$len <font class="kw">= </font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$nbbytes <font class="kw">= </font>strlen<font class="kw">(</font>$s<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font>$i <font class="kw">= </font>0<font class="kw">; </font>$i <font class="kw">&lt; </font>$nbbytes<font class="kw">; </font>$i<font class="kw">++)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font>ord<font class="kw">(</font>$s<font class="kw">[</font>$i<font class="kw">])&lt;</font>128<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$len<font class="kw">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$len<font class="kw">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$i<font class="kw">++;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font>$len<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return </font>strlen<font class="kw">(</font>$s<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'cellfit.php'</font><font class="kw">);<br><br></font>$txt_short<font class="kw">=</font><font class="str">'This text is short enough.'</font><font class="kw">;<br></font>$txt_long<font class="kw">=</font><font class="str">'This text is way too long.'</font><font class="kw">;<br>for (</font>$i <font class="kw">= </font>1<font class="kw">; </font>$i <font class="kw">&lt;= </font>2<font class="kw">; </font>$i<font class="kw">++)<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$txt_long<font class="kw">.=</font><font class="str">' '</font><font class="kw">.</font>$txt_long<font class="kw">;<br><br></font>$pdf <font class="kw">= new </font>FPDF_CellFit<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>SetFillColor<font class="kw">(</font>0xff<font class="kw">,</font>0xff<font class="kw">,</font>0x99<font class="kw">);<br><br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">,</font>16<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">'Cell'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_short<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_long<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>Line<font class="kw">(</font>$pdf<font class="kw">-&gt;</font>x<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>y<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>w<font class="kw">-</font>$pdf<font class="kw">-&gt;</font>x<font class="kw">-</font>$pdf<font class="kw">-&gt;</font>rMargin<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>y<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">'CellFitScale'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">' (horizontal scaling only if necessary)'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>CellFitScale<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_short<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>CellFitScale<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_long<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">'CellFitScaleForce'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">' (horizontal scaling always)'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>CellFitScaleForce<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_short<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>CellFitScaleForce<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_long<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>Line<font class="kw">(</font>$pdf<font class="kw">-&gt;</font>x<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>y<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>w<font class="kw">-</font>$pdf<font class="kw">-&gt;</font>x<font class="kw">-</font>$pdf<font class="kw">-&gt;</font>rMargin<font class="kw">,</font>$pdf<font class="kw">-&gt;</font>y<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">'CellFitSpace'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">' (character spacing only if necessary)'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>CellFitSpace<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_short<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>CellFitSpace<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_long<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">'CellFitSpaceForce'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">''</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Write<font class="kw">(</font>10<font class="kw">,</font><font class="str">' (character spacing always)'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>CellFitSpaceForce<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_short<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>CellFitSpaceForce<font class="kw">(</font>0<font class="kw">,</font>10<font class="kw">,</font>$txt_long<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font><font class="str">''</font><font class="kw">,</font>1<font class="kw">);<br><br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex62.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script62.zip">ZIP</A> | <A HREF="script62.tgz">TGZ</A>
</BODY>
</HTML>

<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Example with MySQL</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Example with MySQL</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT>document.write('<A H'+'REF="m'+'ailto:carlos'+'&#'+'64;'+'magallaneslibre.com?subject=Example%20with%20MySQL">');</SCRIPT>Carlos Vásquez Sáez<SCRIPT>document.write('</A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>This example prints a product table from a MySQL database. Page breaks are handled manually
and the table header is repeated on each page.
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="cmt">//PDF USING MULTIPLE PAGES<br>//FILE CREATED BY: Carlos José Vásquez Sáez<br>//YOU CAN CONTACT ME: carlos@magallaneslibre.com<br>//FROM PUNTA ARENAS, MAGALLANES<br>//INOVO GROUP - http://www.inovo.cl<br><br></font>define<font class="kw">(</font><font class="str">'FPDF_FONTPATH'</font><font class="kw">,</font><font class="str">'font/'</font><font class="kw">);<br>require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br></font><font class="cmt">//Connect to your database<br></font><font class="kw">include(</font><font class="str">"conectmysql.php"</font><font class="kw">);<br><br></font><font class="cmt">//Create new pdf file<br></font>$pdf<font class="kw">=new </font>FPDF<font class="kw">();<br><br></font><font class="cmt">//Open file<br></font>$pdf<font class="kw">-&gt;</font>Open<font class="kw">();<br><br></font><font class="cmt">//Disable automatic page break<br></font>$pdf<font class="kw">-&gt;</font>SetAutoPageBreak<font class="kw">(</font>false<font class="kw">);<br><br></font><font class="cmt">//Add first page<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br><br></font><font class="cmt">//set initial y axis position per page<br></font>$y_axis_initial <font class="kw">= </font>25<font class="kw">;<br><br></font><font class="cmt">//print column titles for the actual page<br></font>$pdf<font class="kw">-&gt;</font>SetFillColor<font class="kw">(</font>232<font class="kw">,</font>232<font class="kw">,</font>232<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">'B'</font><font class="kw">,</font>12<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetY<font class="kw">(</font>$y_axis_initial<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>SetX<font class="kw">(</font>25<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font><font class="str">'CODE'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>100<font class="kw">,</font>6<font class="kw">,</font><font class="str">'NAME'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font><font class="str">'PRICE'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'R'</font><font class="kw">,</font>1<font class="kw">);<br><br></font>$y_axis <font class="kw">= </font>$y_axis <font class="kw">+ </font>$row_height<font class="kw">;<br><br></font><font class="cmt">//Select the Products you want to show in your PDF file<br></font>$result<font class="kw">=</font>mysql_query<font class="kw">(</font><font class="str">'select Code,Name,Price from Products ORDER BY Code'</font><font class="kw">,</font>$link<font class="kw">);<br><br></font><font class="cmt">//initialize counter<br></font>$i <font class="kw">= </font>0<font class="kw">;<br><br></font><font class="cmt">//Set maximum rows per page<br></font>$max <font class="kw">= </font>25<font class="kw">;<br><br></font><font class="cmt">//Set Row Height<br></font>$row_height <font class="kw">= </font>6<font class="kw">;<br><br>while(</font>$row <font class="kw">= </font>mysql_fetch_array<font class="kw">(</font>$result<font class="kw">))<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//If the current row is the last one, create new page and print column title<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if (</font>$i <font class="kw">== </font>$max<font class="kw">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//print column titles for the current page<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetY<font class="kw">(</font>$y_axis_initial<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetX<font class="kw">(</font>25<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font><font class="str">'CODE'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>100<font class="kw">,</font>6<font class="kw">,</font><font class="str">'NAME'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font><font class="str">'PRICE'</font><font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'R'</font><font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Go to next row<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$y_axis <font class="kw">= </font>$y_axis <font class="kw">+ </font>$row_height<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Set $i variable to 0 (first row)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$i <font class="kw">= </font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$code <font class="kw">= </font>$row<font class="kw">[</font><font class="str">'Code'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$price <font class="kw">= </font>$row<font class="kw">[</font><font class="str">'Price'</font><font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$name <font class="kw">= </font>$row<font class="kw">[</font><font class="str">'Code'</font><font class="kw">];<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetY<font class="kw">(</font>$y_axis<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>SetX<font class="kw">(</font>25<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font>$code<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>100<font class="kw">,</font>6<font class="kw">,</font>$name<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'L'</font><font class="kw">,</font>1<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>30<font class="kw">,</font>6<font class="kw">,</font>$price<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">,</font><font class="str">'R'</font><font class="kw">,</font>1<font class="kw">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//Go to next row<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$y_axis <font class="kw">= </font>$y_axis <font class="kw">+ </font>$row_height<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font>$i <font class="kw">= </font>$i <font class="kw">+ </font>1<font class="kw">;<br>}<br><br></font>mysql_close<font class="kw">(</font>$link<font class="kw">);<br><br></font><font class="cmt">//Create file<br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Download</H4><A HREF="script30.zip">ZIP</A> | <A HREF="script30.tgz">TGZ</A>
</BODY>
</HTML>

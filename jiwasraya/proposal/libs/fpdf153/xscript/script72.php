<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Gradients</TITLE>
<LINK TYPE="text/css" REL="stylesheet" HREF="../fpdf.css">
</HEAD>
<BODY ONLOAD="if(window.focus) window.focus()">
<H2>Gradients</H2>
<H4 CLASS="st">Informations</H4>Author: <SCRIPT TYPE="text/javascript">document.write('<A H'+'REF="m'+'ailto:fpdf'+'&#'+'64;'+'kreativschmiede.de?subject=Gradients">');</SCRIPT>Andreas Würmser<SCRIPT TYPE="text/javascript">document.write('<\/A>');</SCRIPT><BR>License: Freeware
<H4 CLASS="st">Description</H4>Paints linear and radial gradients as well as multi-color gradients (coons patch meshes) inside a rectangle.<BR>
<BR>
<TT>LinearGradient(<B>float</B> x, <B>float</B> y, <B>float</B> w, <B>float</B> h, <B>array</B> col1, <B>array</B> col2 [, <B>array</B> coords])</TT><BR>
<BR>
<TT><U>x</U></TT>: abscissa of the top left corner of the rectangle.<BR>
<TT><U>y</U></TT>: ordinate of the top left corner of the rectangle.<BR>
<TT><U>w</U></TT>: width of the rectangle.<BR>
<TT><U>h</U></TT>: height of the rectangle.<BR>
<TT><U>col1</U></TT>: first color (RGB components).<BR>
<TT><U>col2</U></TT>: second color (RGB components).<BR>
<TT><U>coords</U></TT>: array of the form (x1, y1, x2, y2) which defines the gradient vector (see linear_gradient_coords.jpg).
The default value is from left to right (x1=0, y1=0, x2=1, y2=0).<BR>
<BR>
<TT>RadialGradient(<B>float</B> x, <B>float</B> y, <B>float</B> w, <B>float</B> h, <B>array</B> col1, <B>array</B> col2 [, <B>array</B> coords])</TT><BR>
<BR>
<TT><U>x</U></TT>: abscissa of the top left corner of the rectangle.<BR>
<TT><U>y</U></TT>: ordinate of the top left corner of the rectangle.<BR>
<TT><U>w</U></TT>: width of the rectangle.<BR>
<TT><U>h</U></TT>: height of the rectangle.<BR>
<TT><U>col1</U></TT>: first color (RGB components).<BR>
<TT><U>col2</U></TT>: second color (RGB components).<BR>
<TT><U>coords</U></TT>: array of the form (fx, fy, cx, cy, r) where (fx, fy) is the starting point of the gradient with
color1, (cx, cy) is the center of the circle with color2, and r is the radius of the circle (see radial_gradient_coords.jpg).
(fx, fy) should be inside the circle, otherwise some areas will not be defined.<BR>
<BR>
<TT>CoonsPatchMesh(<B>float</B> x, <B>float</B> y, <B>float</B> w, <B>float</B> h, <B>array</B> col1, <B>array</B> col2, <B>array</B> col3, <B>array</B> col4 [, <B>array</B> coords [, <B>float</B> coords_min [, <B>float</B> coords_max]]])</TT><BR>
<BR>
<TT><U>x</U></TT>: abscissa of the top left corner of the rectangle.<BR>
<TT><U>y</U></TT>: ordinate of the top left corner of the rectangle.<BR>
<TT><U>w</U></TT>: width of the rectangle.<BR>
<TT><U>h</U></TT>: height of the rectangle.<BR>
<TT><U>col1</U></TT>: first color (lower left corner) (RGB components).<BR>
<TT><U>col2</U></TT>: second color (lower right corner) (RGB components).<BR>
<TT><U>col3</U></TT>: third color (upper right corner) (RGB components).<BR>
<TT><U>col4</U></TT>: fourth color (upper left corner) (RGB components).<BR>
<TT><U>coords</U></TT>:<BR>
<BR>
- for one patch mesh<BR>
<BR>
array(float x1, float y1, .... float x12, float y12):
12 pairs of coordinates (normally from 0 to 1) which specify the Bézier control points that define the patch.
First pair is the lower left edge point, next is its right control point (control point 2).
Then the other points are defined in the order: control point 1, edge point, control point 2 going counter-clockwise around the patch.
Last (x12, y12) is the first edge point's left control point (control point 1).<BR>
<BR>
- for two or more patch meshes<BR>
<BR>
array[number of patches]: arrays with the following keys for each patch:<BR>
<TT>f</TT>: where to put that patch (0 = first patch, 1, 2, 3 = right, top and left of precedent patch - I didn't figure this out completely - just try and error ;-)<BR>
<TT>points</TT>: 12 pairs of coordinates of the Bézier control points as above for the first patch,
8 pairs of coordinates for the following patches, ignoring the coordinates already defined by the precedent patch
(I also didn't figure out the order of these - also: try and see what's happening)<BR>
<TT>colors</TT>: must be 4 colors for the first patch, 2 colors for the following patches<BR>
<BR>
<TT><U>coords_min</U></TT>: minimum value used by the coordinates. If a coordinate's value is smaller than this it will be cut to coords_min. default: 0<BR>
<TT><U>coords_max</U></TT>: maximum value used by the coordinates. If a coordinate's value is greater than this it will be cut to coords_max. default: 1
<H4 CLASS="st">Source</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'fpdf.php'</font><font class="kw">);<br><br>class </font>PDF_Gradients <font class="kw">extends </font>FPDF<font class="kw">{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;var </font>$gradients<font class="kw">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>PDF_Gradients<font class="kw">(</font>$orientation<font class="kw">=</font><font class="str">'P'</font><font class="kw">,</font>$unit<font class="kw">=</font><font class="str">'mm'</font><font class="kw">,</font>$format<font class="kw">=</font><font class="str">'A4'</font><font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>FPDF<font class="kw">(</font>$orientation<font class="kw">,</font>$unit<font class="kw">,</font>$format<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">=array();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>LinearGradient<font class="kw">(</font>$x<font class="kw">, </font>$y<font class="kw">, </font>$w<font class="kw">, </font>$h<font class="kw">, </font>$col1<font class="kw">=array(), </font>$col2<font class="kw">=array(), </font>$coords<font class="kw">=array(</font>0<font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Clip<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Gradient<font class="kw">(</font>2<font class="kw">,</font>$col1<font class="kw">,</font>$col2<font class="kw">,</font>$coords<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>RadialGradient<font class="kw">(</font>$x<font class="kw">, </font>$y<font class="kw">, </font>$w<font class="kw">, </font>$h<font class="kw">, </font>$col1<font class="kw">=array(), </font>$col2<font class="kw">=array(), </font>$coords<font class="kw">=array(</font>0.5<font class="kw">,</font>0.5<font class="kw">,</font>0.5<font class="kw">,</font>0.5<font class="kw">,</font>1<font class="kw">)){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Clip<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Gradient<font class="kw">(</font>3<font class="kw">,</font>$col1<font class="kw">,</font>$col2<font class="kw">,</font>$coords<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>CoonsPatchMesh<font class="kw">(</font>$x<font class="kw">, </font>$y<font class="kw">, </font>$w<font class="kw">, </font>$h<font class="kw">, </font>$col1<font class="kw">=array(), </font>$col2<font class="kw">=array(), </font>$col3<font class="kw">=array(), </font>$col4<font class="kw">=array(), </font>$coords<font class="kw">=array(</font>0.00<font class="kw">,</font>0.0<font class="kw">,</font>0.33<font class="kw">,</font>0.00<font class="kw">,</font>0.67<font class="kw">,</font>0.00<font class="kw">,</font>1.00<font class="kw">,</font>0.00<font class="kw">,</font>1.00<font class="kw">,</font>0.33<font class="kw">,</font>1.00<font class="kw">,</font>0.67<font class="kw">,</font>1.00<font class="kw">,</font>1.00<font class="kw">,</font>0.67<font class="kw">,</font>1.00<font class="kw">,</font>0.33<font class="kw">,</font>1.00<font class="kw">,</font>0.00<font class="kw">,</font>1.00<font class="kw">,</font>0.00<font class="kw">,</font>0.67<font class="kw">,</font>0.00<font class="kw">,</font>0.33<font class="kw">), </font>$coords_min<font class="kw">=</font>0<font class="kw">, </font>$coords_max<font class="kw">=</font>1<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>Clip<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$n <font class="kw">= </font>count<font class="kw">(</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">)+</font>1<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'type'</font><font class="kw">]=</font>6<font class="kw">; </font><font class="cmt">//coons patch mesh<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//check the coords array if it is the simple array or the multi patch array<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(!isset(</font>$coords<font class="kw">[</font>0<font class="kw">][</font><font class="str">'f'</font><font class="kw">])){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//simple array -&gt; convert to multi patch array<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">if(!isset(</font>$col1<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col1<font class="kw">[</font>1<font class="kw">]=</font>$col1<font class="kw">[</font>2<font class="kw">]=</font>$col1<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$col2<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col2<font class="kw">[</font>1<font class="kw">]=</font>$col2<font class="kw">[</font>2<font class="kw">]=</font>$col2<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$col3<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col3<font class="kw">[</font>1<font class="kw">]=</font>$col3<font class="kw">[</font>2<font class="kw">]=</font>$col3<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$col4<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col4<font class="kw">[</font>1<font class="kw">]=</font>$col4<font class="kw">[</font>2<font class="kw">]=</font>$col4<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'f'</font><font class="kw">]=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'points'</font><font class="kw">]=</font>$coords<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">][</font><font class="str">'r'</font><font class="kw">]=</font>$col1<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">][</font><font class="str">'g'</font><font class="kw">]=</font>$col1<font class="kw">[</font>1<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">][</font><font class="str">'b'</font><font class="kw">]=</font>$col1<font class="kw">[</font>2<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">][</font><font class="str">'r'</font><font class="kw">]=</font>$col2<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">][</font><font class="str">'g'</font><font class="kw">]=</font>$col2<font class="kw">[</font>1<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">][</font><font class="str">'b'</font><font class="kw">]=</font>$col2<font class="kw">[</font>2<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>2<font class="kw">][</font><font class="str">'r'</font><font class="kw">]=</font>$col3<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>2<font class="kw">][</font><font class="str">'g'</font><font class="kw">]=</font>$col3<font class="kw">[</font>1<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>2<font class="kw">][</font><font class="str">'b'</font><font class="kw">]=</font>$col3<font class="kw">[</font>2<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>3<font class="kw">][</font><font class="str">'r'</font><font class="kw">]=</font>$col4<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>3<font class="kw">][</font><font class="str">'g'</font><font class="kw">]=</font>$col4<font class="kw">[</font>1<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>3<font class="kw">][</font><font class="str">'b'</font><font class="kw">]=</font>$col4<font class="kw">[</font>2<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//multi patch array<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">=</font>$coords<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$bpcd<font class="kw">=</font>65535<font class="kw">; </font><font class="cmt">//16 BitsPerCoordinate<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//build the data stream<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">for(</font>$i<font class="kw">=</font>0<font class="kw">;</font>$i<font class="kw">&lt;</font>count<font class="kw">(</font>$patch_array<font class="kw">);</font>$i<font class="kw">++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'f'</font><font class="kw">]); </font><font class="cmt">//start with the edge flag as 8 bit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">for(</font>$j<font class="kw">=</font>0<font class="kw">;</font>$j<font class="kw">&lt;</font>count<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">]);</font>$j<font class="kw">++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//each point as 16 bit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]=((</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]-</font>$coords_min<font class="kw">)/(</font>$coords_max<font class="kw">-</font>$coords_min<font class="kw">))*</font>$bpcd<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]&lt;</font>0<font class="kw">) </font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]=</font>0<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]&gt;</font>$bpcd<font class="kw">) </font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]=</font>$bpcd<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>floor<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]/</font>256<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>floor<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'points'</font><font class="kw">][</font>$j<font class="kw">]%</font>256<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(</font>$j<font class="kw">=</font>0<font class="kw">;</font>$j<font class="kw">&lt;</font>count<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'colors'</font><font class="kw">]);</font>$j<font class="kw">++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//each color component as 8 bit<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>$j<font class="kw">][</font><font class="str">'r'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>$j<font class="kw">][</font><font class="str">'g'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'stream'</font><font class="kw">].=</font>chr<font class="kw">(</font>$patch_array<font class="kw">[</font>$i<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>$j<font class="kw">][</font><font class="str">'b'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//paint the gradient<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Sh'</font><font class="kw">.</font>$n<font class="kw">.</font><font class="str">' sh'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//restore previous Graphic State<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'Q'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>Clip<font class="kw">(</font>$x<font class="kw">,</font>$y<font class="kw">,</font>$w<font class="kw">,</font>$h<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//save current Graphic State<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$s<font class="kw">=</font><font class="str">'q'</font><font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//set clipping area<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$s<font class="kw">.=</font>sprintf<font class="kw">(</font><font class="str">' %.2f %.2f %.2f %.2f re W n'</font><font class="kw">, </font>$x<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, (</font>$<font class="kw">this-&gt;</font>h<font class="kw">-</font>$y<font class="kw">)*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, </font>$w<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, -</font>$h<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//set up transformation matrix for gradient<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$s<font class="kw">.=</font>sprintf<font class="kw">(</font><font class="str">' %.3f 0 0 %.3f %.3f %.3f cm'</font><font class="kw">, </font>$w<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, </font>$h<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, </font>$x<font class="kw">*</font>$<font class="kw">this-&gt;</font>k<font class="kw">, (</font>$<font class="kw">this-&gt;</font>h<font class="kw">-(</font>$y<font class="kw">+</font>$h<font class="kw">))*</font>$<font class="kw">this-&gt;</font>k<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font>$s<font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>Gradient<font class="kw">(</font>$type<font class="kw">, </font>$col1<font class="kw">, </font>$col2<font class="kw">, </font>$coords<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$n <font class="kw">= </font>count<font class="kw">(</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">)+</font>1<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'type'</font><font class="kw">]=</font>$type<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$col1<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col1<font class="kw">[</font>1<font class="kw">]=</font>$col1<font class="kw">[</font>2<font class="kw">]=</font>$col1<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'col1'</font><font class="kw">]=</font>sprintf<font class="kw">(</font><font class="str">'%.3f %.3f %.3f'</font><font class="kw">,(</font>$col1<font class="kw">[</font>0<font class="kw">]/</font>255<font class="kw">),(</font>$col1<font class="kw">[</font>1<font class="kw">]/</font>255<font class="kw">),(</font>$col1<font class="kw">[</font>2<font class="kw">]/</font>255<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!isset(</font>$col2<font class="kw">[</font>1<font class="kw">]))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$col2<font class="kw">[</font>1<font class="kw">]=</font>$col2<font class="kw">[</font>2<font class="kw">]=</font>$col2<font class="kw">[</font>0<font class="kw">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'col2'</font><font class="kw">]=</font>sprintf<font class="kw">(</font><font class="str">'%.3f %.3f %.3f'</font><font class="kw">,(</font>$col2<font class="kw">[</font>0<font class="kw">]/</font>255<font class="kw">),(</font>$col2<font class="kw">[</font>1<font class="kw">]/</font>255<font class="kw">),(</font>$col2<font class="kw">[</font>2<font class="kw">]/</font>255<font class="kw">));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$n<font class="kw">][</font><font class="str">'coords'</font><font class="kw">]=</font>$coords<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//paint the gradient<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Sh'</font><font class="kw">.</font>$n<font class="kw">.</font><font class="str">' sh'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//restore previous Graphic State<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'Q'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>_putshaders<font class="kw">(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$<font class="kw">this-&gt;</font>gradients <font class="kw">as </font>$id<font class="kw">=&gt;</font>$grad<font class="kw">){&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font>2 <font class="kw">|| </font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font>3<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_newobj<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&lt;&lt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/FunctionType 2'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Domain [0.0 1.0]'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/C0 ['</font><font class="kw">.</font>$grad<font class="kw">[</font><font class="str">'col1'</font><font class="kw">].</font><font class="str">']'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/C1 ['</font><font class="kw">.</font>$grad<font class="kw">[</font><font class="str">'col2'</font><font class="kw">].</font><font class="str">']'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/N 1'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'endobj'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$f1<font class="kw">=</font>$<font class="kw">this-&gt;</font>n<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_newobj<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&lt;&lt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/ShadingType '</font><font class="kw">.</font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/ColorSpace /DeviceRGB'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(</font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font><font class="str">'2'</font><font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font>sprintf<font class="kw">(</font><font class="str">'/Coords [%.3f %.3f %.3f %.3f]'</font><font class="kw">,</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>0<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>1<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>2<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>3<font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Function '</font><font class="kw">.</font>$f1<font class="kw">.</font><font class="str">' 0 R'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Extend [true true] '</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font>3<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//x0, y0, r0, x1, y1, r1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//at this this time radius of inner circle is 0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font>sprintf<font class="kw">(</font><font class="str">'/Coords [%.3f %.3f 0 %.3f %.3f %.3f]'</font><font class="kw">,</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>0<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>1<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>2<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>3<font class="kw">],</font>$grad<font class="kw">[</font><font class="str">'coords'</font><font class="kw">][</font>4<font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Function '</font><font class="kw">.</font>$f1<font class="kw">.</font><font class="str">' 0 R'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Extend [true true] '</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif(</font>$grad<font class="kw">[</font><font class="str">'type'</font><font class="kw">]==</font>6<font class="kw">){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/BitsPerCoordinate 16'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/BitsPerComponent 8'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Decode[0 1 0 1 0 1 0 1 0 1]'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/BitsPerFlag 8'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Length '</font><font class="kw">.</font>strlen<font class="kw">(</font>$grad<font class="kw">[</font><font class="str">'stream'</font><font class="kw">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_putstream<font class="kw">(</font>$grad<font class="kw">[</font><font class="str">'stream'</font><font class="kw">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'endobj'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>gradients<font class="kw">[</font>$id<font class="kw">][</font><font class="str">'id'</font><font class="kw">]=</font>$<font class="kw">this-&gt;</font>n<font class="kw">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>_putresourcedict<font class="kw">(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putresourcedict<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Shading &lt;&lt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach(</font>$<font class="kw">this-&gt;</font>gradients <font class="kw">as </font>$id<font class="kw">=&gt;</font>$grad<font class="kw">)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'/Sh'</font><font class="kw">.</font>$id<font class="kw">.</font><font class="str">' '</font><font class="kw">.</font>$grad<font class="kw">[</font><font class="str">'id'</font><font class="kw">].</font><font class="str">' 0 R'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_out<font class="kw">(</font><font class="str">'&gt;&gt;'</font><font class="kw">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function </font>_putresources<font class="kw">(){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>$<font class="kw">this-&gt;</font>_putshaders<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="kw">parent::</font>_putresources<font class="kw">();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>

<H4 CLASS="st">Example</H4><TABLE WIDTH="100%" STYLE="color:#4040C0; border-style:ridge" BORDERCOLORLIGHT="#B0B0E0" BORDERCOLORDARK="#000000" BORDER="2" CELLPADDING=6 CELLSPACING=0 BGCOLOR="#F0F5FF"><TR><TD style="border-width:0px">
<NOBR><code><font color="#000000">
&lt;?php<br><font class="kw">require(</font><font class="str">'gradients.php'</font><font class="kw">);<br><br></font>$pdf <font class="kw">= new </font>PDF_Gradients<font class="kw">();<br><br></font><font class="cmt">//first page<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>SetFont<font class="kw">(</font><font class="str">'Arial'</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>14<font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Page 1'</font><font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font><font class="str">'C'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font><font class="cmt">//set colors for gradients (r,g,b) or (grey 0-255)<br></font>$red<font class="kw">=array(</font>255<font class="kw">,</font>0<font class="kw">,</font>0<font class="kw">);<br></font>$blue<font class="kw">=array(</font>0<font class="kw">,</font>0<font class="kw">,</font>200<font class="kw">);<br></font>$yellow<font class="kw">=array(</font>255<font class="kw">,</font>255<font class="kw">,</font>0<font class="kw">);<br></font>$green<font class="kw">=array(</font>0<font class="kw">,</font>255<font class="kw">,</font>0<font class="kw">);<br></font>$white<font class="kw">=array(</font>255<font class="kw">);<br></font>$black<font class="kw">=array(</font>0<font class="kw">);<br><br></font><font class="cmt">//set the coordinates x1,y1,x2,y2 of the gradient (see linear_gradient_coords.jpg)<br></font>$coords<font class="kw">=array(</font>0<font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font>0<font class="kw">);<br><br></font><font class="cmt">//paint a linear gradient<br></font>$pdf<font class="kw">-&gt;</font>LinearGradient<font class="kw">(</font>20<font class="kw">,</font>25<font class="kw">,</font>80<font class="kw">,</font>80<font class="kw">,</font>$red<font class="kw">,</font>$blue<font class="kw">,</font>$coords<font class="kw">);<br><br></font><font class="cmt">//set the coordinates fx,fy,cx,cy,r of the gradient (see radial_gradient_coords.jpg)<br></font>$coords<font class="kw">=array(</font>0.5<font class="kw">,</font>0.5<font class="kw">,</font>1<font class="kw">,</font>1<font class="kw">,</font>1.2<font class="kw">);<br><br></font><font class="cmt">//paint a radial gradient<br></font>$pdf<font class="kw">-&gt;</font>RadialGradient<font class="kw">(</font>110<font class="kw">,</font>25<font class="kw">,</font>80<font class="kw">,</font>80<font class="kw">,</font>$white<font class="kw">,</font>$black<font class="kw">,</font>$coords<font class="kw">);<br><br></font><font class="cmt">//paint a coons patch mesh with default coordinates<br></font>$pdf<font class="kw">-&gt;</font>CoonsPatchMesh<font class="kw">(</font>20<font class="kw">,</font>115<font class="kw">,</font>80<font class="kw">,</font>80<font class="kw">,</font>$yellow<font class="kw">, </font>$blue<font class="kw">, </font>$green<font class="kw">, </font>$red<font class="kw">);<br><br></font><font class="cmt">//set the coordinates for the cubic Bézier points x1,y1 ... x12, y12 of the patch (see coons_patch_mesh_coords.jpg)<br></font>$coords<font class="kw">=array(</font>0.00<font class="kw">,</font>0.00<font class="kw">, </font>0.33<font class="kw">,</font>0.20<font class="kw">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//lower left<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.67<font class="kw">,</font>0.00<font class="kw">, </font>1.00<font class="kw">,</font>0.00<font class="kw">, </font>0.80<font class="kw">,</font>0.33<font class="kw">,&nbsp;&nbsp;</font><font class="cmt">//lower right<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.80<font class="kw">,</font>0.67<font class="kw">, </font>1.00<font class="kw">,</font>1.00<font class="kw">, </font>0.67<font class="kw">,</font>0.80<font class="kw">,&nbsp;&nbsp;</font><font class="cmt">//upper right<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.33<font class="kw">,</font>1.00<font class="kw">, </font>0.00<font class="kw">,</font>1.00<font class="kw">, </font>0.20<font class="kw">,</font>0.67<font class="kw">,&nbsp;&nbsp;</font><font class="cmt">//upper left<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.00<font class="kw">,</font>0.33<font class="kw">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//lower left<br></font>$coords_min<font class="kw">=</font>0<font class="kw">;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//minimum value of the coordinates<br></font>$coords_max<font class="kw">=</font>1<font class="kw">;&nbsp;&nbsp;&nbsp;</font><font class="cmt">//maximum value of the coordinates<br><br>//paint a coons patch gradient with the above coordinates <br></font>$pdf<font class="kw">-&gt;</font>CoonsPatchMesh<font class="kw">(</font>110<font class="kw">,</font>115<font class="kw">,</font>80<font class="kw">,</font>80<font class="kw">,</font>$yellow<font class="kw">,</font>$blue<font class="kw">,</font>$green<font class="kw">,</font>$red<font class="kw">,</font>$coords<font class="kw">,</font>$coords_min<font class="kw">,</font>$coords_max<font class="kw">);<br><br></font><font class="cmt">//second page<br></font>$pdf<font class="kw">-&gt;</font>AddPage<font class="kw">();<br></font>$pdf<font class="kw">-&gt;</font>Cell<font class="kw">(</font>0<font class="kw">,</font>5<font class="kw">,</font><font class="str">'Page 2'</font><font class="kw">,</font>0<font class="kw">,</font>1<font class="kw">,</font><font class="str">'C'</font><font class="kw">);<br></font>$pdf<font class="kw">-&gt;</font>Ln<font class="kw">();<br><br></font><font class="cmt">//first patch: f = 0<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'f'</font><font class="kw">]=</font>0<font class="kw">;<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'points'</font><font class="kw">]=array(</font>0.00<font class="kw">,</font>0.00<font class="kw">, </font>0.33<font class="kw">,</font>0.00<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.67<font class="kw">,</font>0.00<font class="kw">, </font>1.00<font class="kw">,</font>0.00<font class="kw">, </font>1.00<font class="kw">,</font>0.33<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.8<font class="kw">,</font>0.67<font class="kw">, </font>1.00<font class="kw">,</font>1.00<font class="kw">, </font>0.67<font class="kw">,</font>0.8<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.33<font class="kw">,</font>1.80<font class="kw">, </font>0.00<font class="kw">,</font>1.00<font class="kw">, </font>0.00<font class="kw">,</font>0.67<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.00<font class="kw">,</font>0.33<font class="kw">);<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>255<font class="kw">);<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>2<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br></font>$patch_array<font class="kw">[</font>0<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>3<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br><br></font><font class="cmt">//second patch - above the other: f = 2<br></font>$patch_array<font class="kw">[</font>1<font class="kw">][</font><font class="str">'f'</font><font class="kw">]=</font>2<font class="kw">;<br></font>$patch_array<font class="kw">[</font>1<font class="kw">][</font><font class="str">'points'</font><font class="kw">]=array(</font>0.00<font class="kw">,</font>1.33<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.00<font class="kw">,</font>1.67<font class="kw">, </font>0.00<font class="kw">,</font>2.00<font class="kw">, </font>0.33<font class="kw">,</font>2.00<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.67<font class="kw">,</font>2.00<font class="kw">, </font>1.00<font class="kw">,</font>2.00<font class="kw">, </font>1.00<font class="kw">,</font>1.67<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>1.5<font class="kw">,</font>1.33<font class="kw">);<br></font>$patch_array<font class="kw">[</font>1<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br></font>$patch_array<font class="kw">[</font>1<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>255<font class="kw">);<br><br></font><font class="cmt">//third patch - right of the above: f = 3<br></font>$patch_array<font class="kw">[</font>2<font class="kw">][</font><font class="str">'f'</font><font class="kw">]=</font>3<font class="kw">;<br></font>$patch_array<font class="kw">[</font>2<font class="kw">][</font><font class="str">'points'</font><font class="kw">]=array(</font>1.33<font class="kw">,</font>0.80<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>1.67<font class="kw">,</font>1.50<font class="kw">, </font>2.00<font class="kw">,</font>1.00<font class="kw">, </font>2.00<font class="kw">,</font>1.33<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>2.00<font class="kw">,</font>1.67<font class="kw">, </font>2.00<font class="kw">,</font>2.00<font class="kw">, </font>1.67<font class="kw">,</font>2.00<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>1.33<font class="kw">,</font>2.00<font class="kw">);<br></font>$patch_array<font class="kw">[</font>2<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>255<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>255<font class="kw">);<br></font>$patch_array<font class="kw">[</font>2<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br><br></font><font class="cmt">//fourth patch - below the above, which means left(?) of the above: f = 1<br></font>$patch_array<font class="kw">[</font>3<font class="kw">][</font><font class="str">'f'</font><font class="kw">]=</font>1<font class="kw">;<br></font>$patch_array<font class="kw">[</font>3<font class="kw">][</font><font class="str">'points'</font><font class="kw">]=array(</font>2.00<font class="kw">,</font>0.67<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>2.00<font class="kw">,</font>0.33<font class="kw">, </font>2.00<font class="kw">,</font>0.00<font class="kw">, </font>1.67<font class="kw">,</font>0.00<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>1.33<font class="kw">,</font>0.00<font class="kw">, </font>1.00<font class="kw">,</font>0.00<font class="kw">, </font>1.00<font class="kw">,</font>0.33<font class="kw">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font>0.8<font class="kw">,</font>0.67<font class="kw">);<br></font>$patch_array<font class="kw">[</font>3<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>0<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>0<font class="kw">);<br></font>$patch_array<font class="kw">[</font>3<font class="kw">][</font><font class="str">'colors'</font><font class="kw">][</font>1<font class="kw">]=array(</font><font class="str">'r'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'g'</font><font class="kw">=&gt;</font>0<font class="kw">,</font><font class="str">'b'</font><font class="kw">=&gt;</font>255<font class="kw">);<br><br></font>$coords_min<font class="kw">=</font>0<font class="kw">;<br></font>$coords_max<font class="kw">=</font>2<font class="kw">;<br><br></font>$pdf<font class="kw">-&gt;</font>CoonsPatchMesh<font class="kw">(</font>10<font class="kw">,</font>25<font class="kw">,</font>190<font class="kw">,</font>200<font class="kw">,</font><font class="str">''</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font><font class="str">''</font><font class="kw">,</font>$patch_array<font class="kw">,</font>$coords_min<font class="kw">,</font>$coords_max<font class="kw">);<br><br></font>$pdf<font class="kw">-&gt;</font>Output<font class="kw">();<br></font>?&gt;
</font>
</code></NOBR></TD></TR></TABLE>
<BR>
View the result <A HREF="ex72.pdf" TARGET="_blank">here</A>.
<H4 CLASS="st">Download</H4><A HREF="script72.zip">ZIP</A> | <A HREF="script72.tgz">TGZ</A>
</BODY>
</HTML>

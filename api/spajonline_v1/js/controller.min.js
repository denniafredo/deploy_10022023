angular.module('app.controllers',['ui.utils.masks']).controller('dataTertanggung13Ctrl',['$scope','$state','$stateParams','dataFactory','spajProvider','$ionicPopup','syncService','$store',function($scope,$state,$stateParams,dataFactory,spajProvider,$ionicPopup,syncService,$store){$scope.data=null;$scope.pageId='aplikasiSPAJOnline.dataTertanggung13';$scope.genders=dataFactory.getGenders();$scope.agamas=dataFactory.getAgamas();$scope.spaj_guid=$stateParams.spaj_guid;$scope.imgDokumenKtp="data:image/png;base64,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";$scope.imgDokumenKtpChanged=!1;$scope.tglLahirTertanggung='';$scope.idagen=getQueryParam('idagen');$scope.token=getQueryParam('token');$scope.isOnline=!1;$scope.isOnline=spajProvider.isInternetAvailable();new Date('10/10/1990');$scope.$on('$ionicView.enter',function(){$scope.init_data();if($scope.spaj_guid=='new'){newGuid=spajProvider.genSpajGUID();spajProvider.setSpajGUID(newGuid);$scope.data.spaj_guid=newGuid;$scope.data.build_id=spajProvider.getBuildId()}
$scope.init_display()});$scope.init_display=function(){return!0};prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){prospek={'jeniskelamin':'0','nama':'','tgllahir':''}}
$scope.init_data=function(){if(prospek){$scope.data={'spaj_guid':(spajProvider.getSpajGUID()==null||spajProvider.getSpajGUID()=='')?spajProvider.genSpajGUID():spajProvider.getSpajGUID(),'isPageTertanggung1Accepted':!1,'agamaTertanggung':$scope.agamas[0].id,'jenkelTertanggung':$scope.genders[prospek.jeniskelamin].id,'namaLengkapTertanggung':prospek.nama,'nomorKTPTertanggung':prospek.no_ktp_tertanggung,'tglLahirTertanggung':new Date(prospek.tgllahir),'nomorNPWPTertanggung':'','tglLahirPempol':'','imageKTPTertanggung':null,'idagen':$scope.idagen,'namaAgen':prospek.namaAgen}}else{$scope.data={'spaj_guid':(spajProvider.getSpajGUID()==null||spajProvider.getSpajGUID()=='')?spajProvider.genSpajGUID():spajProvider.getSpajGUID(),'isPageTertanggung1Accepted':!1,'agamaTertanggung':$scope.agamas[0].id,'jenkelTertanggung':$scope.genders[0].id,'namaLengkapTertanggung':'','nomorKTPTertanggung':'','tglLahirTertanggung':$scope.tglLahirTertanggung,'nomorNPWPTertanggung':'','tglLahirPempol':'','imageKTPTertanggung':null,'idagen':$scope.idagen,'namaAgen':prospek.namaAgen}}
$scope.imgDokumenKtpChanged=!1;spajProvider.putImageTo('canvasKTP',$scope.imgDokumenKtp);if($scope.spaj_guid=='new'){}else if($scope.spaj_guid==''&&spajProvider.getSpajGUID()!=''){spajProvider.setSpajGUID(spajProvider.getSpajGUID());$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId);try{decodedImage=spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.data.imageKTPTertanggung))}catch(e){decodedImage=''}
spajProvider.putImageTo('canvasKTP',decodedImage);$scope.data.tglLahirTertanggung=new Date($scope.data.tglLahirTertanggung);$scope.imgDokumenKtp=decodedImage;$scope.imgDokumenKtpChanged=!0}else{spajProvider.setSpajGUID($scope.spaj_guid);$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId);var decodedImage=spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.data.imageKTPTertanggung));$scope.data.tglLahirTertanggung=new Date($scope.data.tglLahirTertanggung);if(spajProvider.putImageTo('canvasKTP',decodedImage)){$scope.imgDokumenKtpChanged=!0}
$scope.imgDokumenKtp=decodedImage;$scope.imgDokumenKtpChanged=!0}}
$scope.validateThisFormOnPageAccept=function(){$scope.messages=[];try{if($scope.data==null){$scope.messages.push({"message":"Data ERROR. Null data."})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
try{tryMe=$scope.data.namaLengkapTertanggung;if($scope.data.namaLengkapTertanggung==''&&!(tryMe.match(/^[a-z\d\-_\s]+$/i))){$scope.messages.push({'message':"Nama Tertanggung harus benar!"})}
tryMe=$scope.data.nomorKTPTertanggung;if($scope.data.nomorKTPTertanggung==''&&!(tryMe.match(/^\d+$/))&&$scope.data.nomorKTPTertanggung.length!=16){$scope.messages.push({'message':"Nomor KTP harus benar! (16 digit)"})}
tryMe=$scope.data.nomorNPWPTertanggung;if($scope.data.nomorNPWPTertanggung==''&&!(tryMe.match(/^\d+$/))){}
tryMe=$scope.data.tglLahirTertanggung;if(''==tryMe){$scope.messages.push({'message':"Masukkan tanggal lahir"})}
tryMe=$scope.data.jenkelTertanggung;if('0'==tryMe){$scope.messages.push({'message':"Silahkan Pilih Jenis kelamin"})}
tryMe=$scope.data.agamaTertanggung;if('0'==tryMe){$scope.messages.push({'message':"Silahkan Pilih Agama"})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
if(!$scope.imgDokumenKtpChanged){$scope.messages.push({'message':"Silahkan foto KTP Tertanggung"})}
if($scope.messages.length>0){return $scope.messages}
return!1}
$scope.changeImage=function(){spajProvider.takePict(this,'canvasKTP');$scope.data.imageKTPTertanggung=spajProvider.getImageBase64('canvasKTP','jpg');$scope.imgDokumenKtpChanged=!0;$scope.data.isPageTertanggung1Accepted=!1}
$scope.saveDataSpaj=function(){$scope.data.imageKTPTertanggung=spajProvider.getImageBase64('canvasKTP','jpg');var $formdata={'pageId':'aplikasiSPAJOnline.dataTertanggung13','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.moveToNextPage=function(){if($scope.validateThisFormOnPageAccept()){$scope.showAlert('Validasi',spajProvider.alertMessagebuilder($scope.messages));$scope.data.isPageTertanggung1Accepted=!1;return!1}else{if($scope.data.isPageTertanggung1Accepted){if(confirm('Langsung menuju ke halaman form isian tempat tinggal tertanggung?')){$state.go('aplikasiSPAJOnline.dataTertanggung23',{},{reload:!0,inherit:!1})}else{return!1}}}}
$scope.isPageAccepted=function(){if(!$scope.data.isPageTertanggung1Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})};$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('dataTertanggung23Ctrl',['$scope','$stateParams','dataFactory','spajProvider','$ionicPopup','syncService','$store','$state',function($scope,$stateParams,dataFactory,spajProvider,$ionicPopup,syncService,$store,$state){$scope.pageId='aplikasiSPAJOnline.dataTertanggung23';$scope.messages=!1;$scope.data=null;$scope.provinsis=dataFactory.getProvinsis();$scope.kabupatens=dataFactory.getKabupatens();$scope.kabupatens1=dataFactory.getKabupatens();$scope.statustempattinggals=dataFactory.getStatusTempatTinggals();prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){prospek={'kdprovinsi':'0','alamat':''}}
$scope.$on('$ionicView.enter',function(){$scope.init_data();$scope.init_display()});$scope.init_display=function(){return!0};$scope.init_data=function(){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'build_id':spajProvider.getBuildId(),'provinsiKTPtertanggung':prospek.kdpropinsi,'statusTinggalKTPtertanggung':$scope.statustempattinggals[0].id,'statusTinggalSurattertanggung':$scope.statustempattinggals[0].id,'provinsiSurattertanggung':$scope.provinsis[0].id,'alamatKTPtertanggung':prospek.alamat,'kabupatenKTPtertanggung':$scope.kabupatens[0].id,'kodeposKTPtertanggung':'','isAlamatKTPtertanggungSama':!1,'alamatSurattertanggung':'','kabupatenSurattertanggung':'','nomorHptertanggung':prospek.telp,'nomorTelptertanggung':prospek.telp,'kodeposSurattertanggung':'','emailtertanggung':prospek.email,'isSetujuHPtertanggung':!1,'isSetujuEmailtertanggung':!1,'isPageTertanggung2Accepted':!1}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){}else{$scope.setKabupatensValues(prospek.kdpropinsi);$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId);$scope.setKabupatensValues1($scope.data.provinsiSurattertanggung);$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)}}
$scope.validateThisFormOnPageAccept=function(){$scope.messages=[];try{if($scope.data==null){$scope.messages.push({"message":"Data ERROR. Null data."})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
try{tryMe=$scope.data.statusTinggalKTPtertanggung;if($scope.data.statusTinggalKTPtertanggung=='0'){$scope.messages.push({'message':"Silahkan pilih status tempat tinggal tertanggung!"})}
tryMe=$scope.data.alamatKTPtertanggung;if($scope.data.alamatKTPtertanggung==''&&!(tryMe.match(/^\d+$/))){$scope.messages.push({'message':"Alamat KTP Harus benar!"})}
tryMe=$scope.data.provinsiKTPtertanggung;if($scope.data.provinsiKTPtertanggung=='0'){$scope.messages.push({'message':"Provinsi harus dipilih!"})}
tryMe=$scope.data.kabupatenKTPtertanggung;if($scope.data.kabupatenKTPtertanggung==''&&!(tryMe.match(/^[a-z\d\-_\s]+$/i))){$scope.messages.push({'message':"Kabupaten harus benar!"})}
tryMe=$scope.data.kodeposKTPtertanggung;if($scope.data.alamatKTPtertanggung==''&&!(tryMe.match(/^\d+$/))){}
tryMe=$scope.data.nomorHptertanggung;if($scope.data.nomorHptertanggung==''&&!(tryMe.match(/^\d+$/))){$scope.messages.push({'message':"Nomor HP harus benar!"})}
tryMe=$scope.data.nomorTelptertanggung;if($scope.data.nomorTelptertanggung==''&&!(tryMe.match(/^\d+$/))){$scope.messages.push({'message':"Nomor Telepon harus benar!"})}
tryMe=$scope.data.emailtertanggung;if((typeof $scope.data.emailtertanggung=='')||!(tryMe.match(/\S+@\S+\.\S+/))){$scope.messages.push({'message':"Email harus benar!"})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
if(!$scope.data.isAlamatKTPtertanggungSama){if($scope.data.statusTinggalSurattertanggung=='0')$scope.messages.push({'message':"Status tempat tinggal alamat surat harus dipilih!"});if($scope.data.alamatSurattertanggung=='')$scope.messages.push({'message':"Alamat surat harus benar!"});if($scope.data.provinsiSurattertanggung=='0')$scope.messages.push({'message':"Provinsi alamat surat harus benar!"});if($scope.data.kabupatenSuratPempol=='')$scope.messages.push({'message':"Kabupaten alamat surat harus benar!"})}
if($scope.messages.length>0){return $scope.messages}
return!1}
$scope.setKabupatensValues1=function(provs){$scope.kabupatens1=dataFactory.getKabupatens();kabs=$scope.kabupatens1.filter(obj=>{return(obj.kdprop==='0'||obj.kdprop===provs)});$scope.kabupatens1=kabs;$scope.data.kabupatenSurattertanggung='0'}
$scope.setKabupatensValues=function(provs){$scope.kabupatens=dataFactory.getKabupatens();kabs=$scope.kabupatens.filter(obj=>{return(obj.kdprop==='0'||obj.kdprop===provs)});$scope.kabupatens=kabs;$scope.data.kabupatenKTPtertanggung='0'}
$scope.alamatSamaDenganKTP=function(){var $alamaKTP=spajProvider.getSpajElement($scope.pageId);var $alamatSurat=this.data;if($scope.data.isAlamatKTPtertanggungSama){$alamatSurat.statusTinggalSurattertanggung=$alamaKTP.data.statusTinggalKTPtertanggung;$alamatSurat.alamatSurattertanggung=$alamaKTP.data.alamatKTPtertanggung;$alamatSurat.provinsiSurattertanggung=$alamaKTP.data.provinsiKTPtertanggung;$alamatSurat.kabupatenSurattertanggung=$alamaKTP.data.kabupatenKTPtertanggung;$alamatSurat.kodeposSurattertanggung=$alamaKTP.data.kodeposKTPtertanggung}else{$alamatSurat.statusTinggalSurattertanggung=$scope.statustempattinggals[0].id;$alamatSurat.alamatSurattertanggung="";$alamatSurat.provinsiSurattertanggung=$scope.provinsis[0].id;$alamatSurat.kabupatenSurattertanggung="";$alamatSurat.kodeposSurattertanggung=""}}
$scope.isPageAccepted=function(){if(!$scope.data.isPageTertanggung2Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.dataTertanggung23','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.moveToNextPage=function(){if($scope.validateThisFormOnPageAccept()){$scope.data.isPageTertanggung2Accepted=!1;$scope.showAlert('Validasi',spajProvider.alertMessagebuilder($scope.messages));return!1}else{if($scope.data.isPageTertanggung2Accepted){if(confirm('Langsung menuju ke halaman form isian data pendukung tertanggung?')){$state.go('aplikasiSPAJOnline.dataTertanggung33',{},{reload:!0,inherit:!1})}else{return!1}}}}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('dataTertanggung33Ctrl',['$scope','$stateParams','dataFactory','spajProvider','$ionicPopup','syncService','$store','$state',function($scope,$stateParams,dataFactory,spajProvider,$ionicPopup,syncService,$store,$state){$scope.pageId='aplikasiSPAJOnline.dataTertanggung33';$scope.messages=!1;$scope.provinsis=dataFactory.getProvinsis();$scope.genders=dataFactory.getGenders();$scope.statustempattinggals=dataFactory.getStatusTempatTinggals();$scope.pendidikans=dataFactory.getPendidikans();$scope.statuss=dataFactory.getStatusNikahs();$scope.kabupatens=dataFactory.getKabupatens();$scope.$on('$ionicView.enter',function(){$scope.init_data();$scope.init_display()});try{$scope.tglLahirTertanggungTambahan1=new Date('10/10/1990');$scope.tglLahirTertanggungTambahan2=new Date('10/10/1990');$scope.tglLahirTertanggungTambahan3=new Date('10/10/1990');$scope.tglLahirTertanggungTambahan4=new Date('10/10/1990')}catch(e){$scope.tglLahirTertanggungTambahan1='';$scope.tglLahirTertanggungTambahan2='';$scope.tglLahirTertanggungTambahan3='';$scope.tglLahirTertanggungTambahan4=''}
$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.jmlTertanggungs=dataFactory.getJmlTertanggungTambahan();$scope.setjmlTertanggung=function(xx){$scope.data.jmlTertanggungTambahan=xx;$scope.data.isAdaTertanggungTambahan1=!1;(xx>0)?$scope.data.isAdaTertanggungTambahan1=true:$scope.data.isAdaTertanggungTambahan=!1}
$scope.setKabupatensValues=function(provs){$scope.kabupatens=dataFactory.getKabupatens();kabs=$scope.kabupatens.filter(obj=>{return(obj.kdprop==='0'||obj.kdprop===provs)});$scope.kabupatens=kabs;$scope.data.kabupatenSuratSaudaraTertanggung='0'}
$scope.init_display=function(){return!0};$scope.init_data=function(){if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'statusPernikahanTertanggung':$scope.statuss[0].id,'pendidikanTertanggung':$scope.pendidikans[0].id,'jmlTertanggungTambahan':$scope.jmlTertanggungs[0].id,'tinggiBadanTertanggung':'','beratBadanTertanggung':'','ibuKandungTertanggung':'','namaSaudaraTertanggung':'','alamatSuratSaudaraTertanggung':'','provinsiSuratSaudaraTertanggung':$scope.provinsis[0].id,'kabupatenSuratSaudaraTertanggung':'','kodeposSuratSaudaraTertanggung':'','noTelpSaudaraTertanggung':'','noHpSaudaraTertanggung':'','isAdaTertanggungTambahan1':!1,'hubunganTT1DenganTTU':$scope.hubunganKeluargas[0].id,'jenisKelaminTertanggungTambahan1':$scope.genders[0].id,'namaTertanggungTambahan1':'','noKtpTertanggungTambahan1':'','tglLahirTertanggungTambahan1':$scope.tglLahirTertanggungTambahan1,'tempatLahirTertanggungTambahan1':'','tinggiBadanTertanggungTambahan1':'','beratBadanTertanggungTambahan1':'','isTertanggungTambahan1Bekerja':!1,'namaKantorTertanggungTambahan1':'','alamatKantorTertanggungTambahan1':'','hubunganTT2DenganTTU':$scope.hubunganKeluargas[0].id,'jenisKelaminTertanggungTambahan2':$scope.genders[0].id,'namaTertanggungTambahan2':'','noKtpTertanggungTambahan2':'','tglLahirTertanggungTambahan2':$scope.tglLahirTertanggungTambahan2,'tempatLahirTertanggungTambahan2':'','tinggiBadanTertanggungTambahan2':'','beratBadanTertanggungTambahan2':'','isTertanggungTambahan2Bekerja':!1,'namaKantorTertanggungTambahan2':'','alamatKantorTertanggungTambahan2':'','hubunganTT3DenganTTU':$scope.hubunganKeluargas[0].id,'jenisKelaminTertanggungTambahan3':$scope.genders[0].id,'namaTertanggungTambahan3':'','noKtpTertanggungTambahan3':'','tglLahirTertanggungTambahan3':$scope.tglLahirTertanggungTambahan3,'tempatLahirTertanggungTambahan3':'','tinggiBadanTertanggungTambahan3':'','beratBadanTertanggungTambahan3':'','isTertanggungTambahan3Bekerja':!1,'namaKantorTertanggungTambahan3':'','alamatKantorTertanggungTambahan3':'','hubunganTT4DenganTTU':$scope.hubunganKeluargas[0].id,'jenisKelaminTertanggungTambahan4':$scope.genders[0].id,'namaTertanggungTambahan4':'','noKtpTertanggungTambahan4':'','tglLahirTertanggungTambahan4':$scope.tglLahirTertanggungTambahan4,'tempatLahirTertanggungTambahan4':'','tinggiBadanTertanggungTambahan4':'','beratBadanTertanggungTambahan4':'','isTertanggungTambahan4Bekerja':!1,'namaKantorTertanggungTambahan4':'','alamatKantorTertanggungTambahan4':'','isPageTertanggung3Accepted':!1,}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId);try{$scope.data.tglLahirTertanggungTambahan1=new Date($scope.data.tglLahirTertanggungTambahan1);$scope.data.tglLahirTertanggungTambahan2=new Date($scope.data.tglLahirTertanggungTambahan2);$scope.data.tglLahirTertanggungTambahan3=new Date($scope.data.tglLahirTertanggungTambahan3);$scope.data.tglLahirTertanggungTambahan4=new Date($scope.data.tglLahirTertanggungTambahan4)}catch(e){}}}
$scope.setTT=function(status){$scope.data.isAdaTertanggungTambahan1=status;if(status==!1){$scope.data.jmlTertanggungTambahan='0'}else{}}
$scope.saveDataSpaj=function(){var $formdata={'pageId':$scope.pageId,'data':$scope.data};try{$scope.data.tglLahirTertanggungTambahan1=new Date($scope.data.tglLahirTertanggungTambahan1);$scope.data.tglLahirTertanggungTambahan2=new Date($scope.data.tglLahirTertanggungTambahan2);$scope.data.tglLahirTertanggungTambahan3=new Date($scope.data.tglLahirTertanggungTambahan3);$scope.data.tglLahirTertanggungTambahan4=new Date($scope.data.tglLahirTertanggungTambahan4)}catch(e){console.log(e)}
spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.moveToNextPage=function(){if($scope.validateThisFormOnPageAccept()){$scope.showAlert('Validasi',spajProvider.alertMessagebuilder($scope.messages));$scope.data.isPageTertanggung3Accepted=!1;return!1}else{if($scope.data.isPageTertanggung3Accepted){if(confirm('Langsung menuju ke halaman form isian pekerjaan tertanggung?')){$state.go('aplikasiSPAJOnline.pekerjaanTertanggung',{},{reload:!0,inherit:!1})}else{return!1}}}}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){$scope.init_data()}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)}
$scope.isPageAccepted=function(){if(!$scope.data.isPageTertanggung3Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})};$scope.validateThisFormOnPageAccept=function(){$scope.messages=[];try{if($scope.data==null){$scope.messages.push({"message":"Data ERROR. Null data."})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
try{tryMe=$scope.data.tinggiBadanTertanggung;if(($scope.data.tinggiBadanTertanggung==null)){$scope.messages.push({'message':"Tinggi badan harus benar! (50cm - 250cm)"})}
tryMe=$scope.data.beratBadanTertanggung;if($scope.data.beratBadanTertanggung==null){$scope.messages.push({'message':"Berat badan harus benar! (10kg - 300kg)"})}
tryMe=$scope.data.ibuKandungTertanggung;if($scope.data.ibuKandungTertanggung==''&&!(tryMe.match(/^[A-Za-z]+$/))){$scope.messages.push({'message':"Nama ibu kandung harus benar! (tidak boleh kosong)"})}
tryMe=$scope.data.pendidikanTertanggung;if('0'==tryMe){$scope.messages.push({'message':"Silahkan pilih Pendidikan Terakhir"})}
tryMe=$scope.data.statusPernikahanTertanggung;if('0'==tryMe){$scope.messages.push({'message':"Silahkan pilih Status Pernikahan"})}
if($scope.data.isAdaTertanggungTambahan1){if($scope.data.noKtpTertanggungTambahan1=='')$scope.messages.push({'message':"Nomor KTP tertanggung tambahan 1 harus benar! (16 digit)"});if($scope.data.tglLahirTertanggungTambahan1=='')$scope.messages.push({'message':"Tanggal lahir tertanggung tambahan 1 harus benar!"});if($scope.data.jenisKelaminTertanggungTambahan1=='0')$scope.messages.push({'message':"Jenis Kelamin tertanggung tambahan 1 harus benar!"});if($scope.data.tempatLahirTertanggungTambahan1=='')$scope.messages.push({'message':"Tempat lahir tertanggung tambahan 1 harus benar! (tidak boleh kosong)"});if($scope.data.namaTertanggungTambahan1=='')$scope.messages.push({'message':"Nama tertanggung tambahan harus 1 benar! (tidak boleh kosong)"});if($scope.data.tinggiBadanTertanggungTambahan1==null)$scope.messages.push({'message':"Tinggi tertanggung tambahan 1 harus benar! (50cm - 250cm)"});if($scope.data.beratBadanTertanggungTambahan1==null)$scope.messages.push({'message':"Berat Badan tertanggung tambahan 1 harus benar! (10kg - 300kg)"})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
if($scope.messages.length>0){return $scope.messages}
return!1}}]).controller('dataPemegangPolis13Ctrl',['$state','$scope','$stateParams','dataFactory','spajProvider','$ionicPopup','syncService','$store',function($state,$scope,$stateParams,dataFactory,spajProvider,$ionicPopup,syncService,$store){$scope.genders=dataFactory.getGenders();$scope.agamas=dataFactory.getAgamas();$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.data={'imageKTPpempol':null}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.$on('$ionicView.loaded',function(){});$scope.changeImage=function(){spajProvider.takePict(this,'canvasKTPpempol');$scope.data.imageKTPpempol=spajProvider.getImageBase64('canvasKTPpempol','jpg')}
$scope.saveDataSpaj=function(){$scope.data.imageKTPpempol=spajProvider.getImageBase64('canvasKTPpempol','jpg');var $formdata={'pageId':'aplikasiSPAJOnline.dataPemegangPolis13','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis13')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'agamaPempol':$scope.agamas[0].id,'jenkelPempol':$scope.genders[0].id,'isKTPPempolAllAge':!1,'isPagePempol1Accepted':!1,'namaLengkapPempol':'','nomorKTPPempol':'','tglLahirPempol':'10/10/1990','nomorNPWPPempol':'','masaBerlakuKTPPempol':'','imageKTPpempol':null,'isTertanggungPempol':!1,'isPempolPembayarPremi':!0}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis13');try{decodedImage=spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.data.imageKTPpempol))}catch(e){console.log(e)}
$scope.data.tglLahirPempol=new Date($scope.data.tglLahirPempol);spajProvider.putImageTo('canvasKTPpempol',decodedImage)}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})};$scope.pempolAdalahTertanggung=function(){var $tertanggung=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13');var $tertanggungPage2=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung23');var $tertanggungPage3=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33');var $tertanggungPekerjaan=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.pekerjaanTertanggung');var $pempol=this.data;var $pgTertanggung2=null;var $pgTertanggung3=null;if($scope.data.isTertanggungPempol&&$tertanggung!=null){$pempol.namaLengkapPempol=$tertanggung.namaLengkapTertanggung;$pempol.nomorKTPPempol=$tertanggung.nomorKTPTertanggung;$pempol.nomorNPWPPempol=$tertanggung.nomorNPWPTertanggung;$pempol.jenkelPempol=$tertanggung.jenkelTertanggung;$pempol.agamaPempol=$tertanggung.agamaTertanggung;$pempol.imageKTPpempol=$tertanggung.imageKTPTertanggung;decodedImage=spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($pempol.imageKTPpempol));spajProvider.putImageTo('canvasKTPpempol',decodedImage);$pempol.isPagePempol1Accepted=!1;$pempol.isTertanggungPempol=!0;$pempol.tglLahirPempol=new Date($tertanggung.tglLahirTertanggung)
$pgTertanggung2={'spaj_guid':spajProvider.getSpajGUID(),'provinsiKTPPempol':$tertanggungPage2.provinsiKTPtertanggung,'provinsiSuratPempol':$tertanggungPage2.provinsiSurattertanggung,'statusTinggalKTPPempol':$tertanggungPage2.statusTinggalKTPtertanggung,'statusTinggalSuratPempol':$tertanggungPage2.statusTinggalSurattertanggung,'alamatKTPPempol':$tertanggungPage2.alamatKTPtertanggung,'tglLahirPempol':$scope.tglLahirPempol,'kabupatenKTPPempol':$tertanggungPage2.kabupatenKTPtertanggung,'kodeposKTPPempol':$tertanggungPage2.kodeposKTPtertanggung,'isAlamatKTPPempolSama':$tertanggungPage2.isAlamatKTPtertanggungSama,'alamatSuratPempol':$tertanggungPage2.alamatSurattertanggung,'kabupatenSuratPempol':$tertanggungPage2.kabupatenSurattertanggung,'kodeposSuratPempol':$tertanggungPage2.kodeposSurattertanggung,'nomorHpPempol':$tertanggungPage2.nomorHptertanggung,'nomorTelpPempol':$tertanggungPage2.nomorTelptertanggung,'emailPempol':$tertanggungPage2.emailtertanggung,'isSetujuHPPempol':$tertanggungPage2.isSetujuHPtertanggung,'isSetujuEmailPempol':$tertanggungPage2.isSetujuEmailtertanggung,'isPagePempol2Accepted':!1}
$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+'aplikasiSPAJOnline.dataPemegangPolis23',$pgTertanggung2);$pgTertanggung3={'spaj_guid':spajProvider.getSpajGUID(),'provinsiSuratTakSerumahPempol':$tertanggungPage3.provinsiSuratSaudaraTertanggung,'statusNikahPempol':$tertanggungPage3.statusPernikahanTertanggung,'pendidikanPempol':$tertanggungPage3.pendidikanTertanggung,'tinggiBadanPempol':$tertanggungPage3.tinggiBadanTertanggung,'beratBadanPempol':$tertanggungPage3.beratBadanTertanggung,'namaIbuPempol':$tertanggungPage3.ibuKandungTertanggung,'namaSaudaraTakSerumahPempol':$tertanggungPage3.namaSaudaraTertanggung,'alamatSuratTakSerumahPempol':$tertanggungPage3.alamatSuratSaudaraTertanggung,'kabupatenTakSerumahPempol':$tertanggungPage3.kabupatenSuratSaudaraTertanggung,'kodeposSuratSaudaraTertanggung':$tertanggungPage3.kodeposSuratSaudaraTertanggung,'kodeposTakSerumahPempol':$tertanggungPage3.kodeposSuratSaudaraTertanggung,'noHPTakSerumah':$tertanggungPage3.noHpSaudaraTertanggung,'noTelTakSerumah':$tertanggungPage3.noTelpSaudaraTertanggung,'isPagePempol3Accepted':!1,'isTertanggungPempol':!0}
$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+'aplikasiSPAJOnline.dataPemegangPolis33',$pgTertanggung3);$pgPekerjaanPempol={'spaj_guid':spajProvider.getSpajGUID(),'jenisPerusahaanPempol':$tertanggungPekerjaan.jenisPerusahaanTertanggung,'pekerjaanPempol':$tertanggungPekerjaan.pekerjaanTertanggung,'pangkatPempol':$tertanggungPekerjaan.pangkatTertanggung,'klasifikasiPekerjaanPempol':$tertanggungPekerjaan.klasifikasiPekerjaanTertanggung,'rangeGajiPempol':$tertanggungPekerjaan.rangeGajiTertanggung,'rangeGajiPempolJmlLainnya':$tertanggungPekerjaan.rangeGajiTertanggungJmlLainnya,'rangePendapatanPempol':$tertanggungPekerjaan.rangePendapatanTertanggung,'rangePendapatanPasangan':$tertanggungPekerjaan.rangePendapatanPasangan,'rangePendapatanPasanganLainnya':'','rangeHasilInvestasi':$tertanggungPekerjaan.rangeHasilInvestasi,'rangeHasilInvestasiLainnya':'','rangeBisnis':$tertanggungPekerjaan.rangeBisnis,'rangeBisnisLainnya':'','rangeBonus':$tertanggungPekerjaan.rangeBonus,'paymentBankNameLainnya':'','rangeBonusLainnya':'','namaPerusahaanPempol':$tertanggungPekerjaan.namaPerusahaanTertanggung,'alamatPerusahaanPempol':$tertanggungPekerjaan.alamatPerusahaanTertanggung,'kodeposPerusahaanPempol':$tertanggungPekerjaan.kodeposPerusahaanTertanggung,'nomorTeleponPerusahaanPempol':$tertanggungPekerjaan.nomorTeleponPerusahaanTertanggung,'nomorEkstensiPerusahaanPempol':$tertanggungPekerjaan.nomorEkstensiPerusahaanTertanggung,'isPagePekerjaanPempol1Accepted':'','pemilikWirausahaPempol':$tertanggungPekerjaan.pemilikWirausahaTertanggung,'bidangWirausahaPempol':$tertanggungPekerjaan.bidangWirausahaTertanggung,'namaWirausahaPempol':$tertanggungPekerjaan.namaWirausahaTertanggung,'alamatWirausahaPempol':$tertanggungPekerjaan.alamatWirausahaTertanggung}
$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+'aplikasiSPAJOnline.pekerjaanPemegangPolis',$pgPekerjaanPempol);this.saveDataSpaj()}else{$pempol.namaLengkapPempol='';$pempol.tglLahirPempol='';$pempol.nomorKTPPempol='';$pempol.nomorNPWPPempol='';$pempol.jenkelPempol='';$pempol.agamaPempol='';$pempol.imageKTPpempol='';$pempol.isPagePempol1Accepted=!1;$pempol.isTertanggungPempol=!1;$pgTertanggung2={'spaj_guid':spajProvider.getSpajGUID(),'provinsiKTPPempol':'0','provinsiSuratPempol':'0','statusTinggalKTPPempol':'0','statusTinggalSuratPempol':'0','tglLahirPempol':'','alamatKTPPempol':'','kabupatenKTPPempol':'','kodeposKTPPempol':'','isAlamatKTPPempolSama':!1,'alamatSuratPempol':'','kabupatenSuratPempol':'','kodeposSuratPempol':'','nomorHpPempol':'','nomorTelpPempol':'','emailPempol':'','isSetujuHPPempol':!1,'isSetujuEmailPempol':!1,'isPagePempol2Accepted':!1}
$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+'aplikasiSPAJOnline.dataPemegangPolis23',$pgTertanggung2);$pgTertanggung3={'spaj_guid':spajProvider.getSpajGUID(),'provinsiSuratTakSerumahPempol':'0','statusNikahPempol':'0','pendidikanPempol':'','tinggiBadanPempol':'','beratBadanPempol':'','namaIbuPempol':'','namaTakSerumahPempol':'','alamatSuratTakSerumahPempol':'','kabupatenTakSerumahPempol':'','kodeposSuratSaudaraTertanggung':'','kodeposTakSerumahPempol':'','noHPTakSerumah':'','noTelTakSerumah':'','isPagePempol3Accepted':!1,'isTertanggungPempol':!1}
$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+'aplikasiSPAJOnline.dataPemegangPolis33',$pgTertanggung3);this.saveDataSpaj()}}
$scope.isPageAccepted=function(){if(!$scope.data.isPagePempol1Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.moveToNextPage=function(){if($scope.data.isPagePempol1Accepted){if(confirm('Langsung menuju ke halaman isian form tempat tinggal Pemegang Polis?')){$state.go('aplikasiSPAJOnline.dataPemegangPolis23',{},{reload:!0,inherit:!1})}else{return!1}}}}]).controller('dataPemegangPolis23Ctrl',['$state','$scope','$stateParams','dataFactory','spajProvider','$ionicPopup','syncService','$store',function($state,$scope,$stateParams,dataFactory,spajProvider,$ionicPopup,syncService,$store){$scope.provinsis=dataFactory.getProvinsis();$scope.kabupatens=dataFactory.getKabupatens();$scope.kabupatens1=dataFactory.getKabupatens();$scope.statustempattinggals=dataFactory.getStatusTempatTinggals();$scope.isPageAccepted=function(){if(!$scope.data.isPagePempol2Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.setKabupatensValues=function(provs){try{$scope.kabupatens=dataFactory.getKabupatens();kabs=$scope.kabupatens.filter(obj=>{return(obj.kdprop==='0'||obj.kdprop===provs)});$scope.kabupatens=kabs;$scope.data.kabupatenKTPPempol='0'}catch(e){}}
$scope.setKabupatensValues1=function(provs){$scope.kabupatens1=dataFactory.getKabupatens();kabs=$scope.kabupatens1.filter(obj=>{return(obj.kdprop==='0'||obj.kdprop===provs)});$scope.kabupatens1=kabs;$scope.data.kabupatenSuratPempol='0'}
$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.dataPemegangPolis23','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.moveToNextPage=function(){if($scope.data.isPagePempol2Accepted){if(confirm('Langsung menuju ke halaman isian form pendukung Pemegang Polis?')){$state.go('aplikasiSPAJOnline.dataPemegangPolis33',{},{reload:!0,inherit:!1})}else{return!1}}}
prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){prospek={'kdprovinsi':'0','alamat':''}}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis23')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'provinsiKTPPempol':$scope.provinsis[0].id,'kabupatenKTPPempol':$scope.kabupatens[0].id,'provinsiSuratPempol':$scope.provinsis[0].id,'statusTinggalKTPPempol':$scope.statustempattinggals[0].id,'statusTinggalSuratPempol':$scope.statustempattinggals[0].id,'alamatKTPPempol':'','kodeposKTPPempol':'','isAlamatKTPPempolSama':!1,'alamatSuratPempol':'','kabupatenSuratPempol':'','kodeposSuratPempol':'','nomorHpPempol':'','nomorTelpPempol':'','emailPempol':'','isSetujuHPPempol':!1,'isSetujuEmailPempol':!1,'isPagePempol2Accepted':!1}}else{$scope.setKabupatensValues(prospek.kdpropinsi);$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis23');$scope.setKabupatensValues1($scope.data.provinsiSuratPempol);$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis23')}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('dataPemegangPolis33Ctrl',['$scope','$state','$stateParams','dataFactory','spajProvider','$ionicPopup','$ionicModal','syncService','$store',function($scope,$state,$stateParams,dataFactory,spajProvider,$ionicPopup,$ionicModal,syncService,$store){$scope.provinsis=dataFactory.getProvinsis();$scope.statustempattinggals=dataFactory.getStatusTempatTinggals();$scope.pendidikans=dataFactory.getPendidikans();$scope.isTertanggungPempol=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis13').isTertanggungPempol;$scope.moveToNextPage=function(){if($scope.data.isPagePempol3Accepted){if(confirm('Langsung menuju ke halaman persetujuan eSPAJ?')){$state.go('aplikasiSPAJOnline.lembarPersetujuan',{},{reload:!0,inherit:!1})}else{return!1}}}
$scope.isPageAccepted=function(){if(!$scope.data.isPagePempol33Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}
$scope.statuss=dataFactory.getStatusNikahs();$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.dataPemegangPolis33','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis33')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'provinsiSuratTakSerumahPempol':$scope.provinsis[0].id,'statusNikahPempol':$scope.statuss[0].id,'pendidikanPempol':$scope.pendidikans[0].id,'tinggiBadanPempol':'','beratBadanPempol':'','namaIbuPempol':'','namaSaudaraTakSerumahPempol':'','alamatSuratTakSerumahPempol':'','kabupatenTakSerumahPempol':'','kodeposSuratSaudaraTertanggung':'','kodeposTakSerumahPempol':'','noHPTakSerumah':'','noTelTakSerumah':'','isPagePempol3Accepted':!1,'isTertanggungPempol':!1,}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataPemegangPolis33')}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('pekerjaanTertanggungCtrl',['$scope','$state','$stateParams','dataFactory','spajProvider','$ionicPopup','$store',function($scope,$state,$stateParams,dataFactory,spajProvider,$ionicPopup,$store){$scope.pekerjaans=dataFactory.getPekerjaans();$scope.pangkats=dataFactory.getPangkats();$scope.kelaspekerjaans=dataFactory.getKelasPekerjaans();$scope.jenisperusahaans=dataFactory.getJenisPerusahaans();$scope.rangegajitertanggungs=dataFactory.getRangeGajis();$scope.messages=!1;$scope.pageId='aplikasiSPAJOnline.pekerjaanTertanggung';$scope.$on('$ionicView.enter',function(){$scope.init_data();$scope.init_display()});$scope.init_display=function(){return!0};prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){}
$scope.init_data=function(){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'jenisPerusahaanTertanggung':$scope.jenisperusahaans[0].id,'pekerjaanTertanggung':$scope.pekerjaans[0].id,'pangkatTertanggung':$scope.pangkats[0].id,'klasifikasiPekerjaanTertanggung':'','rangeGajiTertanggung':$scope.rangegajitertanggungs[1].id,'rangePendapatanTertanggung':$scope.rangegajitertanggungs[2].id,'rangePendapatanPasangan':$scope.rangegajitertanggungs[2].id,'rangeHasilInvestasi':$scope.rangegajitertanggungs[2].id,'rangeBisnis':$scope.rangegajitertanggungs[2].id,'rangeBonus':$scope.rangegajitertanggungs[2].id,'rangePendapatanTertanggung':$scope.rangegajitertanggungs[2].id,'sumberPendapatanLainnya':'','namaPerusahaanTertanggung':'','alamatPerusahaanTertanggung':'','kodeposPerusahaanTertanggung':'','nomorTeleponPerusahaanTertanggung':'','nomorEkstensiPerusahaanTertanggung':'','isPagePekerjaanTertanggung1Accepted':'','pemilikWirausahaTertanggung':'','bidangWirausahaTertanggung':'','namaWirausahaTertanggung':'','alamatWirausahaTertanggung':'','rangePendapatanTertanggungLainnya':'','rangeGajiTertanggungJmlLainnya':prospek.penghasilan}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)}}
$scope.validateThisFormOnPageAccept=function(){$scope.messages=[];try{if($scope.data==null){$scope.messages.push({"message":"Data ERROR. Null data."})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
try{tryMe=$scope.data.jenisPerusahaanTertanggung;if(tryMe=='0'){$scope.messages.push({'message':"Silahkan isi jenis perusahaan!"})}
tryMe=$scope.data.namaPerusahaanTertanggung;if(tryMe==''){$scope.messages.push({'message':"Nama Perusahaan harus benar!"})}
tryMe=$scope.data.pekerjaanTertanggung;if('wirausaha'==tryMe){}
tryMe=$scope.data.pangkatTertanggung;if($scope.data.pangkatTertanggung=='0'){}
tryMe=$scope.data.rangeGajiTertanggung;if($scope.data.rangeGajiTertanggung=='0'){}
tryMe=$scope.data.rangePendapatanPasangan;if('0'==tryMe){}
tryMe=$scope.data.rangeHasilInvestasi;if('0'==tryMe){}
tryMe=$scope.data.rangeBisnis;if('0'==tryMe){}
tryMe=$scope.data.rangePendapatanTertanggung;if('0'==tryMe){}
if('4'==tryMe){}
tryMe=$scope.data.jenisPerusahaanTertanggung;if('0'==tryMe){}
tryMe=$scope.data.jenisPerusahaanTertanggung;if('0'==tryMe){}
tryMe=$scope.data.namaPerusahaanTertanggung;if(''==tryMe){}
tryMe=$scope.data.alamatPerusahaanTertanggung;if(''==tryMe){}
tryMe=$scope.data.kodeposPerusahaanTertanggung;if(''==tryMe){}
tryMe=$scope.data.nomorTeleponPerusahaanTertanggung;if(''==tryMe){}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
if($scope.messages.length>0){return $scope.messages}
return!1}
$scope.saveDataSpaj=function(){var $formdata={'pageId':$scope.pageId,'data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.getKelasPekerjaan=function(idpekerjaan){var dtpek=null;for(i=1;i<$scope.pekerjaans.length;i++){if(idpekerjaan==$scope.pekerjaans[i].id){dtpek=$scope.pekerjaans[i].kelas}}
$scope.data.klasifikasiPekerjaanTertanggung=dtpek;return dtpek}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})};$scope.moveToNextPage=function(){if($scope.validateThisFormOnPageAccept()){$scope.showAlert('Validasi',spajProvider.alertMessagebuilder($scope.messages));$scope.data.isPagePekerjaanTertanggung1Accepted=!1}else{if($scope.data.isPagePekerjaanTertanggung1Accepted){if(confirm('Langsung menuju ke halaman form isian Produk dan Penerima Manfaat?')){$state.go('aplikasiSPAJOnline.produkDanManfaat12',{},{reload:!1,inherit:!1})}else{return!1}}}}}]).controller('pekerjaanPemegangPolisCtrl',['$scope','$stateParams','dataFactory','spajProvider','$ionicPopup','$store',function($scope,$stateParams,dataFactory,spajProvider,$ionicPopup,$store){$scope.pekerjaans=dataFactory.getPekerjaans();$scope.pangkats=dataFactory.getPangkats();$scope.kelaspekerjaans=dataFactory.getKelasPekerjaans();$scope.rangegajiPempols=dataFactory.getRangeGajis();$scope.jenisperusahaans=dataFactory.getJenisPerusahaans();$scope.getKelasPekerjaan=function(idpekerjaan){var dtpek=null;for(i=1;i<$scope.pekerjaans.length;i++){if(idpekerjaan==$scope.pekerjaans[i].id){dtpek=$scope.pekerjaans[i].kelas}}
$scope.data.klasifikasiPekerjaanPempol=dtpek;return dtpek}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.pekerjaanPemegangPolis','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.pekerjaanPemegangPolis')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'jenisPerusahaanPempol':$scope.jenisperusahaans[0].id,'pekerjaanPempol':$scope.pekerjaans[0].id,'pangkatPempol':$scope.pangkats[0].id,'klasifikasiPekerjaanPempol':$scope.kelaspekerjaans[0].id,'rangeGajiPempol':$scope.rangegajiPempols[0].id,'rangePendapatanPempol':$scope.rangegajiPempols[0].id,'rangePendapatanPasangan':$scope.rangegajiPempols[0].id,'rangePendapatanPasanganLainnya':'','rangeHasilInvestasi':$scope.rangegajiPempols[0].id,'rangeHasilInvestasiLainnya':'','rangeGajiPempolJmlLainnya':'','rangeBisnis':$scope.rangegajiPempols[0].id,'rangeBisnisLainnya':'','rangeBonus':$scope.rangegajiPempols[0].id,'paymentBankNameLainnya':'','rangeBonusLainnya':'','namaPerusahaanPempol':'','alamatPerusahaanPempol':'','kodeposPerusahaanPempol':'','nomorTeleponPerusahaanPempol':'','nomorEkstensiPerusahaanPempol':'','isPagePekerjaanPempol1Accepted':'','pemilikWirausahaPempol':'','bidangWirausahaPempol':'','namaWirausahaPempol':'','alamatWirausahaPempol':''}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.pekerjaanPemegangPolis')}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('produkDanManfaat12Ctrl',['$state','$scope','$stateParams','spajProvider','dataFactory','$store','$ionicPopup',function($state,$scope,$stateParams,spajProvider,dataFactory,$store,$ionicPopup){$scope.jenisAsuransis=dataFactory.getJenisAsuransis();$scope.caraBayars=dataFactory.getCaraBayars();$scope.isShowRider=!1;$scope.bayarBerikutnyas=dataFactory.getBayarBerikutnyas();$scope.jenisJsProteksiKeluargas=dataFactory.getJenisJsProteksiKeluargas();$scope.pctUnitlinkGuardians=dataFactory.getPctUnitlinkGuardians();$scope.jenisFunds=dataFactory.getjenisFunds();$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!1;$scope.isShowhospitalCP=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.genders=dataFactory.getGenders();$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.pageId='aplikasiSPAJOnline.produkDanManfaat12';$scope.$on('$ionicView.enter',function(){$scope.init_data();$scope.init_display();$scope.getRiderGroup($scope.data.jenisAsuransi);$scope.setProspekRider()});prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){prospek={'kdprovinsi':'0','alamat':''}}
$scope.init_data=function(){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'jenisAsuransi':prospek.kd_produk,'caraBayar':(prospek.kd_produk=='JL4BLN'||prospek.kd_produk=='JL4BLN_')?"M":(prospek.kd_produk=='JSSPOA'||prospek.kd_produk=='JL4XN')?"X":"1",'bayarPremiSelanjutnya':$scope.bayarBerikutnyas[0].id,'pctUnitlinkGuardian':$scope.pctUnitlinkGuardians[0].id,'isPremi':'','isTujuanProteksi':!1,'isTujuanTabungan':!1,'isTujuanPendidikan':!1,'isTujuanInvestasi':!1,'isTujuanPensiun':!1,'isTujuanLainnya':!1,'tujuanAsuransiLainnya':'','jenisJsProteksiKeluarga':$scope.jenisJsProteksiKeluargas[0].id,'unitPasarUang':0,'pendapatanTetap':0,'berimbang':0,'ekuitas':0,'totalPersenUnitLink':0,'hospitalCP':!1,'hcpTypeSelect':!1,'isRiderLainnya':!1,'namaRiderLainnya':'','riderLainnyaPremi':'','isTermRider':!1,'isADB':prospek.IS_ADB,'isADDB':prospek.IS_ADDB,'isTPD':prospek.IS_TPD,'isCI53':prospek.IS_CI,'isPBD':prospek.IS_PAYOR_DEATH,'isPBC151':!1,'isPBTPD':prospek.IS_PAYOR_TPD,'isSPD':prospek.IS_SPOUSE_DEATH,'isSPCI51':!1,'isSPTBD':prospek.IS_SPOUSE_TPD,'isWPCI51':prospek.IS_WAIVER_CI,'isWPTPD':prospek.IS_WAIVER_TPD,'masaBayarPremi':(prospek.kd_produk=='JL4BLN'||prospek.kd_produk=='JL4BLN_'||prospek.kd_produk=='JL4XN')?"99":(prospek.kd_produk=='JSDMPPN')?"10":"5",'premi':prospek.jumlah_premi,'uangAsuransi':prospek.jua,'jangkaWaktuAsuransi':(prospek.kd_produk=='JL4BLN'||prospek.kd_produk=='JL4BLN_'||prospek.kd_produk=='JL4XN')?"99":(prospek.kd_produk=='JSDMPPN')?"10":"5",'nomorRekening':'','namaRekening':prospek.nama,'paymentBankName':'','isPageProdukManfaat1Accepted':!1,'premiBerkala':prospek.premi_berkala,'topupBerkala':prospek.topup_berkala,'topupSekaligus':prospek.topup_sekaligus,'alokasiDana':prospek.kode_alokasi,'adbUA':prospek.ADB,'addbUA':prospek.ADDB,'CI53UA':prospek.CI,'WPCI51UA':prospek.WAIVER_CI,'WPTPDUA':prospek.WAIVER_TPD,'pempolIsPembayarPremi':!1,}
$scope.selectUnitInvestasi($scope.data.alokasiDana);if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)}}
$scope.setProspekRider=function(){prospek=!1;try{$pros=JSON.parse(spajProvider.getProspekData());prospek=$pros.find(obj=>{return obj.build_id===spajProvider.getBuildId()})}catch(e){console.log(e)}
try{$scope.data.isADB=prospek.IS_ADB;$scope.data.adbUA=parseInt(prospek.ADB);$scope.data.isADDB=prospek.IS_ADDB;$scope.data.addbUA=parseInt(prospek.ADDB);$scope.data.isTPD=prospek.IS_TPD;$scope.data.isCI53=prospek.IS_CI;$scope.data.CI53UA=prospek.CI;$scope.data.isPBD=prospek.IS_PAYOR_DEATH;$scope.data.PBD=parseInt(prospek.PAYOR_DEATH);$scope.data.isPBC151=prospek.IS_PAYOR_CI;$scope.data.PBC151=parseInt(prospek.PAYOR_CI);$scope.data.isPBTPD=prospek.IS_PAYOR_TPD;$scope.data.isSPD=prospek.IS_SPOUSE_DEATH;$scope.data.isSPCI51=prospek.IS_SPOUSE_CI;$scope.data.isSPTBD=prospek.IS_SPOUSE_TPD;$scope.data.isWPCI51=prospek.IS_WAIVER_CI;$scope.data.WPCI51UA=parseInt(prospek.WAIVER_CI);$scope.data.isWPTPD=prospek.IS_WAIVER_TPD;$scope.data.WPTPDUA=parseInt(prospek.WAIVER_TPD);$scope.data.SPOUSE_TPDUA=parseInt(prospek.SPOUSE_TPD);$scope.data.SPOUSE_DEATHUA=parseInt(prospek.SPOUSE_DEATH)}catch(e){}}
$scope.setCaraBayarValues=function(kdproduk){$scope.caraBayars=dataFactory.getCaraBayars();cabay=$scope.caraBayars.filter(obj=>{return(obj.kdproduk==='0'||obj.kdproduk===kdproduk)});$scope.caraBayars=cabay;$scope.data.caraBayars=kdproduk}
$scope.selectUnitInvestasi=function(x){$scope.data.unitPasarUang=0;$scope.data.pendapatanTetap=0;$scope.data.berimbang=0;$scope.data.ekuitas=0;switch(x){case '1':$scope.data.unitPasarUang=100;break;case '2':$scope.data.pendapatanTetap=100;break;case '3':$scope.data.berimbang=100;break;case '4':$scope.data.ekuitas=100;break;default:}}
$scope.init_display=function(){}
$scope.saveDataSpaj=function(){var $formdata={'pageId':$scope.pageId,'data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.caraBayarFix=function(jenisAsuransi){if(jenisAsuransi=="GUARDIAN"||jenisAsuransi=="PROIDAMAN"||jenisAsuransi=="UNITLINK"){$scope.data.caraBayar="sekaligus";$scope.data.masaBayarPremi='X'}}
$scope.pctTahun=function(jenisGuardian){$scope.data.masaBayarPremi='X';$scope.data.jangkaWaktuAsuransi=jenisGuardian.substr(jenisGuardian.length-1)}
$scope.riderGroup=0;$scope.getRiderGroup=function(produkid){for(i=1;i<$scope.jenisAsuransis.length;i++){if(produkid==$scope.jenisAsuransis[i].id){$scope.riderGroup=$scope.jenisAsuransis[i].gruprider}}
this.setRiderDisplay($scope.riderGroup);return $scope.riderGroup}
$scope.setRiderDisplay=function(riderGroup){if(riderGroup>0){$scope.isShowRider=!0}else{$scope.isShowRider=!1}
riderGroup=parseInt(riderGroup);switch(riderGroup){case 1:$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;$scope.isShowhospitalCP=!0;$scope.isShowTPD=!0;$scope.isShowCI53=!0;break;case 2:$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!1;$scope.isShowhospitalCP=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;$scope.isShowCI53=!0;break;case 3:$scope.isShowTermRider=!0;$scope.isShowADB=!0;$scope.isShowADDB=!0;$scope.isShowTPD=!0;$scope.isShowCI53=!0;$scope.isShowhospitalCP=!0;$scope.isShowPBD=!0;$scope.isShowPBC151=!0;$scope.isShowPBTPD=!0;$scope.isShowSPD=!0;$scope.isShowSPCI51=!0;$scope.isShowSPTBD=!0;$scope.isShowWPC151=!0;$scope.isShowWPTPD=!0;$scope.isRiderLainnya=!0;$scope.isShowhospitalCP=!0;$scope.isShowTermRider=!0;$scope.isShowADB=!0;$scope.isShowADDB=!0;$scope.isShowTPD=!0;$scope.isShowWPC151=!0;$scope.isShowWPTPD=!0;$scope.isShowSPD=!0;$scope.isShowSPTBD=!0;$scope.isShowCI53=!0;break;case 4:$scope.isShowTermRider=!0;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!0;$scope.isShowhospitalCP=!0;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;break;case 5:$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!1;$scope.isShowhospitalCP=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;$scope.isShowhospitalCP=!0;$scope.isShowTermRider=!1;$scope.isShowADDB=!0;$scope.isShowTPD=!0;$scope.isShowWPTPD=!0;$scope.isShowSPD=!0;$scope.isShowSPTBD=!0;$scope.isShowCI53=!0;break;case 6:$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!1;$scope.isShowhospitalCP=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;$scope.isShowhospitalCP=!0;$scope.isShowTermRider=!0;$scope.isShowADDB=!0;$scope.isShowTPD=!0;$scope.isShowCI53=!0;break;default:$scope.isShowTermRider=!1;$scope.isShowADDB=!1;$scope.isShowTPD=!1;$scope.isShowCI53=!1;$scope.isShowhospitalCP=!1;$scope.isShowPBD=!1;$scope.isShowPBC151=!1;$scope.isShowPBTPD=!1;$scope.isShowSPD=!1;$scope.isShowSPCI51=!1;$scope.isShowSPTBD=!1;$scope.isShowWPC151=!1;$scope.isShowWPTPD=!1;$scope.isRiderLainnya=!1;break}}
$scope.doCheck=function(){var ck=(1*$scope.data.unitPasarUang)+(1*$scope.data.pendapatanTetap)+(1*$scope.data.berimbang)+(1*$scope.data.ekuitas);if(ck>100){alert("Tidak boleh lebih dari 100%");return!1}else{$scope.data.totalPersenUnitLink=ck}}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})};$scope.validateThisFormOnPageAccept=function(){$scope.messages=[];try{if($scope.data==null){$scope.messages.push({"message":"Data ERROR. Null data."})}}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
try{if(!($scope.data.isTujuanLainnya||$scope.data.isTujuanProteksi||$scope.data.isTujuanTabungan||$scope.data.isTujuanPendidikan||$scope.data.isTujuanInvestasi||$scope.data.isTujuanPensiun)){$scope.messages.push({'message':"Tujuan berasuransi harus diisi!"})}
if($scope.data.isTujuanLainnya){tryMe=$scope.data.tujuanAsuransiLainnya;if(''==tryMe)$scope.messages.push({'message':" Tujuan lainnya harus diisi!"})}
if($scope.data.paymentBankName=='LAINNYA'){tryMe=$scope.data.paymentBankNameLainnya;if(''==tryMe)$scope.messages.push({'message':"Nama Bank lainnya harus diisi!"})}
if('0'==$scope.data.jenisAsuransi)$scope.messages.push({'message':"Produk asuransi harus benar!"});if(''==$scope.data.jangkaWaktuAsuransi)$scope.messages.push({'message':"Jangka waktu Asuransi harus benar!"})}catch(e){$scope.messages.push({'message':"Data ERROR. "+e})}
if($scope.messages.length>0){return $scope.messages}
return!1}
$scope.moveToNextPage=function(){if($scope.validateThisFormOnPageAccept()){$scope.showAlert('Validasi',spajProvider.alertMessagebuilder($scope.messages));$scope.data.isPageProdukManfaat1Accepted=!1;return!1}else{if($scope.data.isPageProdukManfaat1Accepted){if(confirm('Langsung menuju ke halaman form isian penerima manfaat?')){$state.go('aplikasiSPAJOnline.produkDanManfaat22',{},{reload:!0,inherit:!1})}else{return!1}}}}
$scope.isPageAccepted=function(){if(!$scope.data.isPageProdukManfaat1Accepted){$scope.showAlert('Apakah data sudah benar?','Pastikan Anda yakin data sudah benar untuk melanjutkan kehalaman berikutnya.');return!1}}}]).controller('produkDanManfaat22Ctrl',['$state','$scope','$stateParams','spajProvider','dataFactory','$store','$ionicPopup','$ionicLoading',function($state,$scope,$stateParams,spajProvider,dataFactory,$store,$ionicPopup,$ionicLoading){$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.dataPenerimaManfaat=spajProvider.getPenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',!1);$scope.pageId='aplikasiSPAJOnline.produkDanManfaat22';$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'namaBankPenerimaManfaat':'','cabangBankPenerimaManfaat':'','nomorRekeningPenerimaManfaat':'','namaRekeningPenerimaManfaat':'',}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)}
$scope.saveDataSpaj=function(){var $formdata={'pageId':$scope.pageId,'data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.editPenerimaManfaat=function(dat){$state.go('aplikasiSPAJOnline.editPenerimaManfaat',{indexPenerimaManfaat:dat},{reload:!0,inherit:!1})}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0;if($scope.dataPenerimaManfaat==null){$scope.dataTertanggung13=$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+'aplikasiSPAJOnline.dataTertanggung13');$scope.dataTertanggung33=$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+'aplikasiSPAJOnline.dataTertanggung33');if($scope.dataTertanggung33==null){$scope.dataTertanggung33={'statusPernikahanTertanggung':''}}
$scope.newPenerimaManfaat={'namaPenerimaManfaat':$scope.dataTertanggung13.namaLengkapTertanggung,'tglLahirPenerimaManfaat':new Date($scope.dataTertanggung13.tglLahirTertanggung),'tempatLahirPenerima':$scope.dataTertanggung13.tempatLahirTertanggung,'penerimaManfaatHubungan':'04','statusPenerimaManfaat':$scope.dataTertanggung33.statusPernikahanTertanggung,'jenkelPenerimaManfaat':$scope.dataTertanggung13.jenkelTertanggung,'noKtpPenerimaManfaat':$scope.dataTertanggung13.nomorKTPTertanggung};spajProvider.addPenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',$scope.newPenerimaManfaat);$scope.dataPenerimaManfaat=spajProvider.getPenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',!1)}});$scope.moveToNextPage=function(){if($scope.data.isPagePenerimaManfaatAccepted){if(confirm('Langsung menuju ke halaman form isian SKK?')){if(confirm('Mohon menunggu halaman SKK tampil dengan sempurna.\n\n1 menit.')){$state.go('aplikasiSPAJOnline.sKKTertanggung',{},{reload:!0,inherit:!1})}}else{return!1}}}}]).controller('sKKTertanggungUtamaCtrl',['$scope','$stateParams','spajProvider','dataFactory','$store',function($scope,$stateParams,spajProvider,dataFactory,$store){$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});var $temp=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13');$scope.jenkelTertanggungUtama=$temp.jenkelTertanggung;$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.sKKTertanggungUtama','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggungUtama')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'skkIsPenyakitKeturunan':!1,'skkJenisPenyakitKeturunan':'','skkIsRawatinap':!1,'skkIsMerokok':!1,'skkRokokBatangSehari':'','skkIsNarkoba':!1,'skkIsAlkohol':!1,'jenkelTertanggung':'','skkWanitaIsPapSmear':!1,'skkWanitaIsHaidTerganggu':!1,'skkWanitaIsHamil':!1,'skkWanitaIsCesar':!1,'skkWanitaIsKeguguran':!1,'skkWanitaSulitLahir':!1,'isSkkUtamaOk':!1}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggungUtama')}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('sKKTertanggungTambahanCtrl',['$scope','$stateParams','spajProvider','dataFactory','$store',function($scope,$stateParams,spajProvider,dataFactory,$store){$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});var $temp=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13');$scope.jenkelTertanggungUtama=$temp.jenkelTertanggung;$scope.saveDataSpaj=function(){var $formdata={'pageId':'aplikasiSPAJOnline.sKKTertanggungTambahan','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggungTambahan')==null){$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'skkIsPenyakitKeturunan':!1,'skkJenisPenyakitKeturunan':'','skkIsRawatinap':!1,'skkIsMerokok':!1,'skkRokokBatangSehari':'','skkIsNarkoba':!1,'skkIsAlkohol':!1,'jenkelTertanggung':'','skkWanitaIsPapSmear':!1,'skkWanitaIsHaidTerganggu':!1,'skkWanitaIsHamil':!1,'skkWanitaIsCesar':!1,'skkWanitaIsKeguguran':!1,'skkWanitaSulitLahir':!1,'isSkkUtamaOk':!1}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggungTambahan')}
$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('lembarPersetujuanCtrl',['$scope','$stateParams','spajProvider','dataFactory','$store','$state',function($scope,$stateParams,spajProvider,dataFactory,$store,$state){$scope.isProdukKeluarga=!1;$scope.isProdukAkdp=!1;$scope.isProdukOther=!1;$scope.sumberDataTertanggung1=!1;$scope.sumberDataPempol1=!1;$scope.scroll=!0;$scope.spaj_guid=spajProvider.getSpajGUID();$scope.isProdukUnitLink=!1;if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12')==null){alert('Mohon lengkapi halaman Produk dan Manfaat!');return!1}else{$scope.produkDanManfaat12=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12');if($scope.produkDanManfaat12.jenisAsuransi=="JSPROTEKSIKELUARGA"){$scope.isProdukKeluarga=!0}else if($scope.produkDanManfaat12.jenisAsuransi.match(/JL/i)){$scope.isProdukOther=!0;$scope.isProdukUnitLink=!0}else if($scope.produkDanManfaat12.jenisAsuransi=="AKDP"){$scope.isProdukAkdp=!0}else{$scope.isProdukOther=!0}
$scope.sumberDataTertanggung1=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataTertanggung13');$scope.sumberDataPempol1=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataPemegangPolis13')}
$scope.data={'isMenyetujuiKetentuan':!1,'isPageDokumentAccepted':!1,'isMenyetujuiKetentuan':!1,'sign1':'','sign2':'','sign3':'','sign1enc':!1,'sign3enc':!1,'sign2enc':!1}
$scope.moveToNextPage=function(){if(!$scope.data.sign1enc||!$scope.data.sign2enc||!$scope.data.sign3enc){}
if($scope.data.isMenyetujuiKetentuan){if($scope.data.isMengertiKetentuan){if(confirm('Langsung menuju ke halaman form halaman kelengkapan Dokumen eSPAJ?')){$state.go('aplikasiSPAJOnline.dokumenPendukungSPAJ','',{reload:!1,inherit:!1})}else{$scope.data.isMenyetujuiKetentuan=!1;return!1}}else{alert('Mohon untuk menggeser tombol Mengerti Ketentuan untuk menyatakan');return!1}}}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.lembarPersetujuan')==null){$scope.data={'spaj_guid':$scope.spaj_guid,'isMengertiKetentuan':!1,'isMenyetujuiKetentuan':!1,'sign1':'','sign2':'','sign3':'','sign1enc':'','sign2enc':'','sign3enc':''}}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.lembarPersetujuan');$scope.data.sign1enc=btoa(spajProvider.ioBase64.encode($scope.data.sign1));$scope.data.sign2enc=btoa(spajProvider.ioBase64.encode($scope.data.sign2));$scope.data.sign3enc=btoa(spajProvider.ioBase64.encode($scope.data.sign3))}
$scope.saveDataSpaj=function(){$scope.data.sign1enc=btoa(spajProvider.ioBase64.encode($scope.data.sign1));$scope.data.sign2enc=btoa(spajProvider.ioBase64.encode($scope.data.sign2));$scope.data.sign3enc=btoa(spajProvider.ioBase64.encode($scope.data.sign3));var $formdata={'pageId':'aplikasiSPAJOnline.lembarPersetujuan','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('tinjauUlangDanKirimDokumenCtrl',['$scope','$state','$stateParams','spajProvider','dataFactory','$store','$http','$ionicLoading','$ionicPopup','$location','$window','$document',function($scope,$state,$stateParams,spajProvider,dataFactory,$store,$http,$ionicLoading,$ionicPopup,$location,$window,$document){$scope.spaj_guid=spajProvider.getSpajGUID();$scope.idagen=getQueryParam('idagen');$scope.token=getQueryParam('token');$scope.android_ver=getQueryParam('android_ver');$scope.device=getQueryParam('device');$scope.tanggal_submit=Math.round(+new Date()/1000);$scope.proposal_build_id=spajProvider.getBuildId();$scope.imageKtpTertanggung=null;$scope.imageKTPpempol=null;$scope.dokumens=null;$scope.sign1image=null;$scope.sign2image=null;$scope.sign3image=null;$scope.isValidDataTertanggung=!1;$scope.isValidDataTertanggungTambahan=!1;$scope.isValidDataPempol=!1;$scope.isValidDataProdukManfaat=!1;$scope.isValidDataPekerjaanTertanggung=!1;$scope.isValidDataPekerjaanPempol=!1;$scope.isValidDataSKKTU=!1;$scope.isValidDataSKKTT=!1;$scope.isValidDataPersetujuan=!1;$scope.isValidDataDokumen=!1;$scope.messages=[];$scope.$on('$ionicView.enter',function(){$scope.init_data();$scope.init_display()});$scope.init_display=function(){return!0};$scope.data_retrive=function(){$scope.messages=[];bol1=!1;bol2=!1;bol3=!1;$scope.sumberDataTertanggung1=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataTertanggung13');if($scope.sumberDataTertanggung1==null){$scope.messages.push({'message':'Silakan lengkapi data identitas tertanggung.'})}else{bol1=!0}
try{$scope.imageKtpTertanggung=atob(atob($scope.sumberDataTertanggung1.imageKTPTertanggung))}catch(e){$scope.messages.push({'message':'Invalid Image KTP Tertanggung '+e})}
$scope.sumberDataTertanggung2=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataTertanggung23');if($scope.sumberDataTertanggung2==null){$scope.messages.push({'message':'Silakan lengkapi data tempat tinggal tertanggung.'})}else{bol2=!0};$scope.sumberDataTertanggung3=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataTertanggung33');if($scope.sumberDataTertanggung3==null){$scope.messages.push({'message':'Silakan lengkapi data pendukung tertanggung.'})}else{bol3=!0};if(bol1&&bol2&&bol3)$scope.isValidDataTertanggung=!0;bol1=!1;bol2=!1;bol3=!1;try{$scope.data_diri_tertanggung=angular.extend($scope.sumberDataTertanggung1,$scope.sumberDataTertanggung2,$scope.sumberDataTertanggung3)
delete $scope.data_diri_tertanggung.spaj_guid}catch(e){console.log('Error merging Data tertangung'+e)}
$scope.data_diri_tertanggung_tambahan=$scope.data_diri_tertanggung;$scope.tertanggung_tambahan_arr=dataFactory.toArray($scope.data_diri_tertanggung_tambahan);$scope.tertanggung_tambahan=[];try{if(parseInt($scope.data_diri_tertanggung_tambahan.jmlTertanggungTambahan)>0){for($i=1;$i<=parseInt($scope.data_diri_tertanggung_tambahan.jmlTertanggungTambahan);$i++){$scope.tertanggung_tambahan.push({"namaTertanggungTambahan":$scope.tertanggung_tambahan_arr['namaTertanggungTambahan'+$i],"noKtpTertanggungTambahan":$scope.tertanggung_tambahan_arr['noKtpTertanggungTambahan'+$i],"tglLahirTertanggungTambahan":$scope.tertanggung_tambahan_arr['tglLahirTertanggungTambahan'+$i],"tempatLahirTertanggungTambahan":$scope.tertanggung_tambahan_arr['tempatLahirTertanggungTambahan'+$i],"jenisKelaminTertanggungTambahan":$scope.tertanggung_tambahan_arr['jenisKelaminTertanggungTambahan'+$i],"alamatKantorTertanggungTambahan":$scope.tertanggung_tambahan_arr['alamatKantorTertanggungTambahan'+$i],"tinggiBadanTertanggungTambahan":$scope.tertanggung_tambahan_arr['tinggiBadanTertanggungTambahan'+$i],"beratBadanTertanggungTambahan":$scope.tertanggung_tambahan_arr['beratBadanTertanggungTambahan'+$i],"isTertanggungTambahanBekerja":$scope.tertanggung_tambahan_arr['isTertanggungTambahan'+$i+'Bekerja'],"hubunganDenganTTU":$scope.tertanggung_tambahan_arr['hubunganTT'+$i+'DenganTTU']})}}}catch(e){console.log('error tertanggung tambahan!')
console.log(e)}
$scope.data_diri_tertanggung_tambahan=$scope.tertanggung_tambahan;$scope.tertanggung_tambahan=null;$scope.sumberDataPempol1=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataPemegangPolis13');if($scope.sumberDataPempol1==null){$scope.messages.push({'message':'Silakan lengkapi data identitas pemegang polis.'})}else{bol1=!0}
try{$scope.imageKTPpempol=atob(atob($scope.sumberDataPempol1.imageKTPpempol))}catch(e){$scope.messages.push({'message':'Invalid Image KTP Pempo '+e})}
$scope.sumberDataPempol2=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataPemegangPolis23');$scope.isSetujuEmail=$scope.sumberDataPempol2.isSetujuEmailPempol;$scope.isSetujuHP=$scope.sumberDataPempol2.isSetujuHPPempol;if($scope.sumberDataPempol2==null){$scope.messages.push({'message':'Silakan lengkapi data tempat tinggal pemegang polis.'})}else{bol2=!0};$scope.sumberDataPempol3=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.dataPemegangPolis33');if($scope.sumberDataPempol3==null){$scope.messages.push({'message':'Silakan lengkapi data pendukung pemegang polis.'})}else{bol3=!0}
if(bol1&&bol2&&bol3)$scope.isValidDataPempol=!0;bol1=!1;bol2=!1;bol3=!1;try{$scope.data_diri_pemegang_polis=angular.extend($scope.sumberDataPempol1,$scope.sumberDataPempol2,$scope.sumberDataPempol3)
delete $scope.data_diri_pemegang_polis.spaj_guid}catch(e){console.log('Error merging Data Pemegang Polis'+e)}
$scope.pekerjaanTertanggung=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.pekerjaanTertanggung');if($scope.pekerjaanTertanggung==null){$scope.messages.push({'message':'Silakan lengkapi data pekerjaan Tertanggung.'})}else{bol1=!0}
$scope.isValidDataPekerjaanTertanggung=bol1;$scope.pekerjaanPemegangPolis=$store.get('SPAJ::'+$scope.spaj_guid+'::aplikasiSPAJOnline.pekerjaanPemegangPolis');if($scope.pekerjaanPemegangPolis==null){if(!$scope.sumberDataPempol1.isTertanggungPempol){$scope.messages.push({'message':'Silakan lengkapi data pekerjaan pemegang polis.'})}else{bol2=!0;$scope.pekerjaanPemegangPolis={'isTertanggungPempol':!0}}}else{bol2=!0}
$scope.isValidDataPekerjaanPempol=bol2;try{$scope.data_pekerjaan_tertanggung=angular.extend($scope.pekerjaanTertanggung)
$scope.data_pekerjaan_pempol=angular.extend($scope.pekerjaanPemegangPolis)
delete $scope.data_pekerjaan_tertanggung.spaj_guid;delete $scope.data_pekerjaan_pempol.spaj_guid}catch(e){console.log('Error merging Data Pemegang Polis'+e)}
bol1=!1;bol2=!1;bol3=!1;$scope.data_skk_utama=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggung');if($scope.data_skk_utama==null){$scope.messages.push({'message':'Silakan lengkapi SKK tertanggung utama'})}else{bol1=!0}
$scope.isValidDataSKKTU=bol1;$scope.isValidDataSKKTT=bol1;bol1=!1;bol2=!1;bol3=!1;$scope.data_dokumen=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dokumenPendukungSPAJ::dokumen_spaj');$scope.data_dokumens=[];if($scope.data_dokumen==null){$scope.messages.push({'message':'Tidak Ada dokumen lampiran.'})}else{$scope.data_dokumen_arr=dataFactory.toArray($scope.data_dokumen);for($i=0;$i<$scope.data_dokumen_arr.length;$i++){$scope.data_dokumens.push({"selectTipeDokumen":$scope.data_dokumen_arr[$i].selectTipeDokumen,"addNamaDokumen":$scope.data_dokumen_arr[$i].addNamaDokumen,"addKeteranganDokumen":$scope.data_dokumen_arr[$i].addKeteranganDokumen,"camDokumen":spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.data_dokumen_arr[$i].camDokumen))})}
bol1=!0}
$scope.data_produk=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12');if($scope.data_produk==null){$scope.messages.push({'message':'Silakan lengkapi form produk.'})}else{try{ter=dataFactory.getHubunganKeluargas();ter=ter.find(obj=>{return obj.id===$scope.data_produk.hubunganPembayarPremiDenganTTU});$scope.data_produk.hubunganDenganTTUText=ter.label}catch(e){$scope.data_produk.hubunganDenganTTUText=""}
bol1=!0}
$scope.isValidDataProdukManfaat=!0;bol1=!1;bol2=!1;bol3=!1;$scope.data_penerima_manfaat=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.tambahPenerimaManfaat::penerima_manfaat');if($scope.data_penerima_manfaat==null)$scope.messages.push({'message':'Silakan lengkapi penerima manfaat.'});$scope.data_persetujuan=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.lembarPersetujuan');$scope.isMengertiKetentuan=$scope.data_persetujuan.isMengertiKetentuan;$scope.isMenyetujuiKetentuan=$scope.data_persetujuan.isMengertiKetentuan;if($scope.data_persetujuan==null){$scope.messages.push({'message':'Silakan lengkapi tanda tanggan.'})}else{bol1=!0}
$scope.isValidDataDokumen=bol1;$scope.data_persetujuan=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.lembarPersetujuan');if($scope.data_persetujuan==null){$scope.messages.push({'message':'Silakan lengkapi dokumen.'})}else{bol1=!0}
$scope.isValidDataPersetujuan=bol1;try{$scope.sign1image=$scope.data_persetujuan.sign1;$scope.sign2image=$scope.data_persetujuan.sign2;$scope.sign3image=$scope.data_persetujuan.sign3}catch(e){$scope.messages.push({'message':'Invalid Image Sign '+e})}
bol1=!1;bol2=!1;bol3=!1;$scope.skk_tertanggung=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.sKKTertanggung');if($scope.skk_tertanggung==null){$scope.messages.push({'message':'Silakan lengkapi form SKK.'})}else{bol1=!0}}
$scope.init_data=function(){$scope.data_diri_tertanggung='';$scope.data_diri_tertanggung_tambahan='';$scope.data_diri_pemegang_polis=[];$scope.data_pekerjaan_pempol='';$scope.data_pekerjaan_tertanggung='';$scope.data_skk=[];$scope.data_penerima_manfaat='';$scope.data_dokumen='';$scope.data_produk='';$scope.data_persetujuan='';$scope.data_retrive()}
$scope.moveToDokumen=function(){$state.go('aplikasiSPAJOnline.dokumenPendukungSPAJ','',{reload:!0,inherit:!1})}
$scope.moveToPersetujuan=function(){$state.go('aplikasiSPAJOnline.lembarPersetujuan','',{reload:!0,inherit:!1})}
$scope.moveToTertanggung=function(){$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1','',{reload:!1,inherit:!1})}
$scope.moveToTertanggungTambahan=function(){$state.go('aplikasiSPAJOnline.dataTertanggung33_tab1','',{reload:!0,inherit:!1})}
$scope.moveToSKK=function(){$state.go('aplikasiSPAJOnline.sKKTertanggung',{},{reload:!0,inherit:!1})}
$scope.moveToProduk=function(){$state.go('aplikasiSPAJOnline.produkDanManfaat12','',{reload:!0,inherit:!1})}
$scope.moveToPemegangPolis=function(){$state.go('aplikasiSPAJOnline.dataPemegangPolis13','',{reload:!1,inherit:!1})}
$scope.finalFormValidation=function(){return!1}
$http2=$http;$scope.envelope=null;$scope.submitToServer=function(){if(confirm('APAKAH ANDA INGIN MENGIRIM SPAJ INI?\n\nPastikan SPAJ telah diisi dengan benar dan ditandatangani Calon Nasabah.\n\nData yang telah terkirim tidak dapat di-edit kembali!')){$scope.envelope={'id_agen':$scope.idagen,'spaj_guid':$scope.spaj_guid,'android_ver':$scope.android_ver,'device':$scope.device,'tanggal_submit':$scope.tanggal_submit,'proposal_build_id':$scope.proposal_build_id,'data_diri_tertanggung':$scope.data_diri_tertanggung,'data_diri_tertanggung_tambahan':$scope.data_diri_tertanggung_tambahan,'data_diri_pemegang_polis':$scope.data_diri_pemegang_polis,'data_pekerjaan_pempol':$scope.data_pekerjaan_pempol,'data_pekerjaan_tertanggung':$scope.data_pekerjaan_tertanggung,'data_skk':$scope.skk_tertanggung,'data_penerima_manfaat':$scope.data_penerima_manfaat,'data_dokumen':$scope.data_dokumen,'data_produk':$scope.data_produk,'data_persetujuan':$scope.data_persetujuan,}
if($scope.messages.length==0){msisdn=$scope.data_diri_pemegang_polis.nomorHpPempol;$scope.submit($scope.envelope)}else{alert('eSPAJ tak dapat dikirim!\n\nPeriksa kembali checklist kelengkapan eSPAJ!');return!1}}}
$scope.response='';$scope.showPrompt=function(title,msg){$ionicPopup.prompt({title:title,subTitle:msg}).then(function(res){return res})};$scope.genOtp=function(msisdn){var otpLink="http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=gen_OTP&idagen="+$scope.idagen+"&guid="+$scope.spaj_guid+"&token="+$scope.token+"&msisdn="+msisdn;$scope.showSpinner('Mendapatkan OTP...');$http.post(otpLink,"spaj_guid="+$scope.spaj_guid,{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(res){if(res.data.status){do{otpnya=prompt(res.data.message+"\n\nSilahkan validasi OTP yang berada dalam Inbox SMS HP Pemegang Polis terdaftar (6 Digit angka)","");optValidation="http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=validate_OTP"+"&otp="+otpnya+"&idagen="+$scope.idagen+"&guid="+$scope.spaj_guid+"&token="+$scope.token;retSucc=!1;$http.post(optValidation,"spaj_guid="+$scope.spaj_guid,{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(ret){if(ret.data.status){console.log(ret.data.status);retSucc=ret.data.status;do{otpnya=prompt(res.data.message+"\n\nSilahkan validasi OTP yang berada dalam Inbox SMS HP Pemegang Polis terdaftar (6 Digit angka)","");optValidation="http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=validate_OTP"+"&otp="+otpnya+"&idagen="+$scope.idagen+"&guid="+$scope.spaj_guid+"&token="+$scope.token;retSucc=!1;$http.post(optValidation,"spaj_guid="+$scope.spaj_guid,{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(ret){if(ret.data.status){console.log(ret.data.status);var link='http://192.168.1.10:7780/mobileapi/spaj_bridge/submitter.php?act=save_spaj'+'&idagen='+$scope.idagen+'&token='+$scope.token;$scope.hideSpinner();$scope.showSpinner("Mengirim SPAJ Online...");$http.post(link,"spaj_guid="+$scope.spaj_guid+"&data="+angular.toJson($scope.envelope),{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(rets){$scope.hideSpinner();console.log(rets.data);$scope.showAlert('Status Pengiriman SPAJ',rets.data.message,!0)}).withCredentials=!0}else{alert('Gagal OTP')}}).withCredentials=!0}while(otpnya==""||otpnya.length!=6);}else{do{otpnya=prompt(res.data.message+"\n\nSilahkan validasi OTP yang berada dalam Inbox SMS HP Pemegang Polis terdaftar (6 Digit angka)","");optValidation="http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=validate_OTP"+"&otp="+otpnya+"&idagen="+$scope.idagen+"&guid="+$scope.spaj_guid+"&token="+$scope.token;retSucc=!1;$http.post(optValidation,"spaj_guid="+$scope.spaj_guid,{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(ret){if(ret.data.status){console.log(ret.data.status);var link='http://192.168.1.10:7780/mobileapi/spaj_bridge/submitter.php?act=save_spaj'+'&idagen='+$scope.idagen+'&token='+$scope.token;$scope.hideSpinner();$scope.showSpinner("Mengirim SPAJ Online...");$http.post(link,"spaj_guid="+$scope.spaj_guid+"&data="+angular.toJson($scope.envelope),{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(rets){$scope.hideSpinner();console.log(rets.data);$scope.showAlert('Status Pengiriman SPAJ',rets.data.message,!0)}).withCredentials=!0}else{alert('Gagal OTP')}}).withCredentials=!0}while(otpnya==""||otpnya.length!=6);}}).withCredentials=!0}while(otpnya==""||otpnya.length!=6);}}).withCredentials=!0}
$scope.askOtp=function(){otpnya="";do{otpnya=prompt(res.data.message+"\n\nSilahkan validasi OTP yang berada dalam Inbox SMS HP Pemegang Polis terdaftar (6 Digit angka)","")}while(otpnya==""||otpnya.length!=6);return otpnya}
$scope.validateOtp=function(otpnya){alert(otpnya)}
$scope.submit=function(param){var link='http://192.168.1.10:7780/mobileapi/spaj_bridge/submitter.php?act=save_spaj'+'&idagen='+$scope.idagen+'&token='+$scope.token;$scope.hideSpinner();$scope.showSpinner("Mengirim SPAJ Online...");$http.post(link,"spaj_guid="+$scope.spaj_guid+"&data="+angular.toJson(param),{headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}}).then(function(rets){$scope.hideSpinner();console.log(rets.data);$scope.showAlert('Status Pengiriman SPAJ',rets.data.message,!0)}).withCredentials=!0};$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.showSpinner=function(msg){$ionicLoading.show({template:msg})};$scope.hideSpinner=function(){$ionicLoading.hide()};$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){angular.element(document.querySelectorAll('#homeButton')).triggerHandler('click');spajProvider.delUnsavedSpajGuid($scope.spaj_guid)})}}]).controller('dokumenPendukungSPAJCtrl',['$scope','$stateParams','spajProvider','dataFactory','$store','$ionicPopup','$state',function($scope,$stateParams,spajProvider,dataFactory,$store,$ionicPopup,$state){$scope.daftarDokumen=!1;$scope.daftarDokumens=[];$scope.data={'isPageDocumentAccepted':!1}
$scope.moveToNextPage=function(){if($scope.data.isPageDocumentAccepted&&($scope.daftarDokumen!=null)&&$scope.daftarDokumen.length>0){if(confirm('Langsung menuju ke halaman form halaman SUBMIT eSPAJ?')){$state.go('aplikasiSPAJOnline.tinjauUlangDanKirimDokumen','',{reload:!0,inherit:!1})}else{$scope.data.isPageDocumentAccepted=!1;return!1}}else{alert('Dokumen harus diisi')}}
$scope.daftarDokumen=spajProvider.getDokumen(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.dokumenPendukungSPAJ',!1);if((typeof $scope.daftarDokumen=='object')&&($scope.daftarDokumen!=null)){for(i=0;i<$scope.daftarDokumen.length;i++){$scope.daftarDokumens.push({'addKeteranganDokumen':$scope.daftarDokumen[i].addKeteranganDokumen,'addNamaDokumen':$scope.daftarDokumen[i].addNamaDokumen,'camDokumen':spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.daftarDokumen[i].camDokumen)),'selectTipeDokumen':$scope.daftarDokumen[i].selectTipeDokumen,'isPageDocumentAccepted':$scope.daftarDokumen[i].isPageDocumentAccepted})}}
$scope.editDokumen=function(dat){$state.go('aplikasiSPAJOnline.tambahkanDokumenPenunjangSPAJ',{indexDokumen:dat},{reload:!0,inherit:!1})}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('tambahkanDokumenPenunjangSPAJCtrl',['$scope','$stateParams','$ionicPopup','dataFactory','spajProvider','$store','$state',function($scope,$stateParams,$ionicPopup,dataFactory,spajProvider,$store,$state){$scope.tipeDokumen=dataFactory.getTipeDokumens();$scope.indexDokumen=$state.params.indexDokumen;$scope.ngShow=!0;if(typeof parseInt($scope.indexDokumen)&&parseInt($scope.indexDokumen)>-1){$scope.dataDokumen=spajProvider.getDokumen(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.dokumenPendukungSPAJ',$scope.indexDokumen);$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'addNamaDokumen':$scope.dataDokumen.addNamaDokumen,'addKeteranganDokumen':$scope.dataDokumen.addKeteranganDokumen,'selectTipeDokumen':$scope.dataDokumen.selectTipeDokumen,'camDokumen':spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.dataDokumen.camDokumen))}
spajProvider.putImageTo('canvasDokumen',spajProvider.ioBase64.decode(spajProvider.ioBase64.decode($scope.dataDokumen.camDokumen)))}else{$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'addNamaDokumen':'','addKeteranganDokumen':'','selectTipeDokumen':$scope.tipeDokumen[0].id_sae,'camDokumen':''}}
$scope.delDokumen=function(indexDokumen){if(confirm("yakin akan hapus dokumen ini>")){spajProvider.delDokumen($scope.data.spaj_guid,'aplikasiSPAJOnline.dokumenPendukungSPAJ',indexDokumen)
$state.go('aplikasiSPAJOnline.dokumenPendukungSPAJ',{},{reload:!0,inherit:!1,cache:!1})}else{return!1}}
$scope.saveDokumen=function(){if($scope.data.addNamaDokumen==''){alert('Nama Dokumen harus Diisi!');return!1}else{if(typeof parseInt($scope.indexDokumen)&&parseInt($scope.indexDokumen)>-1){this.updateDokumen($scope.indexDokumen)}else{this.saveDataSpaj()}
$state.go('aplikasiSPAJOnline.dokumenPendukungSPAJ',{},{reload:!0,inherit:!1,cache:!1})}}
$scope.saveDataSpaj=function(){$scope.data.camDokumen=spajProvider.getImageBase64('canvasDokumen','jpg');$scope.newDokumen={'addNamaDokumen':$scope.data.addNamaDokumen,'addKeteranganDokumen':$scope.data.addKeteranganDokumen,'selectTipeDokumen':$scope.data.selectTipeDokumen,'camDokumen':$scope.data.camDokumen};spajProvider.setSpajGUID($scope.data.spaj_guid);spajProvider.addDokumen($scope.data.spaj_guid,'aplikasiSPAJOnline.dokumenPendukungSPAJ',$scope.newDokumen)}
$scope.updateDokumen=function(indexDokumen){$scope.data.camDokumen=spajProvider.getImageBase64('canvasDokumen','jpg');$scope.saveChanges={'addNamaDokumen':$scope.data.addNamaDokumen,'addKeteranganDokumen':$scope.data.addKeteranganDokumen,'selectTipeDokumen':$scope.data.selectTipeDokumen,'camDokumen':$scope.data.camDokumen};spajProvider.setSpajGUID($scope.data.spaj_guid);spajProvider.updateDokumen($scope.data.spaj_guid,'aplikasiSPAJOnline.dokumenPendukungSPAJ',indexDokumen,$scope.saveChanges)}
$scope.changeImage=function(){document.getElementById('tempImgDokumen').style.display='none';spajProvider.takePict(this,'canvasDokumen');$scope.data.camDokumen=spajProvider.getImageBase64('canvasDokumen','jpg')}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('tambahPenerimaManfaatCtrl',['$state','$scope','$stateParams','dataFactory','spajProvider','$store','$ionicPopup',function($state,$scope,$stateParams,dataFactory,spajProvider,$store,$ionicPopup){$scope.statuss=dataFactory.getStatusNikahs();$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.genders=dataFactory.getGenders();$scope.listTertanggungs=!1;$scope.tertanggungs=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33');$scope.daftarTertanggungs=[];if($scope.tertanggungs.jmlTertanggungTambahan>0){for(i=1;i<=$scope.tertanggungs.jmlTertanggungTambahan;i++){ter=dataFactory.toArray($scope.tertanggungs);tert={'id':i,'namaPenerimaManfaat':ter['namaTertanggungTambahan'+i],'tglLahirPenerimaManfaat':ter['tglLahirTertanggungTambahan'+i],'noKtpPenerimaManfaat':ter['noKtpTertanggungTambahan'+i],'jenkelPenerimaManfaat':ter['jenisKelaminTertanggungTambahan'+i],'statusPenerimaManfaat':'','penerimaManfaatHubungan':ter['hubunganTT'+i+'DenganTTU'],'tempatLahirPenerima':ter['tempatLahirTertanggungTambahan'+i]}
$scope.daftarTertanggungs.push(tert)}
$scope.listTertanggungs=$scope.daftarTertanggungs}
$scope.selectTertanggungs=function(idTertanggung){idTertanggung=idTertanggung-1;$scope.data.namaPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).namaPenerimaManfaat;$scope.data.tglLahirPenerimaManfaat=new Date(($scope.daftarTertanggungs[idTertanggung]).tglLahirPenerimaManfaat);$scope.data.noKtpPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).noKtpPenerimaManfaat;$scope.data.jenkelPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).jenkelPenerimaManfaat;$scope.data.statusPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).statusPenerimaManfaat;$scope.data.penerimaManfaatHubungan=($scope.daftarTertanggungs[idTertanggung]).penerimaManfaatHubungan;$scope.data.tempatLahirPenerima=($scope.daftarTertanggungs[idTertanggung]).tempatLahirPenerima}
$scope.saveDataSpaj=function(){$scope.newPenerimaManfaat={'namaPenerimaManfaat':$scope.data.namaPenerimaManfaat,'tglLahirPenerimaManfaat':$scope.data.tglLahirPenerimaManfaat,'noKtpPenerimaManfaat':$scope.data.noKtpPenerimaManfaat,'tempatLahirPenerima':$scope.data.tempatLahirPenerima,'penerimaManfaatHubungan':$scope.data.penerimaManfaatHubungan,'statusPenerimaManfaat':$scope.data.statusPenerimaManfaat,'jenkelPenerimaManfaat':$scope.data.jenkelPenerimaManfaat};spajProvider.setSpajGUID($scope.data.spaj_guid);spajProvider.addPenerimaManfaat($scope.data.spaj_guid,'aplikasiSPAJOnline.tambahPenerimaManfaat',$scope.newPenerimaManfaat)}
$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'penerimaManfaatHubungan':$scope.hubunganKeluargas[0].id,'statusPenerimaManfaat':$scope.statuss[0].id,'jenkelPenerimaManfaat':$scope.genders[0].id,'namaPenerimaManfaat':'','tglLahirPenerimaManfaat':'','tempatLahirPenerima':'',}
$scope.savePenerimaManfaat=function(){if($scope.data.namaPenerimaManfaat==''||$scope.data.tglLahirPenerimaManfaat==''){$scope.showAlert('Perhatian','Nama dan Tanggal lahir harus diisi.',!0);return!1}else{this.saveDataSpaj();$state.go('aplikasiSPAJOnline.produkDanManfaat22',{},{reload:!0,inherit:!1,cache:!1})}}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.showAlert=function(title,message){var alertPopup=$ionicPopup.alert({title:title,template:message});alertPopup.then(function(res){})}}]).controller('editPenerimaManfaatCtrl',['$state','$scope','$stateParams','spajProvider','dataFactory','$store','$filter',function($state,$scope,$stateParams,spajProvider,dataFactory,$store,$filter){$scope.indexPenerimaManfaat=$state.params.indexPenerimaManfaat;$scope.statuss=dataFactory.getStatusNikahs();$scope.hubunganKeluargas=dataFactory.getHubunganKeluargas();$scope.genders=dataFactory.getGenders();$scope.dataPenerimaManfaat=spajProvider.getPenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',$scope.indexPenerimaManfaat);$scope.dataPenerimaManfaat.tglLahirPenerimaManfaat=new Date($scope.dataPenerimaManfaat.tglLahirPenerimaManfaat);$scope.listTertanggungs=!1;$scope.tertanggungs=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33');$scope.daftarTertanggungs=[];if($scope.tertanggungs.jmlTertanggungTambahan>0){for(i=1;i<=$scope.tertanggungs.jmlTertanggungTambahan;i++){ter=dataFactory.toArray($scope.tertanggungs);tert={'id':i,'namaPenerimaManfaat':ter['namaTertanggungTambahan'+i],'tglLahirPenerimaManfaat':ter['tglLahirTertanggungTambahan'+i],'noKtpPenerimaManfaat':ter['noKtpTertanggungTambahan'+i],'jenkelPenerimaManfaat':ter['jenisKelaminTertanggungTambahan'+i],'statusPenerimaManfaat':'','penerimaManfaatHubungan':ter['hubunganTT'+i+'DenganTTU'],'tempatLahirPenerima':ter['tempatLahirTertanggungTambahan'+i]}
$scope.daftarTertanggungs.push(tert)}
$scope.listTertanggungs=$scope.daftarTertanggungs}
$scope.selectTertanggungs=function(idTertanggung){idTertanggung=idTertanggung-1;$scope.data.namaPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).namaPenerimaManfaat;$scope.data.tglLahirPenerimaManfaat=new Date(($scope.daftarTertanggungs[idTertanggung]).tglLahirPenerimaManfaat);$scope.data.noKtpPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).noKtpPenerimaManfaat;$scope.data.jenkelPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).jenkelPenerimaManfaat;$scope.data.statusPenerimaManfaat=($scope.daftarTertanggungs[idTertanggung]).statusPenerimaManfaat;$scope.data.penerimaManfaatHubungan=($scope.daftarTertanggungs[idTertanggung]).penerimaManfaatHubungan;$scope.data.tempatLahirPenerima=($scope.daftarTertanggungs[idTertanggung]).tempatLahirPenerima}
$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'penerimaManfaatHubungan':$scope.dataPenerimaManfaat.penerimaManfaatHubungan,'statusPenerimaManfaat':$scope.dataPenerimaManfaat.statusPenerimaManfaat,'jenkelPenerimaManfaat':$scope.dataPenerimaManfaat.jenkelPenerimaManfaat,'namaPenerimaManfaat':$scope.dataPenerimaManfaat.namaPenerimaManfaat,'tglLahirPenerimaManfaat':$scope.dataPenerimaManfaat.tglLahirPenerimaManfaat,'tempatLahirPenerima':$scope.dataPenerimaManfaat.tempatLahirPenerima,'noKtpPenerimaManfaat':$scope.dataPenerimaManfaat.noKtpPenerimaManfaat,}
$scope.savePenerimaManfaat=function(){$scope.newPenerimaManfaat={'namaPenerimaManfaat':$scope.data.namaPenerimaManfaat,'tglLahirPenerimaManfaat':$scope.data.tglLahirPenerimaManfaat,'tempatLahirPenerima':$scope.data.tempatLahirPenerima,'penerimaManfaatHubungan':$scope.data.penerimaManfaatHubungan,'statusPenerimaManfaat':$scope.data.statusPenerimaManfaat,'jenkelPenerimaManfaat':$scope.data.jenkelPenerimaManfaat,'noKtpPenerimaManfaat':$scope.data.noKtpPenerimaManfaat,};if(confirm('yakin akan mengupdate?')){spajProvider.updatePenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',$scope.indexPenerimaManfaat,$scope.newPenerimaManfaat);$state.go('aplikasiSPAJOnline.produkDanManfaat22',{},{reload:!0,inherit:!1,cache:!1})}}
$scope.delPenerimaManfaat=function(){if(confirm('Yakin akan menghapus penerima manfaat bernama '+$scope.data.namaPenerimaManfaat+'?')){spajProvider.removePenerimaManfaat(spajProvider.getSpajGUID(),'aplikasiSPAJOnline.tambahPenerimaManfaat',$scope.indexPenerimaManfaat)
$state.go('aplikasiSPAJOnline.produkDanManfaat22',{},{reload:!0,inherit:!1,cache:!1})}}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('sPAJOnlineJiwasrayaCtrl',['$scope','$state','spajProvider','$stateParams','$http',function($scope,$state,spajProvider,$stateParams,$http){$scope.idagen=getQueryParam('idagen');$scope.token=getQueryParam('token');$scope.android_ver=getQueryParam('android_ver');$scope.device=getQueryParam('device');$scope.newBuildId=function(){$http({method:"GET",url:"http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=get_build_id&idagen="+$scope.idagen+"&token="+$scope.token}).then(function mySucces(response){spajProvider.setBuildId(null);spajProvider.setBuildId(response.data[0].BUILD_ID)})}
$scope.newSpaj=function(spaj_guid){spajProvider.setSpajGUID('new');$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1',{spaj_guid:'new'},{reload:!0,inherit:!1})}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0})}]).controller('suratKeteranganKesehatanCtrl',['$scope','$stateParams',function($scope,$stateParams){}]).controller('sKKTertanggungCtrl',['$state','$scope','$stateParams','$store','spajProvider','dataFactory',function($state,$scope,$stateParams,$store,spajProvider,dataFactory){$scope.viewSKKas="0";$scope.hobbys=dataFactory.getHobbys();$scope.pageId='aplikasiSPAJOnline.sKKTertanggung';$scope.$on('$ionicView.beforeEnter',function(){$scope.init_data();$scope.init_display()});$scope.jumlahSaudaraKandungs=[{'id':0,'label':'Tidak Punya'},{'id':1,'label':'1'},{'id':2,'label':'2'},{'id':3,'label':'3'},{'id':4,'label':'4'},{'id':5,'label':'5'}];$scope.changeSkkView=function(skk){$scope.viewSKKas=skk}
$scope.init_display=function(){if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12')==null){$scope.isProdukJsProteksiKeluarga=!1;$scope.jenisProduk=!1;$scope.jenisJsProteksiKeluarga='';$scope.jmlTertanggungTambahan='';$scope.namaTertanggungUtama='';$scope.namaTertanggungTambahan1='';$scope.namaTertanggungTambahan2='';$scope.namaTertanggungTambahan3='';$scope.namaTertanggungTambahan4='';$scope.isTTUWanita=!1;$scope.isTT1Wanita=!1;$scope.isTT2Wanita=!1;$scope.isTT3Wanita=!1;$scope.isTT4Wanita=!1}else{$scope.isProdukJsProteksiKeluarga=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12').jenisAsuransi;$scope.jenisJsProteksiKeluarga=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.produkDanManfaat12').jenisJsProteksiKeluarga;$scope.jenisProduk=$scope.isProdukJsProteksiKeluarga;$scope.jmlTertanggungTambahan=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').jmlTertanggungTambahan;$scope.isAdaTertanggungTambahan1=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').isAdaTertanggungTambahan1;$scope.namaTertanggungUtama=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13').namaLengkapTertanggung;$scope.isTTUWanita=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13').jenkelTertanggung;$scope.isTT1Wanita=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').jenisKelaminTertanggungTambahan1;$scope.isTT2Wanita=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').jenisKelaminTertanggungTambahan2;$scope.isTT3Wanita=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').jenisKelaminTertanggungTambahan3;$scope.isTT4Wanita=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').jenisKelaminTertanggungTambahan4;$scope.isTTUWanita=($scope.isTTUWanita=='L')?false:!0;$scope.isTT1Wanita=($scope.isTT1Wanita=='L')?false:!0;$scope.isTT2Wanita=($scope.isTT2Wanita=='L')?false:!0;$scope.isTT3Wanita=($scope.isTT3Wanita=='L')?false:!0;$scope.isTT4Wanita=($scope.isTT4Wanita=='L')?false:!0;if($scope.isAdaTertanggungTambahan1){$scope.namaTertanggungTambahan1=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').namaTertanggungTambahan1;$scope.namaTertanggungTambahan2=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').namaTertanggungTambahan2;$scope.namaTertanggungTambahan3=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').namaTertanggungTambahan3;$scope.namaTertanggungTambahan4=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33').namaTertanggungTambahan4}
$scope.isProdukJsProteksiKeluarga=('JSPROTEKSIKELUARGA'==$scope.isProdukJsProteksiKeluarga)}
$scope.validateCompleteSKK=function(){$scope.data.isSKKLengkap=!1;scpArr=dataFactory.toArray($scope.data);if($scope.jmlTertanggungTambahan>0){for(i=1;i<=$scope.jmlTertanggungTambahan;i++){$scope.data.isSKKLengkap=($scope.data.isSKKLengkap==($scope.data.isSKKLengkap&&parseInt(scpArr['umurAyahTT'+i])>0))&&parseInt(scpArr.umurAyahTTU)>16&&parseInt(scpArr.umurIbuTTU)>16}}else if(scpArr.umurAyahTTU>16&&scpArr.umurIbuTTU>16){$scope.data.isSKKLengkap=!0}}
$scope.data_tertanggung3=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung33');$scope.data_tertanggung1=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::aplikasiSPAJOnline.dataTertanggung13');if($scope.data_tertanggung3!=null||$scope.data_tertanggung1!=null){if($scope.data_tertanggung3.isAdaTertanggungTambahan1)$scope.isTertanggungTambahan=!0;if($scope.data_tertanggung3.jenisKelaminTertanggungTambahan1=='P'&&$scope.data_tertanggung3.isAdaTertanggungTambahan1)$scope.isTT1Wanita=!0;if($scope.data_tertanggung1.jenkelTertanggung=='P'&&$scope.data_tertanggung1.namaLengkapTertanggung!='')$scope.isTTUWanita=!0;if($scope.data_tertanggung1.namaLengkapTertanggung!=''||$scope.data_tertanggung1.agamaTertanggung!='0')$scope.isHanya1tertanggung=!0;if($scope.data_tertanggung1.namaLengkapTertanggung!=''||$scope.data_tertanggung1.agamaTertanggung!='0')$scope.isHanya1tertanggung=!0}else{alert('Mohon lengkapi data Tertanggung atau Tertanggung tambahan!');return!1;$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1',{'spaj_guid':spaj_guid},{reload:!0,inherit:!1})}}
$scope.saveDataSpaj=function(){$scope.validateCompleteSKK();var $formdata={'pageId':'aplikasiSPAJOnline.sKKTertanggung','data':$scope.data};spajProvider.setSpajGUID($scope.data.spaj_guid);$scope.data.tglMeninggalAyah_TTU=new Date($scope.data.tglMeninggalAyah_TTU);$scope.data.tglMeninggalIbu_TTU=new Date($scope.data.tglMeninggalIbu_TTU);$scope.data.tglMeninggalAyah_TT1=new Date($scope.data.tglMeninggalAyah_TT1);$scope.data.tglMeninggalIbu_TT1=new Date($scope.data.tglMeninggalIbu_TT1);$scope.data.tglMeninggalAyah_TT2=new Date($scope.data.tglMeninggalAyah_TT2);$scope.data.tglMeninggalIbu_TT2=new Date($scope.data.tglMeninggalIbu_TT2);$scope.data.tglMeninggalAyah_TT3=new Date($scope.data.tglMeninggalAyah_TT3);$scope.data.tglMeninggalIbu_TT3=new Date($scope.data.tglMeninggalIbu_TT3);$scope.data.tglMeninggalAyah_TT4=new Date($scope.data.tglMeninggalAyah_TT4);$scope.data.tglMeninggalIbu_TT4=new Date($scope.data.tglMeninggalIbu_TT4);$store.set('SPAJ::'+$scope.data.spaj_guid+'::'+$formdata.pageId,$scope.data);spajProvider.setSpajElement($formdata)}
$scope.init_data=function(){$scope.isHanya1tertanggung=!1;$scope.isTertanggungTambahan=!1;$scope.data={'spaj_guid':spajProvider.getSpajGUID(),'viewSKKas':'0','jumlahAnakTTU':0,'isHobiAdaTTU':!1,'isHobiAdaTT1':!1,'isHobiAdaTT2':!1,'isHobiAdaTT3':!1,'isHobiAdaTT4':!1,'jenKelTTU':'0','jenKelTT2':'0','jenKelTT3':'0','jenKelTT4':'0','jenKelTT5':'0','isSkkTertanggungAccepted':!1,'isPenyakitTurunan':!1,'jenisPenyakit':!1,'isPenyakitDiderita':!1,'isAdaTTU':!0,'isAdaTT1':!1,'isAdaTT2':!1,'isAdaTT3':!1,'isAdaTT4':!1,'isPenyakit1':!1,'isPenyakit1_TTU':!1,'isPenyakit1_TT1':!1,'isPenyakit1_TT2':!1,'isPenyakit1_TT3':!1,'isPenyakit1_TT4':!1,'isPenyakit2':!1,'isPenyakit2_TTU':!1,'isPenyakit2_TT1':!1,'isPenyakit2_TT2':!1,'isPenyakit2_TT3':!1,'isPenyakit2_TT4':!1,'isPenyakit3':!1,'isPenyakit3_TTU':!1,'isPenyakit3_TT1':!1,'isPenyakit3_TT2':!1,'isPenyakit3_TT3':!1,'isPenyakit3_TT4':!1,'isPenyakit4':!1,'isPenyakit4_TTU':!1,'isPenyakit4_TT1':!1,'isPenyakit4_TT2':!1,'isPenyakit4_TT3':!1,'isPenyakit4_TT4':!1,'isPenyakit5':!1,'isPenyakit5_TTU':!1,'isPenyakit5_TT1':!1,'isPenyakit5_TT2':!1,'isPenyakit5_TT3':!1,'isPenyakit5_TT4':!1,'isPenyakit6':!1,'isPenyakit6_TTU':!1,'isPenyakit6_TT1':!1,'isPenyakit6_TT2':!1,'isPenyakit6_TT3':!1,'isPenyakit6_TT4':!1,'isPenyakit7':!1,'isPenyakit7_TTU':!1,'isPenyakit7_TT1':!1,'isPenyakit7_TT2':!1,'isPenyakit7_TT3':!1,'isPenyakit7_TT4':!1,'isPenyakit5':!1,'isPenyakit5_TTU':!1,'isPenyakit5_TT1':!1,'isPenyakit5_TT2':!1,'isPenyakit5_TT3':!1,'isPenyakit5_TT4':!1,'isPenyakit6':!1,'isPenyakit6_TTU':!1,'isPenyakit6_TT1':!1,'isPenyakit6_TT2':!1,'isPenyakit6_TT3':!1,'isPenyakit6_TT4':!1,'isPenyakit7':!1,'isPenyakit7_TTU':!1,'isPenyakit7_TT1':!1,'isPenyakit7_TT2':!1,'isPenyakit7_TT3':!1,'isPenyakit7_TT4':!1,'isPenyakit8':!1,'isPenyakit8_TTU':!1,'isPenyakit8_TT1':!1,'isPenyakit8_TT2':!1,'isPenyakit8_TT3':!1,'isPenyakit8_TT4':!1,'isPenyakit9':!1,'isPenyakit9_TTU':!1,'isPenyakit9_TT1':!1,'isPenyakit9_TT2':!1,'isPenyakit9_TT3':!1,'isPenyakit9_TT4':!1,'isPenyakit10':!1,'isPenyakit10_TTU':!1,'isPenyakit10_TT1':!1,'isPenyakit10_TT2':!1,'isPenyakit10_TT3':!1,'isPenyakit10_TT4':!1,'isPenyakit11':!1,'isPenyakit11_TTU':!1,'isPenyakit11_TT1':!1,'isPenyakit11_TT2':!1,'isPenyakit11_TT3':!1,'isPenyakit11_TT4':!1,'isPenyakit12':!1,'isPenyakit12_TTU':!1,'isPenyakit12_TT1':!1,'isPenyakit12_TT2':!1,'isPenyakit12_TT3':!1,'isPenyakit12_TT4':!1,'isPenyakit13':!1,'isPenyakit13_TTU':!1,'isPenyakit13_TT1':!1,'isPenyakit13_TT2':!1,'isPenyakit13_TT3':!1,'isPenyakit13_TT4':!1,'isPenyakit14':!1,'isPenyakit14_TTU':!1,'isPenyakit14_TT1':!1,'isPenyakit14_TT2':!1,'isPenyakit14_TT3':!1,'isPenyakit14_TT4':!1,'isPenyakit15':!1,'isPenyakit15_TTU':!1,'isPenyakit15_TT1':!1,'isPenyakit15_TT2':!1,'isPenyakit15_TT3':!1,'isPenyakit15_TT4':!1,'isPenyakit16':!1,'isPenyakit16_TTU':!1,'isPenyakit16_TT1':!1,'isPenyakit16_TT2':!1,'isPenyakit16_TT3':!1,'isPenyakit16_TT4':!1,'isPenyakit17':!1,'jenisPenyakitLainnya':'','isMerokok_TTU':!1,'isMerokok_TT1':!1,'isMerokok_TT2':!1,'isMerokok_TT3':!1,'isMerokok_TT4':!1,'rokokBatangTTU':'','rokokBatangTT1':'','rokokBatangTT2':'','rokokBatangTT3':'','rokokBatangTT4':'','isObat_TTU':!1,'isObat_TT1':!1,'isObat_TT2':!1,'isObat_TT3':!1,'isObat_TT4':!1,'isWanitaPAP_TTU':!1,'isWanitaPAP_TT1':!1,'isWanitaPAP_TT2':!1,'isWanitaPAP_TT3':!1,'isWanitaPAP_TT4':!1,'isMensTerganggu_TTU':!1,'isMensTerganggu_TT1':!1,'isMensTerganggu_TT2':!1,'isMensTerganggu_TT3':!1,'isMensTerganggu_TT4':!1,'isMensTerganggu_TTU':!1,'isMensTerganggu_TT1':!1,'isMensTerganggu_TT2':!1,'isMensTerganggu_TT3':!1,'isMensTerganggu_TT4':!1,'isCesar_TTU':!1,'isCesar_TT1':!1,'isCesar_TT2':!1,'isCesar_TT3':!1,'isCesar_TT4':!1,'isKeguguran_TTU':!1,'isKeguguran_TT1':!1,'isKeguguran_TT2':!1,'isKeguguran_TT3':!1,'isKeguguran_TT4':!1,'isKesulitanHamil_TTU':!1,'isKesulitanHamil_TT1':!1,'isKesulitanHamil_TT2':!1,'isKesulitanHamil_TT3':!1,'isKesulitanHamil_TT4':!1,'umurAyahTTU':'','isAyahDiabet_TTU':!1,'isAyahHipertensi_TTU':!1,'isAyahJantung_TTU':!1,'isAyahTumor_TTU':!1,'isAyahPenyakitKeturunan_TTU':!1,'sebabMeninggalAyah_TTU':'','lamaSakitAyah_TTU':'','tglMeninggalAyah_TTU':'','umurIbuTTU':'','isIbuMeninggal_TTU':!1,'isIbuDiabet_TTU':!1,'isIbuHipertensi_TTU':!1,'isIbuJantung_TTU':!1,'isIbuTumor_TTU':!1,'isIbuPenyakitKeturunan_TTU':!1,'sebabMeninggalIbu_TTU':'','lamaSakitIbu_TTU':'','tglMeninggalIbu_TTU':'','umurPasanganTTU':'','isPasanganMeninggal_TTU':!1,'isPasanganDiabet_TTU':!1,'isPasanganHipertensi_TTU':!1,'isPasanganJantung_TTU':!1,'isPasanganTumor_TTU':!1,'isPasanganPenyakitKeturunan_TTU':!1,'sebabMeninggalPasangan_TTU':'','lamaSakitPasangan_TTU':'','tglMeninggalPasangan_TTU':'','umurSaudaraLakiTTU':'','isSaudaraLakiMeninggal_TTU':!1,'isSaudaraLakiDiabet_TTU':!1,'isSaudaraLakiHipertensi_TTU':!1,'isSaudaraLakiJantung_TTU':!1,'isSaudaraLakiTumor_TTU':!1,'isSaudaraLakiPenyakitKeturunan_TTU':!1,'lamaSakitSaudaraLaki_TTU':'','sebabMeninggalSaudaraLaki_TTU':'','tglMeninggalSaudaraLaki_TTU':'','umurSaudaraPerempuanTTU':'','isSaudaraPerempuanMeninggal_TTU':!1,'isSaudaraPerempuanDiabet_TTU':!1,'isSaudaraPerempuanHipertensi_TTU':!1,'isSaudaraPerempuanJantung_TTU':!1,'isSaudaraPerempuanTumor_TTU':!1,'isSaudaraPerempuanPenyakitKeturunan_TTU':!1,'sebabMeninggalSaudaraPerempuan_TTU':'','lamaSakitSaudaraPerempuan_TTU':'','tglMeninggalSaudaraPerempuan_TTU':'','umurAnakTTU':'','isAnakMeninggal_TTU':!1,'isAnakDiabet_TTU':!1,'isAnakHipertensi_TTU':!1,'isAnakJantung_TTU':!1,'isAnakTumor_TTU':!1,'isAnakPenyakitKeturunan_TTU':!1,'sebabMeninggalAnak_TTU':'','lamaSakitAnak_TTU':'','tglMeninggalAnak_TTU':'','umurAyahTT1':'','umurAyahTT2':'','umurAyahTT3':'','umurAyahTT4':'','isAyahMeninggal_TT1':!1,'isAyahDiabet_TT1':!1,'isAyahHipertensi_TT1':!1,'isAyahJantung_TT1':!1,'isAyahTumor_TT1':!1,'isAyahPenyakitKeturunan_TT1':!1,'sebabMeninggalAyah_TT1':'','lamaSakitAyah_TT1':'','tglMeninggalAyah_TT1':'','umurIbuTT1':'','isIbuMeninggal_TT1':!1,'isIbuDiabet_TT1':!1,'isIbuHipertensi_TT1':!1,'isIbuJantung_TT1':!1,'isIbuTumor_TT1':!1,'isIbuPenyakitKeturunan_TT1':!1,'sebabMeninggalIbu_TT1':'','lamaSakitIbu_TT1':'','tglMeninggalIbu_TT1':'','umurPasanganTT1':'','isPasanganMeninggal_TT1':!1,'isPasanganDiabet_TT1':!1,'isPasanganHipertensi_TT1':!1,'isPasanganJantung_TT1':!1,'isPasanganTumor_TT1':!1,'isPasanganPenyakitKeturunan_TT1':!1,'sebabMeninggalPasangan_TT1':'','lamaSakitPasangan_TT1':'','tglMeninggalPasangan_TT1':'','umurSaudaraLakiTT1':'','isSaudaraLakiMeninggal_TT1':!1,'isSaudaraLakiDiabet_TT1':!1,'isSaudaraLakiHipertensi_TT1':!1,'isSaudaraLakiJantung_TT1':!1,'isSaudaraLakiTumor_TT1':!1,'isSaudaraLakiPenyakitKeturunan_TT1':!1,'lamaSakitSaudaraLaki_TT1':'','sebabMeninggalSaudaraLaki_TT1':'','tglMeninggalSaudaraLaki_TT1':'','umurSaudaraPerempuanTT1':'','isSaudaraPerempuanMeninggal_TT1':!1,'isSaudaraPerempuanDiabet_TT1':!1,'isSaudaraPerempuanHipertensi_TT1':!1,'isSaudaraPerempuanJantung_TT1':!1,'isSaudaraPerempuanTumor_TT1':!1,'isSaudaraPerempuanPenyakitKeturunan_TT1':!1,'sebabMeninggalSaudaraPerempuan_TT1':'','lamaSakitSaudaraPerempuan_TT1':'','tglMeninggalSaudaraPerempuan_TT1':'','umurAnakTT1':'','isAnakMeninggal_TT1':!1,'isAnakDiabet_TT1':!1,'isAnakHipertensi_TT1':!1,'isAnakJantung_TT1':!1,'isAnakTumor_TT1':!1,'isAnakPenyakitKeturunan_TT1':!1,'sebabMeninggalAnak_TT1':'','lamaSakitAnak_TT1':'','tglMeninggalAnak_TT1':'','isSehatTTU':!1,'isSehatTT1':!1,'isGejalaTTU':!1,'isGejalaTT1':!1,'isPenyakitT01_TTU':!1,'tglSakitT01_TTU':'','namaDokterT01_TTU':'','isPenyakitT01_TT1':!1,'tglSakitT01_TT1':'','namaDokterT01_TT1':'','isPenyakitT02_TTU':!1,'tglSakitT02_TTU':'','namaDokterT02_TTU':'','isPenyakitT02_TT1':!1,'tglSakitT02_TT1':'','namaDokterT02_TT1':'','isPenyakitT03_TTU':!1,'tglSakitT03_TTU':'','namaDokterT03_TTU':'','isPenyakitT03_TT1':!1,'tglSakitT03_TT1':'','namaDokterT03_TT1':'','isPenyakitT04_TTU':!1,'tglSakitT04_TTU':'','namaDokterT04_TTU':'','isPenyakitT04_TT1':!1,'tglSakitT04_TT1':'','namaDokterT04_TT1':'','isPenyakitT05_TTU':!1,'tglSakitT05_TTU':'','namaDokterT05_TTU':'','isPenyakitT05_TT1':!1,'tglSakitT05_TT1':'','namaDokterT05_TT1':'','isPenyakitT06_TTU':!1,'tglSakitT06_TTU':'','namaDokterT06_TTU':'','isPenyakitT06_TT1':!1,'tglSakitT06_TT1':'','namaDokterT06_TT1':'','isPenyakitT07_TTU':!1,'tglSakitT07_TTU':'','namaDokterT07_TTU':'','isPenyakitT07_TT1':!1,'tglSakitT07_TT1':'','namaDokterT07_TT1':'','isPenyakitT08_TTU':!1,'tglSakitT08_TTU':'','namaDokterT08_TTU':'','isPenyakitT08_TT1':!1,'tglSakitT08_TT1':'','namaDokterT08_TT1':'','isPenyakitT09_TTU':!1,'tglSakitT09_TTU':'','namaDokterT09_TTU':'','isPenyakitT09_TT1':!1,'tglSakitT09_TT1':'','namaDokterT09_TT1':'','isPenyakitT10_TTU':!1,'tglSakitT10_TTU':'','namaDokterT10_TTU':'','isPenyakitT10_TT1':!1,'tglSakitT10_TT1':'','namaDokterT10_TT1':'','isPenyakitT11_TTU':!1,'tglSakitT11_TTU':'','namaDokterT11_TTU':'','isPenyakitT11_TT1':!1,'tglSakitT11_TT1':'','namaDokterT11_TT1':'','isPenyakitT12_TTU':!1,'tglSakitT12_TTU':'','namaDokterT12_TTU':'','isPenyakitT12_TT1':!1,'tglSakitT12_TT1':'','namaDokterT12_TT1':'','isPenyakitT13_TTU':!1,'tglSakitT13_TTU':'','namaDokterT13_TTU':'','isPenyakitT13_TT1':!1,'tglSakitT13_TT1':'','namaDokterT13_TT1':'','isPenyakitT14_TTU':!1,'tglSakitT14_TTU':'','namaDokterT14_TTU':'','isPenyakitT14_TT1':!1,'tglSakitT14_TT1':'','namaDokterT14_TT1':'','isPenyakitT15_TTU':!1,'tglSakitT15_TTU':'','namaDokterT15_TTU':'','isPenyakitT15_TT1':!1,'tglSakitT15_TT1':'','namaDokterT15_TT1':'','isPenyakitT16_TTU':!1,'tglSakitT16_TTU':'','namaDokterT16_TTU':'','isPenyakitT16_TT1':!1,'tglSakitT16_TT1':'','namaDokterT16_TT1':'','isPenyakitT17_TTU':!1,'tglSakitT17_TTU':'','namaDokterT17_TTU':'','isPenyakitT17_TT1':!1,'tglSakitT17_TT1':'','namaDokterT17_TT1':'','isPenyakitT18_TTU':!1,'tglSakitT18_TTU':'','namaDokterT18_TTU':'','isPenyakitT18_TT1':!1,'tglSakitT18_TT1':'','namaDokterT18_TT1':'','isPenyakitT19_TTU':!1,'tglSakitT19_TTU':'','namaDokterT19_TTU':'','isPenyakitT19_TT1':!1,'tglSakitT19_TT1':'','namaDokterT19_TT1':'','isPenyakitT20_TTU':!1,'tglSakitT20_TTU':'','namaDokterT20_TTU':'','isPenyakitT20_TT1':!1,'tglSakitT20_TT1':'','namaDokterT20_TT1':'','isSKKLengkap':!1,'jumlahSaudaraKandungLakiTTU':0,'umurSaudaraLkTTU':[],'isHidupSaudaraLkTTU':[],'isSehatSaudaraLkTTU':[],'jumlahSaudaraKandungPerempuanTTU':0,'umurSaudaraPrTTU':[],'isHidupSaudaraPrTTU':[],'isSehatSaudaraPrTTU':[],}
if($store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId)==null){}else{$scope.data=$store.get('SPAJ::'+spajProvider.getSpajGUID()+'::'+$scope.pageId);try{for(i=0;i=$scope.data.jumlahSaudaraKandungLakiTTU<i;i++){$scope.data.umurSaudaraLkTTU[i.toString()]=$scope.data.umurSaudaraLkTTU[i]}
for(i=0;i=$scope.data.jumlahSaudaraKandungLakiTTU<i;i++){$scope.data.isHidupSaudaraLkTTU[i.toString()]=$scope.data.isHidupSaudaraLkTTU[i]}
for(i=0;i=$scope.data.jumlahSaudaraKandungLakiTTU<i;i++){$scope.data.isSehatSaudaraLkTTU[i.toString()]=$scope.data.isSehatSaudaraLkTTU[i]}
for(i=0;i=$scope.data.jumlahSaudaraKandungPerempuanTTU<i;i++){$scope.data.umurSaudaraPrTTU[i.toString()]=$scope.data.umurSaudaraPrTTU[i]}
for(i=0;i=$scope.data.jumlahSaudaraKandungPerempuanTTU<i;i++){$scope.data.isHidupSaudaraPrTTU[i.toString()]=$scope.data.isHidupSaudaraPrTTU[i]}
for(i=0;i=$scope.data.jumlahSaudaraKandungPerempuanTTU<i;i++){$scope.data.isSehatSaudaraPrTTU[i.toString()]=$scope.data.isSehatSaudaraPrTTU[i]}}catch(e){console.log(e)}}}
$scope.$on('$ionicView.enter',function(){})
$scope.moveToNextPage=function(){if($scope.data.isSkkTertanggungAccepted){if(confirm('Langsung menuju ke halaman form isian data diri pemegang polis?')){$state.go('aplikasiSPAJOnline.dataPemegangPolis13',{},{reload:!1,inherit:!1})}else{return!1}}}}]).controller('daftarSPAJOnlineCtrl',['$scope','$state','$stateParams','spajProvider','dataFactory','$ionicPopup','$http','$ionicLoading','$location','$store','$ionicScrollDelegate',function($scope,$state,$stateParams,spajProvider,dataFactory,$ionicPopup,$http,$ionicLoading,$location,$store,$ionicScrollDelegate){$scope.idagen=getQueryParam('idagen');$scope.token=getQueryParam('token');$scope.android_ver=getQueryParam('android_ver');$scope.device=getQueryParam('device');$scope.isOnline=1;$scope.isDevice=!1;if(parseInt($scope.android_ver)>0)$scope.isDevice=!0;$scope.messages=[];$scope.isTab1=!0;$scope.isTab2=!1;$scope.isTab3=!1;$scope.isTab4=!1;$scope.changeTab=function(pnum){$scope.isTab1=!1;$scope.isTab2=!1;$scope.isTab3=!1;$scope.isTab4=!1;switch(pnum){case 1:$scope.isTab1=!0;$scope.isTab2=!1;$scope.isTab3=!1;$scope.isTab4=!1;break;case 2:$scope.isTab1=!1;$scope.isTab2=!0;$scope.isTab3=!1;$scope.isTab4=!1;break;case 3:$scope.isTab1=!1;$scope.isTab2=!1;$scope.isTab3=!0;$scope.isTab4=!1;break;case 4:$scope.isTab1=!1;$scope.isTab2=!1;$scope.isTab3=!1;$scope.isTab4=!0;break;default:}}
$scope._Network_state=!0;$scope._Check_Network_state=function(){if(navigator.onLine){$scope._Network_state=!0;$scope.isOnline=1}else{$scope._Network_state=!1;$scope.isOnline=0}
return $scope._Network_state}
window.addEventListener('online',$scope._Check_Network_state);window.addEventListener('offline',$scope._Check_Network_state);$scope.isValidToSubmit=function(guid){$scope.isValidDataTertanggung=!1;$scope.isValidDataPempol=!1;$scope.isValidDataPekerjaan=!1;$scope.isValidSKK=!1;$scope.isValidProdukPenerimaManfaat=!1;$scope.isValidPersetujuan=!1;let bol1=!1;let bol2=!1;let bol3=!1;$scope.sumberDataTertanggung1=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataTertanggung13');if($scope.sumberDataTertanggung1==null){}else{bol1=!0}
$scope.sumberDataTertanggung2=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataTertanggung23');if($scope.sumberDataTertanggung1==null){}else{bol2=!0}
$scope.sumberDataTertanggung3=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataTertanggung33');if($scope.sumberDataTertanggung3==null){}else{bol3=!0}
if(bol1&&bol2&&bol3)$scope.isValidDataTertanggung=!0;bol1=!1;bol2=!1;bol3=!1;$scope.sumberDataPempol1=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataPemegangPolis13');$scope.sumberDataPempol2=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataPemegangPolis23');$scope.sumberDataPempol3=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dataPemegangPolis33');if($scope.sumberDataPempol1==null){}else{bol1=!0}
if($scope.sumberDataPempol2==null){}else{bol2=!0}
if($scope.sumberDataPempol3==null){}else{bol3=!0}
if(bol1&&bol2&&bol3)$scope.isValidDataPempol=!0;bol1=!1;$scope.pekerjaanTertanggung=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.pekerjaanTertanggung');if($scope.pekerjaanTertanggung==null){}else{bol1=!0}
bol2=!1;$scope.pekerjaanPemegangPolis=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.pekerjaanPemegangPolis');if($scope.pekerjaanPemegangPolis==null){}else{bol2=!0}
if(bol1&&bol2)$scope.isValidDataPekerjaan=!0;bol1=!1;$scope.data_skk_utama=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.sKKTertanggung');if($scope.data_skk_utama==null){}else{bol1=!0}
if(bol1)$scope.isValidSKK=!0;bol1=!1;bol2=!1;$scope.data_produk=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.produkDanManfaat12');if($scope.data_produk==null){}else{bol1=!0}
$scope.data_dokumen=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.dokumenPendukungSPAJ::dokumen_spaj');if($scope.data_dokumen==null){}else{bol2=!0}
if(bol1&&bol2)$scope.isValidProdukPenerimaManfaat=!0;$scope.data_persetujuan=$store.get('SPAJ::'+guid+'::aplikasiSPAJOnline.lembarPersetujuan');if($scope.data_persetujuan==null){}else{bol1=!0}
if(bol1)$scope.isValidPersetujuan=!0;isV=!1;isV=($scope.isValidDataTertanggung&&$scope.isValidDataPempol&&$scope.isValidDataPekerjaan&&$scope.isValidSKK&&$scope.isValidProdukPenerimaManfaat&&$scope.isValidPersetujuan);return isV}
$scope.logout=function(){if(confirm('Apakah anda yakin untuk Logout?')){localStorage.removeItem('loggedin');urlOk='login.html?android_ver='+$scope.android_ver;window.open(encodeURI(urlOk),'_self','location=no')}}
$scope.deleteData=function(){if(confirm('Reset data. Akan menghapus data SPAJ baru yang belum Submit.')){localStorage.clear();location.reload();console.log('RESET!!!')}
return!1}
$scope.$on('$ionicView.beforeEnter',function(event,viewData){viewData.enableBack=!0});$scope.unsavedList=spajProvider.getUnsavedSpajGuid();$scope.dataUnprocessedUnderwriting=null;$scope.dataUnprocessedDitolak=null;$scope.dataUnprocessed=null;$scope.editUnsavedSpaj=function(spaj_guid){$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1',{spaj_guid:spaj_guid},{reload:!1,inherit:!1})}
$scope.retrySubmit=function(spaj_guid){if($scope.isValidToSubmit(spaj_guid)){spajProvider.setSpajGUID(spaj_guid);$state.go('aplikasiSPAJOnline.tinjauUlangDanKirimDokumen',{spaj_guid:spaj_guid},{reload:!1,inherit:!1})}else{alert('Dokumen belum dapat disubmit!');return!1}}
$scope.showAlert=function(title,sub,template,buttontype){$ionicPopup.alert({title:title,subTitle:sub,cssClass:'popup-userinfo',scope:$scope,template:template,okType:buttontype})};$scope.dataProfile="";$scope.showProfile=function(idagen){$ionicLoading.show({content:'Loading',animation:'fade-in',showBackdrop:!0,maxWidth:200,showDelay:500});url='http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=get_profile&idagen=';$http({method:"GET",url:url+$scope.idagen}).then(function mySucces(response){$tdata=[];if(response.data==null){}
$scope.dataProfile=response.data;$ionicLoading.hide();tpl='<div class="row">'
tpl+='<div class="col" style="text-align:center;">';tpl+='<img style="width:80%;" src="http://192.168.1.10:7780/asset/avatar/'+idagen+'.jpg">';tpl+='</div>';tpl+='<div class="col">';tpl+='<div class = "list">Nama<label class = "item item-input"> <input style="float:right;" type = "text" placeholder = "Nama" value="'+$scope.dataProfile.NAMAKLIEN1+'"/></label></div>';tpl+='<div class = "list">Jabatan<label class = "item item-input"> <input type = "text" placeholder = "NAMAJABATANAGEN" value="'+$scope.dataProfile.NAMAJABATANAGEN+'"/></label></div>';tpl+='<div class = "list">No. Lisensi <label class = "item item-input"><input type = "text" placeholder = "NOLISENSIAGEN"  value="'+$scope.dataProfile.NOLISENSIAGEN+'" /></label></div>';tpl+='<div class = "list">Masa Berlaku Lisensi<label class = "item item-input"> <input type = "text" placeholder = "TGLMULAILISENSI TGLAKHIRLISENSI"  value="'+$scope.dataProfile.TGLMULAILISENSI+" s/d "+$scope.dataProfile.TGLAKHIRLISENSI+'"/></label></div>';tpl+='';tpl+="</div></div> ";tpl+='<a style="" ng-hide="!isDevice" class="button button-block button-energized button-medium " ng-click="logout()">LOGOUT >></a>';$scope.showAlert('User Info',idagen,tpl,'button-balanced')},function myError(response){$ionicLoading.hide()}).withCredentials=!0}
$http({method:"GET",url:"http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=get_processed&idagen="+$scope.idagen+"&token="+$scope.token}).then(function mySucces(response){$tdata=[];if(response.data==null){}
$scope.dataProcessed=response.data;$ionicLoading.hide()},function myError(response){$scope.dataProcessed=response.message;$ionicLoading.hide()}).withCredentials=!0;$http({method:"GET",url:"http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=get_underwrite&idagen="+$scope.idagen+"&token="+$scope.token}).then(function mySucces(response){$tdata=[];if(response.data==null){}
$scope.dataUnprocessedUnderwriting=response.data;$ionicLoading.hide()},function myError(response){$scope.dataUnprocessedUnderwriting=response.message;$ionicLoading.hide()}).withCredentials=!0;ctrl_pdf=function(obj,param){return obj.find(obj=>{return obj.id===param})}
$http({method:"GET",url:"http://192.168.1.10:7780/mobileapi/spaj_bridge/get.php?act=get_prospek&idagen="+$scope.idagen+"&token="+$scope.token}).then(function mySucces(response){if(response.data[0]===null){console.log("Tidak ada data prospek yang baru!")}else{$tdata=[];for(i=0;i<response.data.length;i++){try{$dt=response.data[i].TGLLAHIR.split('/');$tl=$dt[2]+'-'+$dt[1]+'-'+$dt[0]}catch(e){$tl='0000-00-00'}
$tdata.push({'build_id':response.data[i].BUILD_ID,'no_prospek':response.data[i].NO_PROSPEK,'cara_bayar':response.data[i].CARA_BAYAR,'jumlah_premi':response.data[i].JUMLAH_PREMI,'premi_berkala':response.data[i].PREMI_BERKALA,'topup_berkala':response.data[i].TOPUP_BERKALA,'topup_sekaligus':response.data[i].TOPUP_SEKALIGUS,'jua':response.data[i].JUA,'tgl_rekam':response.data[i].TGL_REKAM,'id_produk':response.data[i].ID_PRODUK,'kd_produk':response.data[i].KD_PRODUK,'file_pdf':response.data[i].FILE_PDF,'nama':response.data[i].NAMA,'alamat':response.data[i].ALAMAT,'kota':response.data[i].KOTA,'kdprovinsi':response.data[i].KDPROVINSI,'kdpropinsi':response.data[i].KDPROPINSI,'tgllahir':$tl,'email':response.data[i].EMAIL,'hp':response.data[i].HP,'no_ktp_tertanggung':response.data[i].NO_KTP,'telp':response.data[i].TELP,'jeniskelamin':(response.data[i].JENISKELAMIN=='M')?1:2,'is_perokok':response.data[i].IS_PEROKOK,'kode_alokasi':response.data[i].NAMA_ALOKASI1,'penghasilan':response.data[i].PENGHASILAN,'namaAgen':response.data[i].NAMAAGEN,'ADB':response.data[i].ADB,'ADDB':response.data[i].ADDB,'CI':response.data[i].CI,'HCP_BEDAH':response.data[i].HCP_BEDAH,'HCP_MURNI':response.data[i].HCP_MURNI,'IS_ADB':(response.data[i].IS_ADB=='1')?true:!1,'IS_ADDB':(response.data[i].IS_ADDB=='1')?true:!1,'IS_CI':(response.data[i].IS_CI=='1')?true:!1,'IS_HCP_BEDAH':(response.data[i].IS_HCP_BEDAH=='1')?true:!1,'IS_HCP_MURNI':(response.data[i].IS_HCP_MURNI=='1')?true:!1,'IS_PAYOR_DEATH':(response.data[i].IS_PAYOR_DEATH=='1')?true:!1,'IS_PAYOR_TPD':(response.data[i].IS_PAYOR_TPD=='1')?true:!1,'IS_SPOUSE_DEATH':(response.data[i].IS_SPOUSE_DEATH=='1')?true:!1,'IS_SPOUSE_TPD':(response.data[i].IS_SPOUSE_TPD=='1')?true:!1,'IS_TL':(response.data[i].IS_TL=='1')?true:!1,'IS_TPD':(response.data[i].IS_TPD=='1')?true:!1,'IS_WAIVER_CI':(response.data[i].IS_WAIVER_CI=='1')?true:!1,'IS_WAIVER_TPD':(response.data[i].IS_WAIVER_TPD=='1')?true:!1,'PAYOR_DEATH':response.data[i].PAYOR_DEATH,'PAYOR_TPD':response.data[i].PAYOR_TPD,'PLAFON_HCP_BEDAH':response.data[i].PLAFON_HCP_BEDAH,'PLAFON_HCP_MURNI':response.data[i].PLAFON_HCP_MURNI,'SPOUSE_DEATH':response.data[i].SPOUSE_DEATH,'SPOUSE_TPD':response.data[i].SPOUSE_TPD,'TL':response.data[i].TL,'TPD':response.data[i].TPD,'WAIVER_CI':response.data[i].WAIVER_CI,'WAIVER_TPD':response.data[i].WAIVER_TPD})}}
spajProvider.setProspekListData($scope.idagen,$tdata);spajProvider.setInternetAvailability(1);$ionicLoading.hide();$scope.dataProspek=spajProvider.getProspekListData($scope.idagen)},function myError(response){$scope.dataProspek=spajProvider.getProspekListData($scope.idagen);spajProvider.setInternetAvailability(0);console.log('offline mode...')}).withCredentials=!0;$scope.deleteUnsavedSpaj=function(spaj_guid){if(confirm('Apakah ingin menghapus dokumen SPAJ ini?')){spajProvider.delUnsavedSpajGuid(spaj_guid);location.reload();return!0}}
$scope.editSpaj=function(item){$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1',{},{reload:!0,inherit:!1})}
$scope.doNewSPAJ=function(){$state.go('aplikasiSPAJOnline',{},{reload:!0,inherit:!1})}
$scope.newSpajProspek=function(build_id){spajProvider.setSpajGUID('new');spajProvider.setBuildId(build_id);spajProvider.setProspekData(JSON.stringify($scope.dataProspek));$state.go('aplikasiSPAJOnline.dataTertanggung13_tab1',{spaj_guid:'new'},{reload:!0,inherit:!1})}}])